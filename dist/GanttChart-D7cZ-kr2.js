"use strict";var e,t,r=require("react"),a=require("date-fns");exports.__assign=function(){return exports.__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},exports.__assign.apply(this,arguments)},"function"==typeof SuppressedError&&SuppressedError,exports.ViewMode=void 0,(e=exports.ViewMode||(exports.ViewMode={})).MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.QUARTER="quarter",e.YEAR="year",exports.DateDisplayFormat=void 0,(t=exports.DateDisplayFormat||(exports.DateDisplayFormat={})).MONTH_YEAR="month-year",t.FULL_DATE="full-date",t.SHORT_DATE="short-date";var n={colors:{background:"#ffffff",text:"#1f2937",border:"#e5e7eb",highlight:"#eff6ff",task:{background:"#3b82f6",text:"#ffffff",border:"#2563eb",progress:"rgba(0, 0, 0, 0.2)",progressFill:"#ffffff"},timeline:{background:"#ffffff",headerBackground:"#f9fafb",headerText:"#1f2937",marker:"#ef4444"},scrollbar:{track:"rgba(229, 231, 235, 0.5)",thumb:"rgba(156, 163, 175, 0.7)",thumbHover:"rgba(107, 114, 128, 0.8)"}},sizes:{rowHeight:40,taskHeight:32,unitWidth:{minute:30,hour:40,day:50,week:80,month:150,quarter:180,year:200},borderRadius:"4px",fontSize:"0.875rem"},animation:{speed:.25,easing:"cubic-bezier(0.2, 0, 0.13, 2)"}},o=exports.__assign(exports.__assign({},n),{colors:{background:"#1f2937",text:"#f3f4f6",border:"#374151",highlight:"#2d3748",task:{background:"#4f46e5",text:"#ffffff",border:"#6366f1",progress:"rgba(0, 0, 0, 0.3)",progressFill:"#e5e7eb"},timeline:{background:"#1f2937",headerBackground:"#111827",headerText:"#e5e7eb",marker:"#ef4444"},scrollbar:{track:"rgba(55, 65, 81, 0.5)",thumb:"rgba(75, 85, 99, 0.7)",thumbHover:"rgba(107, 114, 128, 0.8)"}}});function s(e,t){return void 0===t&&(t=!0),"\n".concat(t?":root":""," {\n  /* Base colors */\n  --rmg-bg-color: ").concat(e.colors.background,";\n  --rmg-text-color: ").concat(e.colors.text,";\n  --rmg-border-color: ").concat(e.colors.border,";\n  --rmg-highlight-color: ").concat(e.colors.highlight,";\n\n  /* Task colors */\n  --rmg-task-bg-color: ").concat(e.colors.task.background,";\n  --rmg-task-text-color: ").concat(e.colors.task.text,";\n  --rmg-task-border-color: ").concat(e.colors.task.border,";\n  --rmg-task-progress-color: ").concat(e.colors.task.progress,";\n  --rmg-task-progress-fill-color: ").concat(e.colors.task.progressFill,";\n\n  /* Timeline colors */\n  --rmg-timeline-bg-color: ").concat(e.colors.timeline.background,";\n  --rmg-timeline-header-bg-color: ").concat(e.colors.timeline.headerBackground,";\n  --rmg-timeline-header-text-color: ").concat(e.colors.timeline.headerText,";\n  --rmg-timeline-marker-color: ").concat(e.colors.timeline.marker,";\n\n  /* Scrollbar colors */\n  --rmg-scrollbar-track-color: ").concat(e.colors.scrollbar.track,";\n  --rmg-scrollbar-thumb-color: ").concat(e.colors.scrollbar.thumb,";\n  --rmg-scrollbar-thumb-hover-color: ").concat(e.colors.scrollbar.thumbHover,";\n\n  /* Sizes */\n  --rmg-row-height: ").concat(e.sizes.rowHeight,"px;\n  --rmg-task-height: ").concat(e.sizes.taskHeight,"px;\n  --rmg-border-radius: ").concat(e.sizes.borderRadius,";\n  --rmg-font-size: ").concat(e.sizes.fontSize,";\n\n  /* Unit widths by view mode */\n  --rmg-unit-width-minute: ").concat(e.sizes.unitWidth.minute,"px;\n  --rmg-unit-width-hour: ").concat(e.sizes.unitWidth.hour,"px;\n  --rmg-unit-width-day: ").concat(e.sizes.unitWidth.day,"px;\n  --rmg-unit-width-week: ").concat(e.sizes.unitWidth.week,"px;\n  --rmg-unit-width-month: ").concat(e.sizes.unitWidth.month,"px;\n  --rmg-unit-width-quarter: ").concat(e.sizes.unitWidth.quarter,"px;\n  --rmg-unit-width-year: ").concat(e.sizes.unitWidth.year,"px;\n\n  /* Animation */\n  --rmg-animation-speed: ").concat(e.animation.speed,";\n  --rmg-animation-easing: ").concat(e.animation.easing,";\n}\n")}var i=s(n),c=s(o);function l(e,t){var r,a,s,i;void 0===t&&(t=!1);var c=t?o:n;return{colors:exports.__assign(exports.__assign(exports.__assign({},c.colors),e.colors),{task:exports.__assign(exports.__assign({},c.colors.task),null===(r=e.colors)||void 0===r?void 0:r.task),timeline:exports.__assign(exports.__assign({},c.colors.timeline),null===(a=e.colors)||void 0===a?void 0:a.timeline),scrollbar:exports.__assign(exports.__assign({},c.colors.scrollbar),null===(s=e.colors)||void 0===s?void 0:s.scrollbar)}),sizes:exports.__assign(exports.__assign(exports.__assign({},c.sizes),e.sizes),{unitWidth:exports.__assign(exports.__assign({},c.sizes.unitWidth),null===(i=e.sizes)||void 0===i?void 0:i.unitWidth)}),animation:exports.__assign(exports.__assign({},c.animation),e.animation)}}var d=function(){function e(){}return e.detectOverlaps=function(e,t){var r=this;if(void 0===t&&(t=exports.ViewMode.MONTH),!Array.isArray(e)||0===e.length)return[];var a=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===a.length)return[];var n=function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}([],a,!0).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()})),o=[];return n.forEach((function(e){for(var a=!1,n=0;n<o.length;n++){if(!o[n].some((function(a){return r.tasksVisuallyOverlap(e,a,t)}))){o[n].push(e),a=!0;break}}a||o.push([e])})),o},e.tasksVisuallyOverlap=function(e,t,r){if(void 0===r&&(r=exports.ViewMode.MONTH),!(e&&t&&e.id&&t.id))return!1;if(e.id===t.id)return!1;if(!(e.startDate instanceof Date&&e.endDate instanceof Date&&t.startDate instanceof Date&&t.endDate instanceof Date))return!1;var a=e.startDate.getTime(),n=e.endDate.getTime(),o=t.startDate.getTime(),s=t.endDate.getTime(),i=this.getCollisionBufferByViewMode(r);return a<s&&n>o||Math.abs(a-o)<2*i||Math.abs(n-s)<2*i},e.getCollisionBufferByViewMode=function(e){var t=36e5,r=24*t;switch(e){case exports.ViewMode.MINUTE:return 3e4;case exports.ViewMode.HOUR:return 9e5;case exports.ViewMode.DAY:return t;case exports.ViewMode.WEEK:return 4*t;case exports.ViewMode.MONTH:return 12*t;case exports.ViewMode.QUARTER:return r;case exports.ViewMode.YEAR:return 2*r;default:return 12*t}},e.wouldCollide=function(e,t,r,a){var n=this;return void 0===r&&(r=exports.ViewMode.MONTH),!(!e||!Array.isArray(t))&&t.some((function(t){return t.id!==e.id&&t.id!==a&&n.tasksVisuallyOverlap(e,t,r)}))},e.getPreviewArrangement=function(e,t,r){if(void 0===r&&(r=exports.ViewMode.MONTH),!e||!Array.isArray(t))return this.detectOverlaps(t,r);try{var a=t.map((function(t){return t.id===e.id?e:t}));return this.detectOverlaps(a,r)}catch(e){return console.error("Error in getPreviewArrangement:",e),this.detectOverlaps(t,r)}},e}(),u=function(){function e(){}return e.calculateDatesFromPosition=function(e,t,r,n,o,s,i){void 0===i&&(i=exports.ViewMode.MONTH);try{var c=isNaN(e)?0:e,l=isNaN(t)||t<20?20:t,d=r.getTime(),u=(n.getTime()-d)/(o*s),g=c*u,f=l*u,h=new Date(d+g),m=new Date(d+g+f);switch(i){case exports.ViewMode.MINUTE:h.setSeconds(0,0),m.setSeconds(59,999);break;case exports.ViewMode.HOUR:h.setMinutes(0,0,0),m.setMinutes(59,59,999);break;case exports.ViewMode.DAY:var p=Math.round(e/s),v=Math.max(1,Math.round(t/s)),w=new Date(r);w.setHours(0,0,0,0),(h=new Date(w)).setDate(w.getDate()+p),h.setHours(0,0,0,0),(m=new Date(h)).setDate(h.getDate()+v-1),m.setHours(23,59,59,999);break;default:h=a.startOfDay(h),m=a.endOfDay(m)}return h<r&&(h=new Date(r)),m>n&&(m=new Date(n)),{newStartDate:h,newEndDate:m}}catch(e){return console.error("Error calculating dates from position:",e),{newStartDate:new Date(r),newEndDate:new Date(n)}}},e.createUpdatedTask=function(e,t,r){return e?exports.__assign(exports.__assign({},e),{startDate:new Date(t),endDate:new Date(r)}):e},e.calculateTaskPixelPosition=function(e,t,r,a,n,o){var s;void 0===o&&(o=exports.ViewMode.MONTH);try{if(!(e&&e.startDate instanceof Date&&e.endDate instanceof Date))return console.warn("Invalid task data in calculateTaskPixelPosition:",e),{leftPx:0,widthPx:20};var i=t.getTime(),c=r.getTime(),l=Math.max(e.startDate.getTime(),t.getTime()),d=Math.min(e.endDate.getTime(),r.getTime());if(o===exports.ViewMode.MINUTE||o===exports.ViewMode.HOUR||o===exports.ViewMode.DAY){var u=void 0,g=void 0;if(o===exports.ViewMode.MINUTE)u=i,g=c;else if(o===exports.ViewMode.HOUR){var f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime(),h=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),59,59,999).getTime();u=f,g=h}else{var m=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),p=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999).getTime();u=m,g=p}if(i=u,c=g,o===exports.ViewMode.DAY){var v=new Date(new Date(l).getFullYear(),new Date(l).getMonth(),new Date(l).getDate(),0,0,0,0).getTime(),w=new Date(new Date(d).getFullYear(),new Date(d).getMonth(),new Date(d).getDate(),23,59,59,999).getTime();l=v,d=w}}var M=c-i;if(M<=0)return{leftPx:0,widthPx:20};var x=a*n,D=(l-i)/M*x,k=(d-l)/M*x;o===exports.ViewMode.MINUTE?(D=Math.round(D),k=Math.max(10,Math.round(k))):o===exports.ViewMode.HOUR?(D=Math.round(D),k=Math.max(15,Math.round(k))):o===exports.ViewMode.DAY&&(D=Math.round(D/n)*n,k=Math.max(n,Math.round(k/n)*n));var b=((s={})[exports.ViewMode.MINUTE]=10,s[exports.ViewMode.HOUR]=15,s[exports.ViewMode.DAY]=20,s[exports.ViewMode.WEEK]=20,s[exports.ViewMode.MONTH]=20,s[exports.ViewMode.QUARTER]=30,s[exports.ViewMode.YEAR]=40,s)[o]||20;k=Math.max(b,k);var y=x-D;return{leftPx:D,widthPx:k=Math.min(y,k)}}catch(e){return console.error("Error calculating task position:",e),{leftPx:0,widthPx:20}}},e.getLiveDatesFromElement=function(e,t,r,a,n,o){void 0===o&&(o=exports.ViewMode.MONTH);try{if(!e)return{startDate:new Date(t),endDate:new Date(r)};var s=parseFloat(e.style.left||"0"),i=parseFloat(e.style.width||"0"),c=this.calculateDatesFromPosition(s,i,t,r,a,n,o);return{startDate:c.newStartDate,endDate:c.newEndDate}}catch(e){return console.error("Error getting live dates:",e),{startDate:new Date(t),endDate:new Date(r)}}},e.datesOverlap=function(e,t,r,n){try{return e instanceof Date&&t instanceof Date&&r instanceof Date&&n instanceof Date&&(a.isWithinInterval(e,{start:r,end:n})||a.isWithinInterval(t,{start:r,end:n})||a.isWithinInterval(r,{start:e,end:t})||a.isWithinInterval(n,{start:e,end:t}))}catch(e){return console.error("Error checking dates overlap:",e),!1}},e}();function g(e,t,r){if(void 0===t&&(t=exports.DateDisplayFormat.FULL_DATE),void 0===r&&(r="default"),!(e instanceof Date)||isNaN(e.getTime()))return"Invalid date";switch(t){case exports.DateDisplayFormat.MONTH_YEAR:return e.toLocaleString(r,{month:"short",year:"2-digit"});case exports.DateDisplayFormat.SHORT_DATE:return e.toLocaleString(r,{month:"short",day:"numeric"});case exports.DateDisplayFormat.FULL_DATE:default:return e.toLocaleString(r,{month:"short",day:"numeric",year:"numeric"})}}function f(e,t){var r=[];if(!(e instanceof Date&&t instanceof Date))return[new Date];for(var a=e.getFullYear(),n=e.getMonth(),o=t.getFullYear(),s=t.getMonth(),i=a;i<=o;i++)for(var c=i===o?s:11,l=i===a?n:0;l<=c;l++)r.push(new Date(i,l,1));return r}function h(e,t,r){void 0===r&&(r=exports.ViewMode.MONTH);try{if(!(e instanceof Date)||!(t instanceof Date)||isNaN(e.getTime())||isNaN(t.getTime()))return{value:0,unit:"days"};var n=e<t?e:t,o=e<t?t:e;switch(r){case exports.ViewMode.DAY:var s=a.differenceInDays(o,n)+1;return{value:s,unit:1===s?"day":"days"};case exports.ViewMode.WEEK:var i=a.differenceInWeeks(o,n)+1;return{value:i,unit:1===i?"week":"weeks"};case exports.ViewMode.MONTH:var c=a.differenceInMonths(o,n)+1;return{value:c,unit:1===c?"month":"months"};case exports.ViewMode.QUARTER:var l=a.differenceInQuarters(o,n)+1;return{value:l,unit:1===l?"quarter":"quarters"};case exports.ViewMode.YEAR:var d=a.differenceInYears(o,n)+1;return{value:d,unit:1===d?"year":"years"};default:var u=a.differenceInDays(o,n)+1;return{value:u,unit:1===u?"day":"days"}}}catch(e){return console.error("Error calculating duration:",e),{value:0,unit:"days"}}}var m=function(e){var t=e.task,n=e.position,o=e.dragType,s=e.taskId,i=e.startDate,c=e.endDate,l=e.totalMonths,d=e.monthWidth,g=e.showProgress,f=void 0!==g&&g,m=e.instanceId,p=e.className,v=void 0===p?"":p,w=e.viewMode,M=void 0===w?exports.ViewMode.MONTH:w,x=e.renderTooltip,D=t.startDate,k=t.endDate;try{var b=s||t.id,y=document.querySelector('[data-task-id="'.concat(b,'"][data-instance-id="').concat(m,'"]'));if(y&&(o||y.style.left||y.style.width)){var T=u.getLiveDatesFromElement(y,i,c,l,d,M);D=T.startDate,k=T.endDate}}catch(e){console.error("Error calculating live dates for tooltip:",e)}var E=h(D,k,M),V=function(e){return e instanceof Date&&!isNaN(e.getTime())?M===exports.ViewMode.DAY?a.format(e,"EEE, MMM d, yyyy"):a.format(e,"MMM d, yyyy"):"Invalid date"},N=function(){if(!o)return null;switch(o){case"move":return"Moving task...";case"resize-left":return"Adjusting start date...";case"resize-right":return"Adjusting end date...";default:return null}}();return x?r.createElement("div",{className:"rmg-task-tooltip absolute z-20 ".concat(v),style:{left:"".concat(n.x,"px"),top:"".concat(n.y-40,"px")}},x({task:t,position:n,dragType:o,startDate:D,endDate:k,viewMode:M})):r.createElement("div",{className:"rmg-task-tooltip absolute z-20 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-700 rounded-md shadow-md dark:shadow-gray-900 p-2 text-xs select-none ".concat(v),style:{left:"".concat(n.x,"px"),top:"".concat(n.y-40,"px"),minWidth:"200px"}},r.createElement("div",{className:"font-bold mb-1"},t.name||"Unnamed Task"),N&&r.createElement("div",{className:"text-xs text-blue-500 dark:text-blue-400 mb-1 italic"},N),r.createElement("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1"},r.createElement("div",{className:"font-semibold"},"Start:"),r.createElement("div",null,V(D)),r.createElement("div",{className:"font-semibold"},"End:"),r.createElement("div",null,V(k)),r.createElement("div",{className:"font-semibold"},"Duration:"),r.createElement("div",null,E.value," ",E.unit),f&&"number"==typeof t.percent&&r.createElement(r.Fragment,null,r.createElement("div",{className:"font-semibold"},"Progress:"),r.createElement("div",null,t.percent,"%")),t.dependencies&&t.dependencies.length>0&&r.createElement(r.Fragment,null,r.createElement("div",{className:"font-semibold"},"Dependencies:"),r.createElement("div",null,t.dependencies.join(", ")))))},p=function(e){var t=e.activeMode,a=e.onChange,n=e.darkMode,o=e.availableModes,s=[{id:exports.ViewMode.MINUTE,label:"Minute"},{id:exports.ViewMode.HOUR,label:"Hour"},{id:exports.ViewMode.DAY,label:"Day"},{id:exports.ViewMode.WEEK,label:"Week"},{id:exports.ViewMode.MONTH,label:"Month"},{id:exports.ViewMode.QUARTER,label:"Quarter"},{id:exports.ViewMode.YEAR,label:"Year"}],i=[exports.ViewMode.DAY,exports.ViewMode.WEEK,exports.ViewMode.MONTH,exports.ViewMode.QUARTER,exports.ViewMode.YEAR],c=o?s.filter((function(e){return o.includes(e.id)})):s.filter((function(e){return i.includes(e.id)})),l=r.useRef(null),d=r.useState({left:"0px",width:"0px"}),u=d[0],g=d[1];r.useEffect((function(){var e=function(){if(l.current){var e=l.current.querySelector('[aria-selected="true"]');if(e){var t=e,r=t.offsetLeft,a=t.offsetWidth;g({left:"".concat(r,"px"),width:"".concat(a,"px")})}}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[t]);var f="\n    relative inline-flex rounded-full p-0.5\n    ".concat(n?"bg-gray-800/80":"bg-gray-100/90","\n    transition-all duration-300 ease-in-out shadow-sm dark:shadow-gray-900\n    border ").concat(n?"border-gray-700":"border-gray-200","\n    ");return r.createElement("div",{className:"relative flex items-center"},r.createElement("div",{ref:l,className:f,role:"tablist","aria-label":"View mode options"},r.createElement("span",{className:"\n                        absolute z-0 inset-0.5 rounded-full\n                        transition-all duration-300 ease-out transform\n                        ".concat(n?"bg-indigo-600":"bg-indigo-500","\n                    "),style:u,"aria-hidden":"true"}),c.map((function(e){return r.createElement("button",{key:e.id,role:"tab","aria-selected":t===e.id,"aria-controls":"panel-".concat(e.id),className:"".concat((o=t===e.id,"\n    relative z-10 px-3 py-1 text-xs font-medium\n    transition-all duration-200 ease-in-out\n    ".concat(o?"text-white":n?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-gray-700","\n    focus:outline-none border-none\n    "))," rounded-full"),onClick:function(){return a(e.id)}},e.label);var o}))))},v=function(e){var t=e.title,a=e.darkMode,n=e.activeViewMode,o=e.onViewModeChange,s=e.showViewModeSelector,i=e.availableViewModes,c=e.renderHeader,l=e.renderViewModeSelector,d=e.styles;return c?c({title:t,darkMode:a,viewMode:n,onViewModeChange:o,showViewModeSelector:s}):r.createElement("div",{className:"p-6 border-b border-gantt-border bg-gantt-bg ".concat(d.header||"")},r.createElement("div",{className:"flex justify-between items-center"},r.createElement("h1",{className:"text-2xl font-bold text-gantt-text ".concat(d.title||"")},t),s&&r.createElement("div",{className:"flex space-x-2"},l?l({activeMode:n,onChange:o,darkMode:a,availableModes:i}):r.createElement(p,{activeMode:n,onChange:o,darkMode:a,availableModes:i}))))},w=function(e){var t=e.months,n=e.currentMonthIndex,o=(e.locale,e.className),s=void 0===o?"":o,i=e.viewMode,c=void 0===i?exports.ViewMode.MONTH:i,l=e.unitWidth,d=void 0===l?150:l,u=[exports.ViewMode.MINUTE,exports.ViewMode.HOUR,exports.ViewMode.DAY,exports.ViewMode.WEEK].includes(c),g=function(){if(![exports.ViewMode.MINUTE,exports.ViewMode.HOUR,exports.ViewMode.DAY,exports.ViewMode.WEEK].includes(c)||0===t.length)return[];var e=[];if(c===exports.ViewMode.MINUTE){var r=new Date(t[0]);r.setMinutes(0,0,0);var a=0;return t.forEach((function(t){t.getHours()===r.getHours()&&t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()?a+=1:(e.push({date:r,span:a}),(r=new Date(t)).setMinutes(0,0,0),a=1)})),a>0&&e.push({date:r,span:a}),e}if(c===exports.ViewMode.HOUR){var n=new Date(t[0]);n.setHours(0,0,0,0);var o=0;return t.forEach((function(t){t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()?o+=1:(e.push({date:n,span:o}),(n=new Date(t)).setHours(0,0,0,0),o=1)})),o>0&&e.push({date:n,span:o}),e}var s=new Date(t[0]),i=0;return t.forEach((function(t){t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()?i+=1:(e.push({date:s,span:i}),s=new Date(t),i=1)})),i>0&&e.push({date:s,span:i}),e}();return r.createElement("div",{className:"rmg-timeline ".concat(s),style:{"--gantt-unit-width":"".concat(d,"px")}},u&&r.createElement("div",{className:"flex border-b border-gantt-border"},g.map((function(e,t){return r.createElement("div",{key:"higher-level-".concat(t),className:"flex-shrink-0 p-2 font-semibold text-center text-gray-800 dark:text-gray-200 border-r border-gray-200 dark:border-gray-700 h-10",style:{width:"".concat(e.span*d,"px")},"data-timeunit-higher":e.date.toISOString()},function(e){if(!(e instanceof Date))return"";switch(c){case exports.ViewMode.MINUTE:return a.format(e,"HH:00",{locale:void 0});case exports.ViewMode.HOUR:return a.format(e,"MMM d",{locale:void 0});case exports.ViewMode.DAY:case exports.ViewMode.WEEK:default:return a.format(e,"MMM yyyy",{locale:void 0})}}(e.date))}))),r.createElement("div",{className:"flex border-b border-gantt-border"},t.map((function(e,t){return r.createElement("div",{key:"timeunit-".concat(t),className:"".concat("w-[var(--gantt-unit-width)]"," flex-shrink-0 p-2 font-semibold text-center text-gantt-text ").concat(t===n?"bg-gantt-highlight":""," ").concat(u?"border-r border-gantt-border":""," h-10"),"data-timeunit":e.toISOString()},function(e){if(!(e instanceof Date&&a.isValid(e)))return"";switch(c){case exports.ViewMode.MINUTE:return a.format(e,"HH:mm",{locale:void 0});case exports.ViewMode.HOUR:return a.format(e,"HH:00",{locale:void 0});case exports.ViewMode.DAY:return a.format(e,"d",{locale:void 0});case exports.ViewMode.WEEK:var t=a.getWeek(e);return"W".concat(t);case exports.ViewMode.MONTH:return a.format(e,"MMM yyyy",{locale:void 0});case exports.ViewMode.QUARTER:var r=Math.floor(e.getMonth()/3)+1;return"Q".concat(r," ").concat(e.getFullYear());case exports.ViewMode.YEAR:return e.getFullYear().toString();default:return a.format(e,"MMM yyyy",{locale:void 0})}}(e))}))))},M=function(e){var t=e.currentMonthIndex,a=e.height,n=e.markerClass,o=void 0===n?"bg-red-500":n,s=e.label,i=void 0===s?"Today":s,c=e.dayOfMonth,l=e.className,d=void 0===l?"":l,u=e.viewMode,g=void 0===u?exports.ViewMode.MONTH:u,f=e.unitWidth,h=void 0===f?150:f;if(t<0)return null;var m=function(){var e=new Date,r=c||e.getDate();switch(g){case exports.ViewMode.MINUTE:var a=e.getMinutes(),n=e.getSeconds();return t*h+h*((a+n/60)/60);case exports.ViewMode.HOUR:var o=e.getMinutes();return t*h+h*(o/60);case exports.ViewMode.DAY:return t*h+h/2;case exports.ViewMode.WEEK:var s=e.getDay();return t*h+h*((s+7)%7/6);case exports.ViewMode.MONTH:var i=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return t*h+h*((r-1)/i);case exports.ViewMode.QUARTER:var l=e.getMonth()%3;return t*h+h*(l/3);case exports.ViewMode.YEAR:var d=e.getMonth();return t*h+h*(d/12);default:return t*h+h/2}}(),p=Math.max(100,a);return r.createElement("div",{className:"absolute top-0 w-px ".concat(o," z-10 ").concat(d),style:{left:"".concat(m,"px"),height:"".concat(p,"px"),boxShadow:"0 0 4px rgba(239, 68, 68, 0.5)"},"data-testid":"today-marker"},r.createElement("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 ".concat(o," px-1.5 py-0.5 rounded text-xs text-white dark:text-white whitespace-nowrap shadow-sm")},i))},x=r.forwardRef((function(e,t){var a=e.percent,n=e.isHovered,o=e.isDraggingProgress,s=e.editMode;e.showProgress;var i=e.onProgressClick,c=e.onProgressMouseDown;return r.createElement("div",{ref:t,className:"rmg-progress-bar",onClick:i},r.createElement("div",{className:"rmg-progress-fill",style:{width:"".concat(a,"%")}},s&&(n||o)&&r.createElement("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 h-4 w-4 rounded-full bg-white dark:bg-gray-300 border-2 border-blue-500 dark:border-blue-400 cursor-ew-resize shadow-sm hover:shadow-md transition-shadow ".concat(o?"scale-110":""),onMouseDown:c})))}));x.displayName="ProgressBar";var D=function(e){var t=e.tasks,a=void 0===t?[]:t,n=e.headerLabel,o=void 0===n?"Resources":n,s=e.showIcon,i=void 0!==s&&s,c=e.showTaskCount,l=void 0!==c&&c,u=e.showDescription,g=void 0===u||u,f=e.rowHeight,h=void 0===f?40:f,m=e.className,p=void 0===m?"":m,v=e.onGroupClick,w=e.viewMode,M=Array.isArray(a)?a:[],x=w===exports.ViewMode.DAY||w===exports.ViewMode.WEEK;return r.createElement("div",{className:"rmg-task-list w-40 flex-shrink-0 z-10 bg-gantt-bg shadow-sm ".concat(p)},x?r.createElement(r.Fragment,null,r.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"}),r.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"},o)):r.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"},o),M.map((function(e){if(!e)return null;var t=function(e){if(!e.tasks||!Array.isArray(e.tasks))return 60;var t=d.detectOverlaps(e.tasks,w);return Math.max(60,t.length*h+20)}(e);return r.createElement("div",{key:"task-group-".concat(e.id||"unknown"),className:"p-2 border-r border-b border-gray-200 dark:border-gray-700 font-medium text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",style:{height:"".concat(t,"px")},onClick:function(){return t=e,void(v&&v(t));var t},"data-testid":"task-group-".concat(e.id||"unknown")},r.createElement("div",{className:"flex items-center"},i&&e.icon&&r.createElement("span",{className:"mr-2",dangerouslySetInnerHTML:{__html:e.icon}}),r.createElement("div",{className:"font-medium truncate"},e.name||"Unnamed")),g&&e.description&&r.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate"},e.description),l&&e.tasks&&e.tasks.length>0&&r.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},e.tasks.length," ",1===e.tasks.length?"task":"tasks"))})))},k=function(e){var t=e.taskGroup,a=e.startDate,n=e.endDate,o=e.totalMonths,s=e.monthWidth,i=e.editMode,c=void 0===i||i,l=e.showProgress,g=void 0!==l&&l,f=e.className,h=void 0===f?"":f,p=e.tooltipClassName,v=void 0===p?"":p,w=e.onTaskUpdate,M=e.onTaskClick,x=e.onTaskSelect,D=e.onAutoScrollChange,k=e.viewMode,b=void 0===k?exports.ViewMode.MONTH:k,y=e.scrollContainerRef,T=e.smoothDragging,E=void 0===T||T,V=e.movementThreshold,N=void 0===V?3:V,A=e.animationSpeed,H=void 0===A?.25:A,R=e.renderTask,S=e.renderTooltip,Y=e.getTaskColor;if(!t||!t.id||!Array.isArray(t.tasks))return r.createElement("div",{className:"relative h-16 text-gantt-text"},"Invalid task group data");var C=a instanceof Date?a:new Date,_=n instanceof Date?n:new Date,U=r.useId?r.useId():"task-row-".concat(Math.random().toString(36).substring(2,11)),F=r.useRef(null),O=function(e){var t=e.taskGroup,a=e.startDate,n=e.endDate,o=e.editMode,s=e.viewMode,i=e.monthWidth,c=e.totalMonths,l=e.onTaskUpdate,d=e.onTaskClick,g=e.onTaskSelect,f=e.rowRef,h=e.instanceId,m=e.smoothDragging,p=e.movementThreshold,v=e.animationSpeed,w=r.useState(null),M=w[0],x=w[1],D=r.useState(null),k=D[0],b=D[1],y=r.useState(null),T=y[0],E=y[1],V=r.useState(0),N=V[0],A=V[1],H=r.useState({x:0,y:0}),R=H[0],S=H[1],Y=r.useState(null),C=Y[0],_=Y[1],U=r.useState(null),F=U[0],O=U[1],I=r.useRef(null),W=r.useRef({x:0,y:0}),L=r.useRef(null),P=r.useRef(null),z=r.useRef({left:0,width:0}),q=r.useRef(0),Q=r.useRef(null),K=r.useRef(null),B=r.useRef(null),G=m&&s!==exports.ViewMode.DAY,j=r.useCallback((function(e){var t=exports.__assign(exports.__assign({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)});b(t),Q.current=t}),[]),X=r.useCallback((function(e){var t=exports.__assign(exports.__assign({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)});_(t),K.current=t}),[]),J=r.useCallback((function(){if(B.current&&L.current&&P.current){var e=Date.now(),t=e-q.current;q.current=e;var r=v||.25,a=P.current.left+(L.current.left-P.current.left)*r,n=P.current.width+(L.current.width-P.current.width)*r;z.current.left=(a-P.current.left)/(t||16),z.current.width=(n-P.current.width)/(t||16),P.current={left:a,width:n},B.current.style.left="".concat(a,"px"),B.current.style.width="".concat(n,"px"),Q.current&&Z(a,n),I.current=requestAnimationFrame(J)}else I.current=null}),[v]),Z=r.useCallback((function(e,t){if(Q.current)try{if(s===exports.ViewMode.DAY){var r=Math.round(e/i),o=Math.max(1,Math.round(t/i)),l=new Date(a);l.setHours(0,0,0,0),(v=new Date(l)).setDate(l.getDate()+r),v.setHours(0,0,0,0),(w=new Date(v)).setDate(v.getDate()+o-1),w.setHours(23,59,59,999);var d=a.getTime(),g=n.getTime(),f=new Date(Math.max(d,v.getTime())),h=new Date(Math.min(g,w.getTime())),m=exports.__assign(exports.__assign({},Q.current),{startDate:f,endDate:h});X(m)}else{var p=u.calculateDatesFromPosition(e,t,a,n,c,i,s),v=p.newStartDate,w=p.newEndDate;m=exports.__assign(exports.__assign({},Q.current),{startDate:v,endDate:w}),X(m)}}catch(e){console.error("Error updating dates:",e)}}),[Q,i,a,n,c,s,X]),$=r.useCallback((function(){if(B.current&&L.current&&Q.current){var e=L.current.left,r=L.current.width;s===exports.ViewMode.DAY?(e=Math.round(e/i)*i,r=Math.round(r/i)*i,r=Math.max(i,r),B.current.style.transition="transform 0.15s ease-out, left 0.15s ease-out, width 0.15s ease-out",B.current.style.left="".concat(e,"px"),B.current.style.width="".concat(r,"px"),Z(e,r)):G||(B.current.style.transition="transform 0.15s ease-out, left 0.15s ease-out, width 0.15s ease-out",B.current.style.left="".concat(e,"px"),B.current.style.width="".concat(r,"px"));var o=K.current;if(o){var c=a.getTime(),d=n.getTime();if(o.startDate.getTime()<c&&(o=exports.__assign(exports.__assign({},o),{startDate:new Date(c)})),o.endDate.getTime()>d&&(o=exports.__assign(exports.__assign({},o),{endDate:new Date(d)})),l&&o)try{l(t.id,o)}catch(e){console.error("Error in onTaskUpdate:",e)}}}}),[B,L,Q,K,s,i,G,a,n,l,t.id,Z]),ee=r.useCallback((function(e,r){d&&!k&&d(r,t),g&&g(r,!0)}),[d,g,k,t]),te=r.useCallback((function(e,t){k||(x(t),ae(e))}),[k]),re=r.useCallback((function(){k||x(null)}),[k]),ae=r.useCallback((function(e){if(f.current){var t=f.current.getBoundingClientRect();S({x:e.clientX-t.left+20,y:e.clientY-t.top})}}),[f]),ne=r.useCallback((function(e,t,r){if(o){e.preventDefault(),e.stopPropagation();var a=document.querySelector('[data-task-id="'.concat(t.id,'"][data-instance-id="').concat(h,'"]'));if(a){B.current=a;var n=parseFloat(a.style.left||"0"),s=parseFloat(a.style.width||"0");O({left:n,width:s,startDate:new Date(t.startDate),endDate:new Date(t.endDate)}),L.current={left:n,width:s},P.current={left:n,width:s},W.current={x:e.clientX,y:e.clientY},q.current=Date.now(),z.current={left:0,width:0},a.setAttribute("data-dragging","true"),a.style.transition="none",b(t),E(r),A(e.clientX),_(t),j(t),X(t),null===I.current&&G&&(I.current=requestAnimationFrame(J)),document.addEventListener("mouseup",se),document.addEventListener("mousemove",oe)}}}),[o,h,G,J,j,X]),oe=r.useCallback((function(e){if(W.current={x:e.clientX,y:e.clientY},e instanceof MouseEvent&&M&&f.current){var t=f.current.getBoundingClientRect();S({x:e.clientX-t.left+20,y:e.clientY-t.top})}else e instanceof MouseEvent||ae(e);if(k&&T&&F&&f.current&&L.current)try{var r=e.clientX-N;if(Math.abs(r)<p&&"move"===T)return;var a=c*i,n=L.current.left,o=L.current.width;switch(T){case"move":n=Math.max(0,Math.min(a-F.width,F.left+r)),s===exports.ViewMode.DAY&&(n=Math.round(n/i)*i);break;case"resize-left":var l=F.width-20,d=Math.min(l,r);n=Math.max(0,F.left+d),s===exports.ViewMode.DAY&&(n=Math.round(n/i)*i);var u=F.left+F.width;o=Math.max(20,u-n),s===exports.ViewMode.DAY&&(o=Math.round(o/i)*i,o=Math.max(i,o));break;case"resize-right":o=Math.max(20,Math.min(a-F.left,F.width+r)),s===exports.ViewMode.DAY&&(o=Math.round(o/i)*i,o=Math.max(i,o))}L.current={left:n,width:o},s===exports.ViewMode.DAY&&B.current?(B.current.style.left="".concat(n,"px"),B.current.style.width="".concat(o,"px"),Z(n,o)):G?null===I.current&&(q.current=Date.now(),I.current=requestAnimationFrame(J)):B.current&&(B.current.style.left="".concat(n,"px"),B.current.style.width="".concat(o,"px"),Z(n,o))}catch(e){console.error("Error in handleMouseMove:",e)}}),[k,T,F,s,ae,N,c,i,G,Z,f,M,J,p]),se=r.useCallback((function(){try{null!==I.current&&(cancelAnimationFrame(I.current),I.current=null),$(),B.current&&(B.current.setAttribute("data-dragging","false"),setTimeout((function(){B.current&&(B.current.style.transition="")}),200))}catch(e){console.error("Error in handleMouseUp:",e)}finally{b(null),E(null),_(null),O(null),Q.current=null,K.current=null,B.current=null,L.current=null,P.current=null,document.removeEventListener("mouseup",se),document.removeEventListener("mousemove",oe)}}),[$,oe]),ie=r.useCallback((function(e,r){if(l&&t.id)try{var a=exports.__assign(exports.__assign({},e),{percent:r});l(t.id,a)}catch(e){console.error("Error updating task progress:",e)}}),[l,t.id]);return r.useEffect((function(){return function(){null!==I.current&&(cancelAnimationFrame(I.current),I.current=null),document.removeEventListener("mouseup",se),document.removeEventListener("mousemove",oe)}}),[se,oe]),{hoveredTask:M,draggingTask:k,dragType:T,previewTask:C,tooltipPosition:R,initialTaskState:F,handleMouseDown:ne,handleMouseMove:oe,handleMouseUp:se,handleTaskClick:ee,handleTaskMouseEnter:te,handleTaskMouseLeave:re,handleProgressUpdate:ie}}({taskGroup:t,startDate:C,endDate:_,editMode:c,viewMode:b,monthWidth:s,totalMonths:o,onTaskUpdate:w,onTaskClick:M,onTaskSelect:x,rowRef:F,instanceId:U,smoothDragging:E,movementThreshold:N,animationSpeed:H}),I=O.hoveredTask,W=O.draggingTask,L=O.dragType,P=O.previewTask,z=O.tooltipPosition,q=O.handleMouseDown,Q=O.handleMouseMove,K=O.handleMouseUp,B=O.handleTaskClick,G=O.handleTaskMouseEnter,j=O.handleTaskMouseLeave,X=O.handleProgressUpdate,J=function(e){var t=e.scrollContainerRef,a=e.draggingTask,n=e.onAutoScrollChange,o=e.totalMonths,s=e.monthWidth,i=r.useRef(!1),c=r.useRef(null),l=r.useRef(0),d=r.useRef(null),u=r.useRef({minLeft:0,maxLeft:o*s}),g=r.useCallback((function(e){if((null==t?void 0:t.current)&&a){var r=t.current.getBoundingClientRect(),o=null,s=0;e<r.left+40?(o="left",s=Math.max(1,Math.round((40-(e-r.left))/10))):e>r.right-40&&(o="right",s=Math.max(1,Math.round((e-(r.right-40))/10))),d.current=o,l.current=s,o&&!i.current?(f(),n&&n(!0)):!o&&i.current&&(h(),n&&n(!1))}}),[t,a,n]),f=r.useCallback((function(){if(!i.current){i.current=!0;var e=function(){if(i.current&&(null==t?void 0:t.current)){var r=t.current,a=d.current,n=l.current,o=r.scrollLeft,s=r.scrollWidth-r.clientWidth;if("left"===a){if(o<=0)return void h();var u=Math.max(0,o-n);r.scrollLeft=u}else if("right"===a){if(o>=s)return void h();u=Math.min(s,o+n),r.scrollLeft=u}i.current&&(c.current=requestAnimationFrame(e))}};c.current=requestAnimationFrame(e)}}),[t]),h=r.useCallback((function(){i.current=!1,null!==c.current&&(cancelAnimationFrame(c.current),c.current=null),n&&n(!1)}),[n]);return r.useEffect((function(){u.current={minLeft:0,maxLeft:o*s}}),[o,s]),r.useEffect((function(){return function(){h()}}),[h]),{checkForAutoScroll:g,startAutoScroll:f,stopAutoScroll:h,isAutoScrolling:i.current}}({scrollContainerRef:y,draggingTask:W,onAutoScrollChange:D,totalMonths:o,monthWidth:s}).checkForAutoScroll,Z=function(e){var t=e.tasks,a=e.previewTask,n=e.viewMode,o=r.useMemo((function(){return a?d.getPreviewArrangement(a,t,n):d.detectOverlaps(t,n)}),[t,a,n]),s=r.useMemo((function(){return Math.max(60,40*o.length+20)}),[o.length]);return{taskRows:o,rowHeight:s}}({tasks:t.tasks,previewTask:P,viewMode:b}),$=Z.taskRows,ee=Z.rowHeight;return r.useEffect((function(){return function(){document.removeEventListener("mouseup",K),document.removeEventListener("mousemove",Q)}}),[K,Q]),t.tasks&&0!==t.tasks.length?r.createElement("div",{className:"relative border-b border-gray-200 dark:border-gray-700 text-gantt-task-text ".concat(h),style:{height:"".concat(ee,"px")},onMouseMove:function(e){Q(e),W&&(null==y?void 0:y.current)&&J(e.clientX)},onMouseLeave:function(){return j()},ref:F,"data-testid":"task-row-".concat(t.id),"data-instance-id":U},$.map((function(e,t){return r.createElement(r.Fragment,{key:"task-row-".concat(t)},e.map((function(e){if(!(e&&e.id&&e.startDate instanceof Date&&e.endDate instanceof Date))return null;try{var a=require("@/services").TaskService.calculateTaskPixelPosition(e,C,_,o,s,b),n=a.leftPx,i=a.widthPx,l=(null==I?void 0:I.id)===e.id,d=(null==W?void 0:W.id)===e.id,u=40*t+10,f=require("@/components/task/TaskItem").default;return r.createElement(f,{key:"task-".concat(e.id),task:e,leftPx:n,widthPx:i,topPx:u,isHovered:l,isDragging:d,editMode:c,showProgress:g,instanceId:U,onMouseDown:q,onMouseEnter:G,onMouseLeave:j,onClick:B,renderTask:R,getTaskColor:Y,onProgressUpdate:X})}catch(e){return console.error("Error rendering task:",e),null}})))})),(I||W)&&r.createElement(m,{task:P||W||I,position:z,dragType:L,taskId:null==W?void 0:W.id,startDate:C,endDate:_,totalMonths:o,monthWidth:s,showProgress:g,instanceId:U,className:v,viewMode:b,renderTooltip:S})):r.createElement("div",{className:"relative h-16 text-gantt-text"},"No tasks available")},b=function(e){var t=e.tasks,a=e.startDate,n=e.endDate,o=e.timeUnits,s=e.totalUnits,i=e.currentUnitIndex,c=e.viewMode,l=e.editMode,u=e.headerLabel,g=e.showProgress,f=e.showCurrentDateMarker,h=e.todayLabel,m=e.currentDate,p=e.locale,v=e.unitWidth,x=e.smoothDragging,b=e.movementThreshold,y=e.animationSpeed,T=e.rowHeight,E=e.renderTaskList,V=e.renderTask,N=e.renderTooltip,A=e.renderTimelineHeader,H=e.getTaskColor,R=e.onTaskUpdate,S=e.onTaskClick,Y=e.onTaskSelect;e.onTaskDoubleClick;var C=e.onGroupClick,_=e.scrollContainerRef,U=e.styles,F=r.useState(!1),O=F[0],I=F[1],W=function(e){I(e),_.current&&(e?_.current.classList.add("rmg-auto-scrolling"):_.current.classList.remove("rmg-auto-scrolling"))};return r.createElement("div",{className:"relative flex"},E?E({tasks:t,headerLabel:u,onGroupClick:C,viewMode:c}):r.createElement(D,{tasks:t,headerLabel:u,onGroupClick:C,className:U.taskList||"",viewMode:c}),r.createElement("div",{ref:_,className:"flex-grow overflow-x-auto rmg-gantt-scroll-container ".concat(O?"rmg-auto-scrolling":"")},r.createElement("div",{className:"min-w-max"},A?A({timeUnits:o,currentUnitIndex:i,viewMode:c,locale:p,unitWidth:v}):r.createElement(w,{months:o,currentMonthIndex:i,locale:p,className:U.timeline||"",viewMode:c,unitWidth:v}),r.createElement("div",{className:"relative"},f&&i>=0&&r.createElement(M,{currentMonthIndex:i,height:t.reduce((function(e,t){if(!t||!Array.isArray(t.tasks))return e+60;var r=d.detectOverlaps(t.tasks,c);return e+Math.max(60,r.length*T+20)}),0),label:h,dayOfMonth:m.getDate(),className:U.todayMarker||"",viewMode:c,unitWidth:v}),t.map((function(e){return e&&e.id?r.createElement(k,{key:"task-row-".concat(e.id),taskGroup:e,startDate:a,endDate:n,totalMonths:s,monthWidth:v,editMode:l,showProgress:g,onTaskUpdate:R,onTaskClick:S,onTaskSelect:Y,onAutoScrollChange:W,className:U.taskRow||"",tooltipClassName:U.tooltip||"",viewMode:c,scrollContainerRef:_,smoothDragging:x,movementThreshold:b,animationSpeed:y,renderTask:V,renderTooltip:N,getTaskColor:H}):null}))))))},y=r.createContext({theme:n,isDarkMode:!1}),T=function(){return r.useContext(y)};function E(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,r=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.startDate instanceof Date&&(r?e.startDate<t&&(t=new Date(e.startDate)):(t=new Date(e.startDate),r=!0))}))})),!r){var a=new Date;return new Date(a.getFullYear(),a.getMonth()-1,1)}return new Date(t.getFullYear(),t.getMonth(),1)}function V(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,r=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.endDate instanceof Date&&(r?e.endDate>t&&(t=new Date(e.endDate)):(t=new Date(e.endDate),r=!0))}))})),!r){var a=new Date;return new Date(a.getFullYear(),a.getMonth()+2,0)}return new Date(t.getFullYear(),t.getMonth()+1,0)}var N=function(e){var t=e.customStartDate,n=e.customEndDate,o=e.tasks,s=e.activeViewMode,i=e.currentDate,c=e.minuteStep,l=void 0===c?5:c,d=r.useMemo((function(){return t||E(o)}),[t,o]),u=r.useMemo((function(){return n||V(o)}),[n,o]),g=r.useMemo((function(){return function(e,t,r,n){switch(r){case exports.ViewMode.MINUTE:return function(e,t,r){void 0===r&&(r=5);var n=[],o=new Date(e);o.setSeconds(0,0);var s=o.getMinutes(),i=Math.floor(s/r)*r;o.setMinutes(i);var c=new Date(t);c.setMinutes(c.getMinutes(),59,999);for(;o<=c;)n.push(new Date(o)),o=a.addMinutes(o,r);return n}(e,t,n);case exports.ViewMode.HOUR:return function(e,t){var r=[],n=new Date(e);n.setMinutes(0,0,0);var o=new Date(t);o.setHours(o.getHours(),59,59,999);for(;n<=o;)r.push(new Date(n)),n=a.addHours(n,1);return r}(e,t);case exports.ViewMode.DAY:return function(e,t){var r=[],n=new Date(e);n.setHours(0,0,0,0);var o=new Date(t);o.setHours(23,59,59,999);for(;n<=o;)r.push(new Date(n)),n=a.addDays(n,1);return r}(e,t);case exports.ViewMode.WEEK:return function(e,t){var r=[],n=new Date(e);for(;n<=t;)r.push(new Date(n)),n=a.addDays(n,7);return r}(e,t);case exports.ViewMode.MONTH:return f(e,t);case exports.ViewMode.QUARTER:return function(e,t){var r=[],n=a.startOfQuarter(new Date(e));for(;n<=t;)r.push(new Date(n)),n=a.addQuarters(n,1);return r}(e,t);case exports.ViewMode.YEAR:return function(e,t){var r=[],n=a.startOfYear(new Date(e));for(;n<=t;)r.push(new Date(n)),n=a.addYears(n,1);return r}(e,t);default:return f(e,t)}}(d,u,s,l)}),[d,u,s,l]),h=g.length,m=r.useMemo((function(){return function(e,t,r,a){var n=new Date(t);switch(r){case exports.ViewMode.MINUTE:return e.findIndex((function(e){return e.getHours()===n.getHours()&&Math.floor(e.getMinutes()/a)===Math.floor(n.getMinutes()/a)&&e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}));case exports.ViewMode.HOUR:return e.findIndex((function(e){return e.getHours()===n.getHours()&&e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}));case exports.ViewMode.DAY:return e.findIndex((function(e){return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}));case exports.ViewMode.WEEK:return e.findIndex((function(e){var t=new Date(e);return t.setDate(e.getDate()+6),n>=e&&n<=t}));case exports.ViewMode.MONTH:return e.findIndex((function(e){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}));case exports.ViewMode.QUARTER:var o=Math.floor(n.getMonth()/3);return e.findIndex((function(e){return Math.floor(e.getMonth()/3)===o&&e.getFullYear()===n.getFullYear()}));case exports.ViewMode.YEAR:return e.findIndex((function(e){return e.getFullYear()===n.getFullYear()}));default:return-1}}(g,i,s,l)}),[g,i,s,l]);return{derivedStartDate:d,derivedEndDate:u,timeUnits:g,totalUnits:h,currentUnitIndex:m}};exports.CollisionService=d,exports.GanttChart=function(e){var t=e.tasks,a=void 0===t?[]:t,n=e.startDate,o=e.endDate,s=e.title,i=void 0===s?"Project Timeline":s,c=e.currentDate,l=void 0===c?new Date:c,d=e.showCurrentDateMarker,u=void 0===d||d,g=e.todayLabel,f=void 0===g?"Today":g,h=e.editMode,m=void 0===h||h,p=e.headerLabel,w=void 0===p?"Resources":p,M=e.showProgress,x=void 0!==M&&M,D=e.darkMode,k=void 0!==D&&D,y=e.locale,E=void 0===y?"default":y,V=e.viewMode,A=e.viewModes,H=e.smoothDragging,R=void 0===H||H,S=e.movementThreshold,Y=void 0===S?3:S,C=e.animationSpeed,_=void 0===C?.25:C,U=e.renderTaskList,F=e.renderTask,O=e.renderTooltip,I=e.renderViewModeSelector,W=e.renderHeader,L=e.renderTimelineHeader,P=e.getTaskColor,z=e.onTaskUpdate,q=e.onTaskClick,Q=e.onTaskSelect,K=e.onTaskDoubleClick,B=e.onGroupClick,G=e.onViewModeChange,j=e.fontSize,X=e.rowHeight,J=void 0===X?40:X,Z=e.styles,$=void 0===Z?{}:Z,ee=r.useRef(null),te=r.useRef(null),re=T(),ae=re.theme,ne=re.isDarkMode,oe=function(e){var t=e.initialViewMode,a=void 0===t?exports.ViewMode.MONTH:t,n=e.viewModes,o=e.onViewModeChange,s=r.useState(a),i=s[0],c=s[1],l=r.useMemo((function(){return!1!==n&&(Array.isArray(n)?n:[exports.ViewMode.DAY,exports.ViewMode.WEEK,exports.ViewMode.MONTH,exports.ViewMode.QUARTER,exports.ViewMode.YEAR])}),[n]),d=!1!==l;return{activeViewMode:i,handleViewModeChange:r.useCallback((function(e){c(e),o&&o(e)}),[o]),shouldShowViewModeSelector:d,availableViewModes:l}}({initialViewMode:V,viewModes:A,onViewModeChange:G}),se=oe.activeViewMode,ie=oe.handleViewModeChange,ce=oe.shouldShowViewModeSelector,le=oe.availableViewModes,de=N({customStartDate:n,customEndDate:o,tasks:a,activeViewMode:se,currentDate:l}),ue=de.derivedStartDate,ge=de.derivedEndDate,fe=de.timeUnits,he=de.totalUnits,me=de.currentUnitIndex,pe=ae.sizes.unitWidth[se]||150;return r.createElement("div",{ref:ee,className:"rmg-gantt-chart w-full border border-gantt-border bg-gantt-bg text-gantt-text rounded-xl shadow-lg overflow-hidden ".concat(ne?"dark":""," ").concat($.container||""),style:{fontSize:j||ae.sizes.fontSize,"--gantt-unit-width":"".concat(pe,"px")},"data-testid":"gantt-chart"},r.createElement(v,{title:i,darkMode:k,activeViewMode:se,onViewModeChange:ie,showViewModeSelector:ce,availableViewModes:le,renderHeader:W,renderViewModeSelector:I,styles:$}),r.createElement(b,{tasks:a,startDate:ue,endDate:ge,timeUnits:fe,totalUnits:he,currentUnitIndex:me,viewMode:se,editMode:m,headerLabel:w,showProgress:x,showCurrentDateMarker:u,todayLabel:f,currentDate:l,locale:E,unitWidth:pe,smoothDragging:R,movementThreshold:Y,animationSpeed:_,rowHeight:J,renderTaskList:U,renderTask:F,renderTooltip:O,renderTimelineHeader:L,getTaskColor:P,onTaskUpdate:z,onTaskClick:q,onTaskSelect:Q,onTaskDoubleClick:K,onGroupClick:B,scrollContainerRef:te,styles:$}))},exports.GanttThemeProvider=function(e){var t=e.children,a=e.theme,n=void 0===a?{}:a,o=e.darkMode,s=void 0!==o&&o,i=l(n,s);return r.createElement(y.Provider,{value:{theme:i,isDarkMode:s}},t)},exports.ProgressBar=x,exports.TaskList=D,exports.TaskRow=k,exports.TaskService=u,exports.Timeline=w,exports.TodayMarker=M,exports.Tooltip=m,exports.ViewModeSelector=p,exports.applyStyles=function(e,t){return t},exports.calculateDuration=function(e,t){var r;if(!(e instanceof Date&&t instanceof Date))return 0;e>t&&(e=(r=[t,e])[0],t=r[1]);var a=Math.abs(t.getTime()-e.getTime());return Math.ceil(a/864e5)},exports.calculateTaskPosition=function(e,t,r){if(!(e.startDate instanceof Date&&e.endDate instanceof Date))return{left:"0%",width:"10%"};var a=f(new Date(t.getFullYear(),t.getMonth(),1),new Date(r.getFullYear(),r.getMonth()+1,0)),n=a.length,o=e.startDate.getFullYear(),s=e.startDate.getMonth(),i=a.findIndex((function(e){return e.getFullYear()===o&&e.getMonth()===s})),c=i<0?0:i,l=e.endDate.getFullYear(),d=e.endDate.getMonth(),u=a.findIndex((function(e){return e.getFullYear()===l&&e.getMonth()===d})),g=((u<0?a.length-1:u)-c+1)/n*100;return{left:"".concat(c/n*100,"%"),width:"".concat(g,"%")}},exports.convertStylesToTailwind=function(e){return{container:"bg-[".concat(e.colors.background,"] text-[").concat(e.colors.text,"] border-[").concat(e.colors.border,"] rounded-[").concat(e.sizes.borderRadius,"]"),taskItem:"bg-[".concat(e.colors.task.background,"] text-[").concat(e.colors.task.text,"] rounded-[").concat(e.sizes.borderRadius,"]"),timeline:"bg-[".concat(e.colors.timeline.background,"]"),todayMarker:"bg-[".concat(e.colors.timeline.marker,"]")}},exports.darkCssVariables=c,exports.darkTheme=o,exports.defaultCssVariables=i,exports.detectTaskOverlaps=function(e){if(!Array.isArray(e))return[];var t=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===t.length)return[];var r=[];return t.forEach((function(e){for(var t=!1,a=0;a<r.length;a++){if(!r[a].some((function(t){return!(e.startDate>=t.endDate||e.endDate<=t.startDate)}))){r[a].push(e),t=!0;break}}t||r.push([e])})),r},exports.findEarliestDate=E,exports.findLatestDate=V,exports.formatDate=g,exports.formatDateRange=function(e,t,r){if(void 0===r&&(r="default"),!(e instanceof Date&&t instanceof Date))return"Invalid date range";var a=g(e,exports.DateDisplayFormat.SHORT_DATE,r),n=g(t,exports.DateDisplayFormat.SHORT_DATE,r);return"".concat(a," - ").concat(n)},exports.formatMonth=function(e,t){return void 0===t&&(t="default"),e.toLocaleString(t,{month:"short"})},exports.getDaysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},exports.getDuration=h,exports.getMonthsBetween=f,exports.lightTheme=n,exports.mergeThemes=l,exports.themeToCssVariables=s,exports.useGanttTheme=T;
//# sourceMappingURL=GanttChart-D7cZ-kr2.js.map
