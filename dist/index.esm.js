import e,{useState as t,useRef as a,useEffect as n,cloneElement as r,Children as o,isValidElement as i}from"react";var s,c,l=function(){return l=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)};function d(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function u(e,t){return void 0===t&&(t="default"),e.toLocaleString(t,{month:"short"})}function m(e,t,a){if(void 0===t&&(t=s.FULL_DATE),void 0===a&&(a="default"),!(e instanceof Date)||isNaN(e.getTime()))return"Invalid date";switch(t){case s.MONTH_YEAR:return e.toLocaleString(a,{month:"short",year:"2-digit"});case s.SHORT_DATE:return e.toLocaleString(a,{month:"short",day:"numeric"});case s.FULL_DATE:default:return e.toLocaleString(a,{month:"short",day:"numeric",year:"numeric"})}}function f(e,t){var a=[];if(!(e instanceof Date&&t instanceof Date))return console.warn("getMonthsBetween: Invalid date parameters"),[new Date];for(var n=e.getFullYear(),r=e.getMonth(),o=t.getFullYear(),i=t.getMonth(),s=n;s<=o;s++)for(var c=s===o?i:11,l=s===n?r:0;l<=c;l++)a.push(new Date(s,l,1));return a}function g(e,t){return new Date(e,t+1,0).getDate()}function h(){return[1,8,15,22,29]}function v(e,t,a){if(!(e.startDate instanceof Date&&e.endDate instanceof Date))return console.warn("calculateTaskPosition: Invalid task dates",e),{left:"0%",width:"10%"};var n=f(new Date(t.getFullYear(),t.getMonth(),1),new Date(a.getFullYear(),a.getMonth()+1,0)),r=n.length,o=e.startDate.getFullYear(),i=e.startDate.getMonth(),s=n.findIndex((function(e){return e.getFullYear()===o&&e.getMonth()===i})),c=s<0?0:s,l=e.endDate.getFullYear(),d=e.endDate.getMonth(),u=n.findIndex((function(e){return e.getFullYear()===l&&e.getMonth()===d})),m=((u<0?n.length-1:u)-c+1)/r*100;return{left:"".concat(c/r*100,"%"),width:"".concat(m,"%")}}function D(e){if(!Array.isArray(e))return console.warn("detectTaskOverlaps: Invalid tasks array"),[];var t=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===t.length)return[];var a=[];return t.forEach((function(e){for(var t=!1,n=0;n<a.length;n++){if(!a[n].some((function(t){return!(e.startDate>=t.endDate||e.endDate<=t.startDate)}))){a[n].push(e),t=!0;break}}t||a.push([e])})),a}function k(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,a=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.startDate instanceof Date&&(a?e.startDate<t&&(t=new Date(e.startDate)):(t=new Date(e.startDate),a=!0))}))})),!a){var n=new Date;return new Date(n.getFullYear(),n.getMonth()-1,1)}return new Date(t.getFullYear(),t.getMonth(),1)}function p(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,a=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.endDate instanceof Date&&(a?e.endDate>t&&(t=new Date(e.endDate)):(t=new Date(e.endDate),a=!0))}))})),!a){var n=new Date;return new Date(n.getFullYear(),n.getMonth()+2,0)}return new Date(t.getFullYear(),t.getMonth()+1,0)}function w(e,t,a){if(void 0===a&&(a="default"),!(e instanceof Date&&t instanceof Date))return"Invalid date range";var n=m(e,s.SHORT_DATE,a),r=m(t,s.SHORT_DATE,a);return"".concat(n," - ").concat(r)}function b(e,t){var a;if(!(e instanceof Date&&t instanceof Date))return 0;e>t&&(e=(a=[t,e])[0],t=a[1]);var n=Math.abs(t.getTime()-e.getTime());return Math.ceil(n/864e5)}"function"==typeof SuppressedError&&SuppressedError,function(e){e.MONTH_YEAR="month-year",e.FULL_DATE="full-date",e.SHORT_DATE="short-date"}(s||(s={})),function(e){e.DAY="day",e.WEEK="week",e.MONTH="month",e.QUARTER="quarter",e.YEAR="year"}(c||(c={}));var x=function(){function e(){}return e.detectOverlaps=function(e){if(!Array.isArray(e)||0===e.length)return[];var t=[];return e.forEach((function(e){for(var a=!1,n=0;n<t.length;n++){if(!t[n].some((function(t){return!(e.startDate>=t.endDate||e.endDate<=t.startDate)}))){t[n].push(e),a=!0;break}}a||t.push([e])})),t},e.wouldCollide=function(e,t,a){return t.some((function(t){return t.id!==e.id&&t.id!==a&&!(e.startDate>=t.endDate||e.endDate<=t.startDate)}))},e.getPreviewArrangement=function(e,t){var a=t.map((function(t){return t.id===e.id?e:t}));return this.detectOverlaps(a)},e}(),y=function(){function e(){}return e.calculateDatesFromPosition=function(e,t,a,n,r,o){try{var i=isNaN(e)?0:e,s=isNaN(t)||t<20?20:t,c=a.getTime(),l=(n.getTime()-c)/(r*o),d=i*l,u=s*l,m=new Date(c+d),f=new Date(c+d+u);if(m<a){var g=f.getTime()-m.getTime();return{newStartDate:new Date(a),newEndDate:new Date(a.getTime()+g)}}if(f>n){g=f.getTime()-m.getTime();return{newStartDate:new Date(n.getTime()-g),newEndDate:new Date(n)}}return{newStartDate:m,newEndDate:f}}catch(e){return console.error("Error calculating dates from position:",e),{newStartDate:new Date(a),newEndDate:new Date(n)}}},e.createUpdatedTask=function(e,t,a){return l(l({},e),{startDate:new Date(t),endDate:new Date(a)})},e.calculateTaskPixelPosition=function(e,t,a,n,r){try{if(!(e.startDate instanceof Date&&e.endDate instanceof Date))throw new Error("Invalid dates in task");var o=Math.max(e.startDate.getTime(),t.getTime()),i=Math.min(e.endDate.getTime(),a.getTime()),s=t.getTime(),c=a.getTime()-s,l=(i-o)/c*100;return{leftPx:(o-s)/c*100/100*n*r,widthPx:Math.max(20,l/100*n*r)}}catch(t){return console.error("Error calculating task position:",t,e),{leftPx:0,widthPx:20}}},e.getLiveDatesFromElement=function(e,t,a,n,r){try{if(!e)return{startDate:new Date(t),endDate:new Date(a)};var o=parseFloat(e.style.left||"0"),i=parseFloat(e.style.width||"0"),s=this.calculateDatesFromPosition(o,i,t,a,n,r);return{startDate:s.newStartDate,endDate:s.newEndDate}}catch(e){return console.error("Error getting live dates:",e),{startDate:new Date(t),endDate:new Date(a)}}},e.formatDate=function(e,t){return void 0===t&&(t="default"),e instanceof Date&&!isNaN(e.getTime())?e.toLocaleDateString(t,{year:"numeric",month:"short",day:"numeric"}):"Invalid date"},e.getDuration=function(e,t){try{if(!(e instanceof Date)||!(t instanceof Date)||isNaN(e.getTime())||isNaN(t.getTime()))return 0;var a=e<t?e:t,n=e<t?t:e,r=Math.abs(n.getTime()-a.getTime());return Math.ceil(r/864e5)}catch(e){return console.error("Error calculating duration:",e),0}},e.getMonthName=function(e,t){return void 0===t&&(t="default"),e instanceof Date&&!isNaN(e.getTime())?e.toLocaleString(t,{month:"short"}):""},e.getDaysInMonth=function(e){return e instanceof Date&&!isNaN(e.getTime())?new Date(e.getFullYear(),e.getMonth()+1,0).getDate():30},e.datesOverlap=function(e,t,a,n){return e<=n&&t>=a},e}(),E=function(t){var a=t.task,n=t.leftPx,r=t.widthPx,o=t.topPx,i=t.isHovered,s=t.isDragging,c=t.editMode,l=t.showProgress,d=void 0!==l&&l,u=t.instanceId,m=t.onMouseDown,f=t.onMouseEnter,g=t.onMouseLeave,h=t.onClick,v=(i||s)&&c;if(!a||!a.id)return console.warn("TaskItem: Invalid task data",a),null;var D=a.color||"bg-gantt-task";return e.createElement("div",{className:"absolute h-8 rounded ".concat(D," flex items-center px-2 text-xs text-gantt-task-text font-medium ").concat(c?"cursor-move":"cursor-pointer"),style:{left:"".concat(Math.max(0,n),"px"),width:"".concat(Math.max(20,r),"px"),top:"".concat(o,"px")},onClick:function(e){return h(e,a)},onMouseDown:function(e){return m(e,a,"move")},onMouseEnter:function(e){return f(e,a)},onMouseLeave:g,"data-testid":"task-".concat(a.id),"data-task-id":a.id,"data-instance-id":u},v&&e.createElement("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-white bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-l",onMouseDown:function(e){e.stopPropagation(),m(e,a,"resize-left")}}),e.createElement("div",{className:"truncate select-none"},a.name||"Unnamed Task"),d&&"number"==typeof a.percent&&e.createElement("div",{className:"absolute bottom-1 left-1 right-1 h-1 bg-black bg-opacity-20 dark:bg-opacity-30 rounded-full overflow-hidden"},e.createElement("div",{className:"h-full bg-white dark:bg-gray-200 rounded-full",style:{width:"".concat(a.percent,"%")}})),v&&e.createElement("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-white bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-r",onMouseDown:function(e){e.stopPropagation(),m(e,a,"resize-right")}}))},N=function(t){var a=t.task,n=t.position,r=t.dragType,o=t.taskId,i=t.startDate,s=t.endDate,c=t.totalMonths,l=t.monthWidth,d=t.showProgress,u=void 0!==d&&d,m=t.instanceId,f=t.className,g=void 0===f?"":f,h=a.startDate,v=a.endDate;try{var D=o||a.id,k=document.querySelector('[data-task-id="'.concat(D,'"][data-instance-id="').concat(m,'"]'));if(k&&(r||k.style.left||k.style.width)){var p=y.getLiveDatesFromElement(k,i,s,c,l);h=p.startDate,v=p.endDate}}catch(e){console.error("Error calculating live dates for tooltip:",e)}var w=y.getDuration(h,v),b=function(e){return y.formatDate(e)},x=function(){if(!r)return null;switch(r){case"move":return"Moving task...";case"resize-left":return"Adjusting start date...";case"resize-right":return"Adjusting end date...";default:return null}}();return e.createElement("div",{className:"rmg-task-tooltip absolute z-20 bg-[var(--rmg-tooltip-bg,#ffffff)] text-[var(--rmg-tooltip-text,#1f2937)] border border-[var(--rmg-tooltip-border,#e5e7eb)] dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 rounded-md shadow-md p-2 text-xs select-none ".concat(g),style:{left:"".concat(n.x,"px"),top:"".concat(n.y-40,"px"),minWidth:"150px"}},e.createElement("div",{className:"font-bold mb-1"},a.name||"Unnamed Task"),x&&e.createElement("div",{className:"text-xs text-blue-500 dark:text-blue-400 mb-1 italic"},x),e.createElement("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1"},e.createElement("div",{className:"font-semibold"},"Start:"),e.createElement("div",null,b(h)),e.createElement("div",{className:"font-semibold"},"End:"),e.createElement("div",null,b(v)),e.createElement("div",{className:"font-semibold"},"Duration:"),e.createElement("div",null,w," day",1!==w?"s":""),u&&"number"==typeof a.percent&&e.createElement(e.Fragment,null,e.createElement("div",{className:"font-semibold"},"Progress:"),e.createElement("div",null,a.percent,"%")),a.dependencies&&a.dependencies.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"font-semibold"},"Dependencies:"),e.createElement("div",null,a.dependencies.join(", ")))))},M=function(r){var o=r.taskGroup,i=r.startDate,s=r.endDate,c=r.totalMonths,l=r.monthWidth,d=r.editMode,u=void 0===d||d,m=r.showProgress,f=void 0!==m&&m,g=r.onTaskUpdate,h=r.onTaskClick,v=r.onTaskSelect;if(!o||!o.id||!Array.isArray(o.tasks))return console.warn("TaskRow: Invalid task group data",o),e.createElement("div",{className:"relative h-16 text-gantt-text"},"Invalid task group data");var D=i instanceof Date?i:new Date,k=s instanceof Date?s:new Date,p=t(null),w=p[0],b=p[1],M=t(null),T=M[0],A=M[1],P=t(null),S=P[0],F=P[1],I=t(0),L=I[0],C=I[1],Y=t({x:0,y:0}),O=Y[0],z=Y[1],R=t(null),U=R[0],H=R[1],W=a(null),_=a(null),G=a(null),j=a("task-row-".concat(Math.random().toString(36).substring(2,11))),B=function(e){H(e),G.current=e},X=U?x.getPreviewArrangement(U,o.tasks):x.detectOverlaps(o.tasks),q=Math.max(60,40*X.length+20),K=function(e,t){h&&!T&&h(t,o),v&&v(t,!0)},Q=function(e,t){T||(b(t),V(e))},J=function(){T||b(null)},V=function(e){if(W.current){var t=W.current.getBoundingClientRect();z({x:e.clientX-t.left+20,y:e.clientY-t.top})}},Z=function(e){if(e instanceof MouseEvent&&"mousemove"===e.type){if(w&&W.current){var t=e,a=W.current.getBoundingClientRect();z({x:t.clientX-a.left+20,y:t.clientY-a.top})}}else V(e);if(T&&S&&W.current)try{var n=e.clientX-L;if(0===n)return;var r=c*l,o=document.querySelector('[data-task-id="'.concat(T.id,'"][data-instance-id="').concat(j.current,'"]'));if(!o)return;var i=parseFloat(o.style.left||"0"),s=parseFloat(o.style.width||"0"),d=i,u=s;if("move"===S)d=Math.max(0,Math.min(r-s,i+n)),o.style.left="".concat(d,"px");else if("resize-left"===S){var m=s-20,f=Math.min(m,n);d=Math.max(0,i+f),u=Math.max(20,s-f),o.style.left="".concat(d,"px"),o.style.width="".concat(u,"px")}else"resize-right"===S&&(u=Math.max(20,Math.min(r-i,s+n)),o.style.width="".concat(u,"px"));var g=y.calculateDatesFromPosition(d,u,D,k,c,l),h=g.newStartDate,v=g.newEndDate,p=y.createUpdatedTask(T,h,v);H(p),B(p),C(e.clientX)}catch(e){console.error("Error in handleMouseMove:",e)}},$=function(e,t,a){u&&(e.preventDefault(),e.stopPropagation(),A(t),F(a),C(e.clientX),H(t),function(e){A(e),_.current=e}(t),B(t),document.addEventListener("mouseup",ee),document.addEventListener("mousemove",Z))},ee=function(){try{var e=_.current,t=G.current;e&&t&&g&&g(o.id,t)}catch(e){console.error("Error in handleMouseUp:",e)}finally{A(null),F(null),H(null),_.current=null,G.current=null,document.removeEventListener("mouseup",ee),document.removeEventListener("mousemove",Z)}};return n((function(){!T&&U&&g&&g(o.id,U)}),[T,U,o.id,g]),n((function(){return function(){document.removeEventListener("mouseup",ee),document.removeEventListener("mousemove",Z)}}),[]),o.tasks&&0!==o.tasks.length?e.createElement("div",{className:"relative border-b border-gantt-border",style:{height:"".concat(q,"px")},onMouseMove:function(e){return Z(e)},onMouseLeave:function(){return b(null)},ref:W,"data-testid":"task-row-".concat(o.id),"data-instance-id":j.current},X.map((function(t,a){return e.createElement(e.Fragment,{key:"task-row-".concat(a)},t.map((function(t){try{if(!(t&&t.id&&t.startDate instanceof Date&&t.endDate instanceof Date))return console.warn("Invalid task data:",t),null;var n=y.calculateTaskPixelPosition(t,D,k,c,l),r=n.leftPx,o=n.widthPx,i=(null==w?void 0:w.id)===t.id,s=(null==T?void 0:T.id)===t.id,d=40*a+10;return e.createElement(E,{key:"task-".concat(t.id),task:t,leftPx:r,widthPx:o,topPx:d,isHovered:i,isDragging:s,editMode:u,showProgress:f,instanceId:j.current,onMouseDown:$,onMouseEnter:Q,onMouseLeave:J,onClick:K})}catch(e){return console.error("Error rendering task:",e,t),null}})))})),(w||T)&&e.createElement(N,{task:U||T||w,position:O,dragType:S,taskId:null==T?void 0:T.id,startDate:D,endDate:k,totalMonths:c,monthWidth:l,showProgress:f,instanceId:j.current})):e.createElement("div",{className:"relative h-16 text-gantt-text"},"No tasks available")},T=function(t){var a=t.months,n=t.currentMonthIndex,r=t.showWeeks,o=void 0!==r&&r,i=t.showDays,s=void 0!==i&&i,c=t.locale,l=void 0===c?"default":c,d=t.className,u=void 0===d?"":d,m=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()};return e.createElement("div",{className:"rmg-timeline ".concat(u)},e.createElement("div",{className:"flex border-b border-gantt-border"},a.map((function(t,a){return e.createElement("div",{key:"month-".concat(a),className:"w-[var(--gantt-month-width)] flex-shrink-0 p-2 font-semibold text-center text-gantt-text ".concat(a===n?"bg-gantt-highlight":""),"data-month":t.toISOString()},(r=t)instanceof Date?r.toLocaleString(l,{month:"short",year:"2-digit"}):"");var r}))),o&&e.createElement("div",{className:"flex border-b border-gantt-border"},a.map((function(t,a){var n=[1,8,15,22,29],r=m(t),o=150/r;return e.createElement("div",{key:"week-".concat(a),className:"relative w-[var(--gantt-month-width)] flex-shrink-0 h-6"},n.filter((function(e){return e<=r})).map((function(t){return e.createElement("div",{key:"week-".concat(a,"-").concat(t),className:"absolute top-0 bottom-0 border-l border-gantt-border",style:{left:"".concat(t*o,"px")}},e.createElement("span",{className:"absolute -top-1 left-1 text-xs text-gantt-text"},function(e){return e.toString()}(t)))})))}))),s&&e.createElement("div",{className:"flex border-b border-gantt-border"},a.map((function(t,a){var n=m(t);return e.createElement("div",{key:"days-".concat(a),className:"flex w-[var(--gantt-month-width)] flex-shrink-0 h-5"},Array.from({length:n}).map((function(t,r){return e.createElement("div",{key:"day-".concat(a,"-").concat(r),className:"border-r border-gantt-border",style:{width:"".concat(100/n,"%")}},r%5==0&&e.createElement("span",{className:"text-xs text-gantt-text opacity-70"},r+1))})))}))))},A=function(t){var a=t.currentMonthIndex,n=t.height,r=t.label,o=void 0===r?"Today":r,i=t.dayOfMonth,s=t.className,c=void 0===s?"":s;if(a<0)return null;var l=new Date,d=new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),u=150*(a+(i?(i-1)/d:.5));return e.createElement("div",{className:"rmg-today-marker absolute top-0 w-px bg-gantt-marker z-10 ".concat(c),style:{left:"".concat(u,"px"),height:"".concat(n,"px")},"data-testid":"today-marker"},e.createElement("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gantt-marker px-1 py-0.5 rounded text-xs text-white dark:text-gray-100 whitespace-nowrap",style:{top:"-10px"}},o))},P=function(t){var a=t.tasks,n=void 0===a?[]:a,r=t.headerLabel,o=void 0===r?"Resources":r,i=t.showIcon,s=void 0!==i&&i,c=t.showTaskCount,l=void 0!==c&&c,d=t.showDescription,u=void 0===d||d,m=t.rowHeight,f=void 0===m?40:m,g=t.className,h=void 0===g?"":g,v=t.onGroupClick,k=Array.isArray(n)?n:[];return e.createElement("div",{className:"rmg-task-list w-40 flex-shrink-0 z-10 bg-gantt-bg shadow-sm ".concat(h)},e.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10.5"},o),k.map((function(t){if(!t)return null;var a=function(e){if(!e.tasks||!Array.isArray(e.tasks))return 60;var t=D(e.tasks);return Math.max(60,t.length*f+20)}(t);return e.createElement("div",{key:"task-group-".concat(t.id||"unknown"),className:"p-2 border-r border-b border-gantt-border font-medium text-gantt-text bg-gantt-bg hover:bg-gantt-highlight transition-colors duration-150",style:{height:"".concat(a,"px")},onClick:function(){return e=t,void(v&&v(e));var e},"data-testid":"task-group-".concat(t.id||"unknown")},e.createElement("div",{className:"flex items-center"},s&&t.icon&&e.createElement("span",{className:"mr-2",dangerouslySetInnerHTML:{__html:t.icon}}),e.createElement("div",{className:"font-medium truncate"},t.name||"Unnamed")),u&&t.description&&e.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate"},t.description),l&&t.tasks&&t.tasks.length>0&&e.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},t.tasks.length," ",1===t.tasks.length?"task":"tasks"))})))},S=function(t){var a=t.children,n=void 0===a?"Project Timeline":a,r=t.className,o=void 0===r?"":r;return e.createElement("h1",{className:"rmg-gantt-title text-2xl font-bold text-gantt-text ".concat(o)},n)},F=function(t){var a=t.children,n=void 0===a?"Resources":a,r=t.className,o=void 0===r?"":r;return e.createElement("div",{className:"rmg-gantt-header font-semibold text-gantt-text ".concat(o)},n)},I=function(t){var a=t.children,n=void 0===a?"Today":a,r=t.className,o=void 0===r?"":r,i=t.markerClassName,s=void 0===i?"bg-gantt-marker":i;return e.createElement("div",{className:"rmg-gantt-marker px-1 py-0.5 rounded text-xs text-white dark:text-gray-100 whitespace-nowrap ".concat(s," ").concat(o)},n)},L=function(t){t.tasks;var a=t.headerLabel,n=void 0===a?"Resources":a;t.showIcon,t.showTaskCount,t.showDescription;var r=t.className,o=void 0===r?"":r,i=t.children;return t.onGroupClick,e.createElement("div",{className:"rmg-gantt-task-list w-40 flex-shrink-0 z-10 bg-gantt-bg shadow-sm ".concat(o)},i||e.createElement(e.Fragment,null,e.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10.5"},n)))},C=function(t){var a=t.months,n=void 0===a?[]:a,r=t.currentMonthIndex,o=void 0===r?-1:r;t.showWeeks,t.showDays;var i=t.locale,s=void 0===i?"default":i,c=t.className,l=void 0===c?"":c,d=t.children;return e.createElement("div",{className:"rmg-gantt-timeline flex border-b border-gantt-border ".concat(l)},d||e.createElement(e.Fragment,null,n.map((function(t,a){var n;return e.createElement("div",{key:a,className:"w-[var(--gantt-month-width)] flex-shrink-0 p-2 font-semibold text-center text-gantt-text ".concat(a===o?"bg-gantt-highlight":"")},(n=t)instanceof Date?n.toLocaleString(s,{month:"short",year:"2-digit"}):"")}))))},Y=function(t){var a=t.task,n=t.group,r=t.leftPx,o=void 0===r?0:r,i=t.widthPx,s=void 0===i?100:i,c=t.topPx,l=void 0===c?0:c,d=t.isSelected,u=void 0!==d&&d,m=t.editMode,f=void 0===m||m,g=t.showProgress,h=void 0!==g&&g,v=t.className,D=void 0===v?"":v,k=t.onSelect,p=t.onClick,w=t.onDoubleClick;if(t.onDragStart,t.onDragEnd,!a||!a.id)return console.warn("GanttTaskItem: Invalid task data",a),null;var b=a.color||"bg-gantt-task";return e.createElement("div",{className:"rmg-gantt-task-item absolute h-8 rounded ".concat(b," flex items-center px-2 text-xs text-gantt-task-text font-medium ").concat(f?"cursor-move":"cursor-pointer"," ").concat(u?"ring-2 ring-white dark:ring-gray-300":""," ").concat(D),style:{left:"".concat(Math.max(0,o),"px"),width:"".concat(Math.max(20,s),"px"),top:"".concat(l,"px")},onClick:function(e){p&&p(a,n),k&&k(a,!u)},onDoubleClick:function(e){w&&w(a)},"data-task-id":a.id},f&&e.createElement("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-white bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-l"}),e.createElement("div",{className:"truncate select-none"},a.name||"Unnamed Task"),h&&"number"==typeof a.percent&&e.createElement("div",{className:"absolute bottom-1 left-1 right-1 h-1 bg-black bg-opacity-20 dark:bg-opacity-30 rounded-full overflow-hidden"},e.createElement("div",{className:"h-full bg-white dark:bg-gray-200 rounded-full",style:{width:"".concat(a.percent,"%")}})),f&&e.createElement("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-white bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-r"}))},O=function(n){var s=n.tasks,c=void 0===s?[]:s,u=n.startDate,m=n.endDate,g=n.title,h=void 0===g?"Project Timeline":g,v=n.currentDate,w=void 0===v?new Date:v,b=n.showCurrentDateMarker,x=void 0===b||b,y=n.todayLabel,E=void 0===y?"Today":y,N=n.editMode,O=void 0===N||N,z=n.headerLabel,R=void 0===z?"Resources":z,U=n.showProgress,H=void 0!==U&&U;n.theme;var W=n.darkMode,_=void 0!==W&&W,G=n.showWeeks,j=void 0!==G&&G,B=n.showDays,X=void 0!==B&&B,q=n.locale,K=void 0===q?"default":q,Q=n.onTaskUpdate,J=n.onTaskClick,V=n.onTaskSelect,Z=n.onTaskDoubleClick,$=n.onGroupClick,ee=n.fontSize,te=n.rowHeight,ae=void 0===te?40:te;n.timeStep;var ne=n.children,re=a(null),oe=a(null),ie=t([]),se=ie[0],ce=ie[1],le=u||k(c),de=m||p(c),ue=f(le,de),me=ue.length,fe=w.getMonth(),ge=w.getFullYear(),he=w.getDate(),ve=ue.findIndex((function(e){return e.getMonth()===fe&&e.getFullYear()===ge})),De={title:S,header:F,marker:I,taskList:L,timeline:C,taskItem:Y},ke=function(e){return o.toArray(ne).filter((function(t){return i(t)&&t.type===De[e]}))},pe=ke("title");ke("header");var we,be=ke("marker"),xe=ke("taskList"),ye=ke("timeline"),Ee=ke("taskItem"),Ne=function(e,t){if(Q)try{var a=l(l({},t),{startDate:t.startDate instanceof Date?t.startDate:new Date(t.startDate),endDate:t.endDate instanceof Date?t.endDate:new Date(t.endDate)});Q(e,a)}catch(e){console.error("Error in handleTaskUpdate:",e)}},Me=function(e,t){if(J)try{J(e,t)}catch(e){console.error("Error in handleTaskClick:",e)}},Te=function(e,t){if(ce((function(a){return t?d(d([],a,!0),[e.id],!1):a.filter((function(t){return t!==e.id}))})),V)try{V(e,t)}catch(e){console.error("Error in onTaskSelect handler:",e)}},Ae=function(e){if(Z)try{Z(e)}catch(e){console.error("Error in onTaskDoubleClick handler:",e)}},Pe=function(e){if($)try{$(e)}catch(e){console.error("Error in onGroupClick handler:",e)}},Se={fontSize:ee||"inherit"},Fe=_?"dark":"";return e.createElement("div",{ref:re,className:"rmg-gantt-chart w-full bg-gantt-bg text-gantt-text rounded-xl shadow-lg overflow-hidden ".concat(Fe),style:Se,"data-testid":"gantt-chart"},e.createElement("div",{className:"p-6 border-b border-gantt-border"},pe.length>0?r(pe[0]):e.createElement(S,null,h)),e.createElement("div",{className:"relative flex"},xe.length>0?r(xe[0],{tasks:c,headerLabel:R,onGroupClick:Pe}):e.createElement(P,{tasks:c,headerLabel:R,onGroupClick:Pe}),e.createElement("div",{ref:oe,className:"flex-grow overflow-x-auto"},e.createElement("div",{className:"min-w-max"},ye.length>0?r(ye[0],{months:ue,currentMonthIndex:ve,showWeeks:j,showDays:X,locale:K}):e.createElement(T,{months:ue,currentMonthIndex:ve,showWeeks:j,showDays:X,locale:K}),e.createElement("div",{className:"relative"},x&&ve>=0&&(be.length>0?r(be[0],{children:E}):e.createElement(A,{currentMonthIndex:ve,height:(we=0,c.forEach((function(e){if(e&&Array.isArray(e.tasks)){var t=D(e.tasks);we+=Math.max(60,t.length*ae+20)}else we+=60})),we),label:E,dayOfMonth:he})),Ee.length>0?e.createElement("div",{className:"relative"},Ee.map((function(e,t){var a=e.props.task,n=null==a?void 0:a.id;return r(e,{key:"custom-task-item-".concat(t),isSelected:!!n&&se.includes(n),onSelect:Te,onClick:Me,onDoubleClick:Ae})}))):c.map((function(t){return t&&t.id?e.createElement(M,{key:"task-row-".concat(t.id),taskGroup:t,startDate:le,endDate:de,totalMonths:me,monthWidth:150,editMode:O,showProgress:H,onTaskUpdate:Ne,onTaskClick:Me,onTaskSelect:Te}):null})))))))},z={background:"#ffffff",text:"#1f2937",border:"#e5e7eb",highlight:"#eff6ff",marker:"#ef4444",task:"#3b82f6",taskText:"#ffffff",tooltip:"#ffffff",tooltipText:"#1f2937",tooltipBorder:"#e5e7eb",progress:"rgba(0, 0, 0, 0.2)",progressFill:"#ffffff"},R={background:"#1f2937",text:"#f3f4f6",border:"#374151",highlight:"#374151",marker:"#ef4444",task:"#4f46e5",taskText:"#ffffff",tooltip:"#1f2937",tooltipText:"#f3f4f6",tooltipBorder:"#374151",progress:"rgba(0, 0, 0, 0.3)",progressFill:"#e5e7eb"};function U(e,t){return t?l(l({},e),t):e}export{x as CollisionManager,s as DateDisplayFormat,O as GanttChart,F as GanttHeader,I as GanttMarker,Y as GanttTaskItem,L as GanttTaskList,C as GanttTimeline,S as GanttTitle,E as TaskItem,P as TaskList,y as TaskManager,M as TaskRow,T as Timeline,A as TodayMarker,N as Tooltip,c as ViewMode,b as calculateDuration,v as calculateTaskPosition,R as darkTheme,D as detectTaskOverlaps,k as findEarliestDate,p as findLatestDate,m as formatDate,w as formatDateRange,u as formatMonth,g as getDaysInMonth,f as getMonthsBetween,h as getStandardDayMarkers,z as lightTheme,U as mergeTheme};
//# sourceMappingURL=index.esm.js.map
