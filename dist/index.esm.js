import e,{useRef as t,useState as r,useEffect as a,useCallback as n,createContext as o,useContext as i}from"react";import{differenceInDays as s,differenceInYears as c,differenceInQuarters as l,differenceInMonths as u,differenceInWeeks as d,format as g,isValid as h,getWeek as m,startOfDay as f,endOfDay as v,isWithinInterval as b,startOfYear as p,addYears as w,startOfQuarter as D,addQuarters as x,addDays as k,addHours as y,addMinutes as M}from"date-fns";var E,T,N=function(){return N=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},N.apply(this,arguments)};function A(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.QUARTER="quarter",e.YEAR="year"}(E||(E={})),function(e){e.MONTH_YEAR="month-year",e.FULL_DATE="full-date",e.SHORT_DATE="short-date"}(T||(T={}));var H={colors:{background:"#ffffff",text:"#1f2937",border:"#e5e7eb",highlight:"#eff6ff",task:{background:"#3b82f6",text:"#ffffff",border:"#2563eb",progress:"rgba(0, 0, 0, 0.2)",progressFill:"#ffffff"},timeline:{background:"#ffffff",headerBackground:"#f9fafb",headerText:"#1f2937",marker:"#ef4444"},scrollbar:{track:"rgba(229, 231, 235, 0.5)",thumb:"rgba(156, 163, 175, 0.7)",thumbHover:"rgba(107, 114, 128, 0.8)"}},sizes:{rowHeight:40,taskHeight:32,unitWidth:{minute:30,hour:40,day:50,week:80,month:150,quarter:180,year:200},borderRadius:"4px",fontSize:"0.875rem"},animation:{speed:.25,easing:"cubic-bezier(0.2, 0, 0.13, 2)"}},Y=N(N({},H),{colors:{background:"#1f2937",text:"#f3f4f6",border:"#374151",highlight:"#2d3748",task:{background:"#4f46e5",text:"#ffffff",border:"#6366f1",progress:"rgba(0, 0, 0, 0.3)",progressFill:"#e5e7eb"},timeline:{background:"#1f2937",headerBackground:"#111827",headerText:"#e5e7eb",marker:"#ef4444"},scrollbar:{track:"rgba(55, 65, 81, 0.5)",thumb:"rgba(75, 85, 99, 0.7)",thumbHover:"rgba(107, 114, 128, 0.8)"}}});function R(e,t){return void 0===t&&(t=!0),"\n".concat(t?":root":""," {\n  /* Base colors */\n  --rmg-bg-color: ").concat(e.colors.background,";\n  --rmg-text-color: ").concat(e.colors.text,";\n  --rmg-border-color: ").concat(e.colors.border,";\n  --rmg-highlight-color: ").concat(e.colors.highlight,";\n\n  /* Task colors */\n  --rmg-task-bg-color: ").concat(e.colors.task.background,";\n  --rmg-task-text-color: ").concat(e.colors.task.text,";\n  --rmg-task-border-color: ").concat(e.colors.task.border,";\n  --rmg-task-progress-color: ").concat(e.colors.task.progress,";\n  --rmg-task-progress-fill-color: ").concat(e.colors.task.progressFill,";\n\n  /* Timeline colors */\n  --rmg-timeline-bg-color: ").concat(e.colors.timeline.background,";\n  --rmg-timeline-header-bg-color: ").concat(e.colors.timeline.headerBackground,";\n  --rmg-timeline-header-text-color: ").concat(e.colors.timeline.headerText,";\n  --rmg-timeline-marker-color: ").concat(e.colors.timeline.marker,";\n\n  /* Scrollbar colors */\n  --rmg-scrollbar-track-color: ").concat(e.colors.scrollbar.track,";\n  --rmg-scrollbar-thumb-color: ").concat(e.colors.scrollbar.thumb,";\n  --rmg-scrollbar-thumb-hover-color: ").concat(e.colors.scrollbar.thumbHover,";\n\n  /* Sizes */\n  --rmg-row-height: ").concat(e.sizes.rowHeight,"px;\n  --rmg-task-height: ").concat(e.sizes.taskHeight,"px;\n  --rmg-border-radius: ").concat(e.sizes.borderRadius,";\n  --rmg-font-size: ").concat(e.sizes.fontSize,";\n\n  /* Unit widths by view mode */\n  --rmg-unit-width-minute: ").concat(e.sizes.unitWidth.minute,"px;\n  --rmg-unit-width-hour: ").concat(e.sizes.unitWidth.hour,"px;\n  --rmg-unit-width-day: ").concat(e.sizes.unitWidth.day,"px;\n  --rmg-unit-width-week: ").concat(e.sizes.unitWidth.week,"px;\n  --rmg-unit-width-month: ").concat(e.sizes.unitWidth.month,"px;\n  --rmg-unit-width-quarter: ").concat(e.sizes.unitWidth.quarter,"px;\n  --rmg-unit-width-year: ").concat(e.sizes.unitWidth.year,"px;\n\n  /* Animation */\n  --rmg-animation-speed: ").concat(e.animation.speed,";\n  --rmg-animation-easing: ").concat(e.animation.easing,";\n}\n")}function F(e,t){return void 0===t&&(t="default"),e.toLocaleString(t,{month:"short"})}function O(e,t,r){if(void 0===t&&(t=T.FULL_DATE),void 0===r&&(r="default"),!(e instanceof Date)||isNaN(e.getTime()))return"Invalid date";switch(t){case T.MONTH_YEAR:return e.toLocaleString(r,{month:"short",year:"2-digit"});case T.SHORT_DATE:return e.toLocaleString(r,{month:"short",day:"numeric"});case T.FULL_DATE:default:return e.toLocaleString(r,{month:"short",day:"numeric",year:"numeric"})}}function U(e,t){var r=[];if(!(e instanceof Date&&t instanceof Date))return[new Date];for(var a=e.getFullYear(),n=e.getMonth(),o=t.getFullYear(),i=t.getMonth(),s=a;s<=o;s++)for(var c=s===o?i:11,l=s===a?n:0;l<=c;l++)r.push(new Date(s,l,1));return r}function z(e,t){return new Date(e,t+1,0).getDate()}function S(e,t,r){void 0===r&&(r=E.MONTH);try{if(!(e instanceof Date)||!(t instanceof Date)||isNaN(e.getTime())||isNaN(t.getTime()))return{value:0,unit:"days"};var a=e<t?e:t,n=e<t?t:e;switch(r){case E.DAY:var o=s(n,a)+1;return{value:o,unit:1===o?"day":"days"};case E.WEEK:var i=d(n,a)+1;return{value:i,unit:1===i?"week":"weeks"};case E.MONTH:var g=u(n,a)+1;return{value:g,unit:1===g?"month":"months"};case E.QUARTER:var h=l(n,a)+1;return{value:h,unit:1===h?"quarter":"quarters"};case E.YEAR:var m=c(n,a)+1;return{value:m,unit:1===m?"year":"years"};default:var f=s(n,a)+1;return{value:f,unit:1===f?"day":"days"}}}catch(e){return console.error("Error calculating duration:",e),{value:0,unit:"days"}}}function C(e,t,r){if(void 0===r&&(r="default"),!(e instanceof Date&&t instanceof Date))return"Invalid date range";var a=O(e,T.SHORT_DATE,r),n=O(t,T.SHORT_DATE,r);return"".concat(a," - ").concat(n)}function L(e,t){var r;if(!(e instanceof Date&&t instanceof Date))return 0;e>t&&(e=(r=[t,e])[0],t=r[1]);var a=Math.abs(t.getTime()-e.getTime());return Math.ceil(a/864e5)}function P(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,r=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.startDate instanceof Date&&(r?e.startDate<t&&(t=new Date(e.startDate)):(t=new Date(e.startDate),r=!0))}))})),!r){var a=new Date;return new Date(a.getFullYear(),a.getMonth()-1,1)}return new Date(t.getFullYear(),t.getMonth(),1)}function I(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,r=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.endDate instanceof Date&&(r?e.endDate>t&&(t=new Date(e.endDate)):(t=new Date(e.endDate),r=!0))}))})),!r){var a=new Date;return new Date(a.getFullYear(),a.getMonth()+2,0)}return new Date(t.getFullYear(),t.getMonth()+1,0)}function W(e,t,r){if(!(e.startDate instanceof Date&&e.endDate instanceof Date))return{left:"0%",width:"10%"};var a=U(new Date(t.getFullYear(),t.getMonth(),1),new Date(r.getFullYear(),r.getMonth()+1,0)),n=a.length,o=e.startDate.getFullYear(),i=e.startDate.getMonth(),s=a.findIndex((function(e){return e.getFullYear()===o&&e.getMonth()===i})),c=s<0?0:s,l=e.endDate.getFullYear(),u=e.endDate.getMonth(),d=a.findIndex((function(e){return e.getFullYear()===l&&e.getMonth()===u})),g=((d<0?a.length-1:d)-c+1)/n*100;return{left:"".concat(c/n*100,"%"),width:"".concat(g,"%")}}function K(e){if(!Array.isArray(e))return[];var t=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===t.length)return[];var r=[];return t.forEach((function(e){for(var t=!1,a=0;a<r.length;a++){if(!r[a].some((function(t){return!(e.startDate>=t.endDate||e.endDate<=t.startDate)}))){r[a].push(e),t=!0;break}}t||r.push([e])})),r}R(H),R(Y);var q=function(t){var r=t.months,a=t.currentMonthIndex,n=(t.locale,t.className),o=void 0===n?"":n,i=t.viewMode,s=void 0===i?E.MONTH:i,c=t.unitWidth,l=void 0===c?150:c,u=[E.MINUTE,E.HOUR,E.DAY,E.WEEK].includes(s),d=function(){if(![E.MINUTE,E.HOUR,E.DAY,E.WEEK].includes(s)||0===r.length)return[];var e=[];if(s===E.MINUTE){var t=new Date(r[0]);t.setMinutes(0,0,0);var a=0;return r.forEach((function(r){r.getHours()===t.getHours()&&r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()?a+=1:(e.push({date:t,span:a}),(t=new Date(r)).setMinutes(0,0,0),a=1)})),a>0&&e.push({date:t,span:a}),e}if(s===E.HOUR){var n=new Date(r[0]);n.setHours(0,0,0,0);var o=0;return r.forEach((function(t){t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()?o+=1:(e.push({date:n,span:o}),(n=new Date(t)).setHours(0,0,0,0),o=1)})),o>0&&e.push({date:n,span:o}),e}var i=new Date(r[0]),c=0;return r.forEach((function(t){t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()?c+=1:(e.push({date:i,span:c}),i=new Date(t),c=1)})),c>0&&e.push({date:i,span:c}),e}();return e.createElement("div",{className:"rmg-timeline ".concat(o),style:{"--gantt-unit-width":"".concat(l,"px")}},u&&e.createElement("div",{className:"flex border-b border-gantt-border"},d.map((function(t,r){return e.createElement("div",{key:"higher-level-".concat(r),className:"flex-shrink-0 p-2 font-semibold text-center text-gray-800 dark:text-gray-200 border-r border-gray-200 dark:border-gray-700 h-10",style:{width:"".concat(t.span*l,"px")},"data-timeunit-higher":t.date.toISOString()},function(e){if(!(e instanceof Date))return"";switch(s){case E.MINUTE:return g(e,"HH:00",{locale:void 0});case E.HOUR:return g(e,"MMM d",{locale:void 0});case E.DAY:case E.WEEK:default:return g(e,"MMM yyyy",{locale:void 0})}}(t.date))}))),e.createElement("div",{className:"flex border-b border-gantt-border"},r.map((function(t,r){return e.createElement("div",{key:"timeunit-".concat(r),className:"".concat("w-[var(--gantt-unit-width)]"," flex-shrink-0 p-2 font-semibold text-center text-gantt-text ").concat(r===a?"bg-gantt-highlight":""," ").concat(u?"border-r border-gantt-border":""," h-10"),"data-timeunit":t.toISOString()},function(e){if(!(e instanceof Date&&h(e)))return"";switch(s){case E.MINUTE:return g(e,"HH:mm",{locale:void 0});case E.HOUR:return g(e,"HH:00",{locale:void 0});case E.DAY:return g(e,"d",{locale:void 0});case E.WEEK:var t=m(e);return"W".concat(t);case E.MONTH:return g(e,"MMM yyyy",{locale:void 0});case E.QUARTER:var r=Math.floor(e.getMonth()/3)+1;return"Q".concat(r," ").concat(e.getFullYear());case E.YEAR:return e.getFullYear().toString();default:return g(e,"MMM yyyy",{locale:void 0})}}(t))}))))},B=function(t){var r=t.currentMonthIndex,a=t.height,n=t.markerClass,o=void 0===n?"bg-red-500":n,i=t.label,s=void 0===i?"Today":i,c=t.dayOfMonth,l=t.className,u=void 0===l?"":l,d=t.viewMode,g=void 0===d?E.MONTH:d,h=t.unitWidth,m=void 0===h?150:h;if(r<0)return null;var f=function(){var e=new Date,t=c||e.getDate();switch(g){case E.MINUTE:var a=e.getMinutes(),n=e.getSeconds();return r*m+m*((a+n/60)/60);case E.HOUR:var o=e.getMinutes();return r*m+m*(o/60);case E.DAY:return r*m+m/2;case E.WEEK:var i=e.getDay();return r*m+m*((i+7)%7/6);case E.MONTH:var s=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return r*m+m*((t-1)/s);case E.QUARTER:var l=e.getMonth()%3;return r*m+m*(l/3);case E.YEAR:var u=e.getMonth();return r*m+m*(u/12);default:return r*m+m/2}}(),v=Math.max(100,a);return e.createElement("div",{className:"absolute top-0 w-px ".concat(o," z-10 ").concat(u),style:{left:"".concat(f,"px"),height:"".concat(v,"px"),boxShadow:"0 0 4px rgba(239, 68, 68, 0.5)"},"data-testid":"today-marker"},e.createElement("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 ".concat(o," px-1.5 py-0.5 rounded text-xs text-white dark:text-white whitespace-nowrap shadow-sm")},s))},Q=function(){function e(){}return e.detectOverlaps=function(e,t){var r=this;if(void 0===t&&(t=E.MONTH),!Array.isArray(e)||0===e.length)return[];var a=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===a.length)return[];var n=A([],a,!0).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()})),o=[];return n.forEach((function(e){for(var a=!1,n=0;n<o.length;n++){if(!o[n].some((function(a){return r.tasksVisuallyOverlap(e,a,t)}))){o[n].push(e),a=!0;break}}a||o.push([e])})),o},e.tasksVisuallyOverlap=function(e,t,r){if(void 0===r&&(r=E.MONTH),!(e&&t&&e.id&&t.id))return!1;if(e.id===t.id)return!1;if(!(e.startDate instanceof Date&&e.endDate instanceof Date&&t.startDate instanceof Date&&t.endDate instanceof Date))return!1;var a=e.startDate.getTime(),n=e.endDate.getTime(),o=t.startDate.getTime(),i=t.endDate.getTime(),s=this.getCollisionBufferByViewMode(r);return a<i&&n>o||Math.abs(a-o)<2*s||Math.abs(n-i)<2*s},e.getCollisionBufferByViewMode=function(e){var t=36e5,r=24*t;switch(e){case E.MINUTE:return 3e4;case E.HOUR:return 9e5;case E.DAY:return t;case E.WEEK:return 4*t;case E.MONTH:return 12*t;case E.QUARTER:return r;case E.YEAR:return 2*r;default:return 12*t}},e.wouldCollide=function(e,t,r,a){var n=this;return void 0===r&&(r=E.MONTH),!(!e||!Array.isArray(t))&&t.some((function(t){return t.id!==e.id&&t.id!==a&&n.tasksVisuallyOverlap(e,t,r)}))},e.getPreviewArrangement=function(e,t,r){if(void 0===r&&(r=E.MONTH),!e||!Array.isArray(t))return this.detectOverlaps(t,r);try{var a=t.map((function(t){return t.id===e.id?e:t}));return this.detectOverlaps(a,r)}catch(e){return console.error("Error in getPreviewArrangement:",e),this.detectOverlaps(t,r)}},e}(),_=function(){function e(){}return e.calculateDatesFromPosition=function(e,t,r,a,n,o,i){void 0===i&&(i=E.MONTH);try{var s=isNaN(e)?0:e,c=isNaN(t)||t<20?20:t,l=r.getTime(),u=(a.getTime()-l)/(n*o),d=s*u,g=c*u,h=new Date(l+d),m=new Date(l+d+g);switch(i){case E.MINUTE:h.setSeconds(0,0),m.setSeconds(59,999);break;case E.HOUR:h.setMinutes(0,0,0),m.setMinutes(59,59,999);break;case E.DAY:var b=Math.round(e/o),p=Math.max(1,Math.round(t/o)),w=new Date(r);w.setHours(0,0,0,0),(h=new Date(w)).setDate(w.getDate()+b),h.setHours(0,0,0,0),(m=new Date(h)).setDate(h.getDate()+p-1),m.setHours(23,59,59,999);break;default:h=f(h),m=v(m)}return h<r&&(h=new Date(r)),m>a&&(m=new Date(a)),{newStartDate:h,newEndDate:m}}catch(e){return console.error("Error calculating dates from position:",e),{newStartDate:new Date(r),newEndDate:new Date(a)}}},e.createUpdatedTask=function(e,t,r){return e?N(N({},e),{startDate:new Date(t),endDate:new Date(r)}):e},e.calculateTaskPixelPosition=function(e,t,r,a,n,o){var i;void 0===o&&(o=E.MONTH);try{if(!(e&&e.startDate instanceof Date&&e.endDate instanceof Date))return console.warn("Invalid task data in calculateTaskPixelPosition:",e),{leftPx:0,widthPx:20};var s=t.getTime(),c=r.getTime(),l=Math.max(e.startDate.getTime(),t.getTime()),u=Math.min(e.endDate.getTime(),r.getTime());if(o===E.MINUTE||o===E.HOUR||o===E.DAY){var d=void 0,g=void 0;if(o===E.MINUTE)d=s,g=c;else if(o===E.HOUR){var h=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime(),m=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),59,59,999).getTime();d=h,g=m}else{var f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),v=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999).getTime();d=f,g=v}if(s=d,c=g,o===E.DAY){var b=new Date(new Date(l).getFullYear(),new Date(l).getMonth(),new Date(l).getDate(),0,0,0,0).getTime(),p=new Date(new Date(u).getFullYear(),new Date(u).getMonth(),new Date(u).getDate(),23,59,59,999).getTime();l=b,u=p}}var w=c-s;if(w<=0)return{leftPx:0,widthPx:20};var D=a*n,x=(l-s)/w*D,k=(u-l)/w*D;o===E.MINUTE?(x=Math.round(x),k=Math.max(10,Math.round(k))):o===E.HOUR?(x=Math.round(x),k=Math.max(15,Math.round(k))):o===E.DAY&&(x=Math.round(x/n)*n,k=Math.max(n,Math.round(k/n)*n));var y=((i={})[E.MINUTE]=10,i[E.HOUR]=15,i[E.DAY]=20,i[E.WEEK]=20,i[E.MONTH]=20,i[E.QUARTER]=30,i[E.YEAR]=40,i)[o]||20;k=Math.max(y,k);var M=D-x;return{leftPx:x,widthPx:k=Math.min(M,k)}}catch(e){return console.error("Error calculating task position:",e),{leftPx:0,widthPx:20}}},e.getLiveDatesFromElement=function(e,t,r,a,n,o){void 0===o&&(o=E.MONTH);try{if(!e)return{startDate:new Date(t),endDate:new Date(r)};var i=parseFloat(e.style.left||"0"),s=parseFloat(e.style.width||"0"),c=this.calculateDatesFromPosition(i,s,t,r,a,n,o);return{startDate:c.newStartDate,endDate:c.newEndDate}}catch(e){return console.error("Error getting live dates:",e),{startDate:new Date(t),endDate:new Date(r)}}},e.datesOverlap=function(e,t,r,a){try{return e instanceof Date&&t instanceof Date&&r instanceof Date&&a instanceof Date&&(b(e,{start:r,end:a})||b(t,{start:r,end:a})||b(r,{start:e,end:t})||b(a,{start:e,end:t}))}catch(e){return console.error("Error checking dates overlap:",e),!1}},e}(),V=function(t){var r=t.task,a=t.position,n=t.dragType,o=t.taskId,i=t.startDate,s=t.endDate,c=t.totalMonths,l=t.monthWidth,u=t.showProgress,d=void 0!==u&&u,h=t.instanceId,m=t.className,f=void 0===m?"":m,v=t.viewMode,b=void 0===v?E.MONTH:v,p=t.renderTooltip,w=r.startDate,D=r.endDate;try{var x=o||r.id,k=document.querySelector('[data-task-id="'.concat(x,'"][data-instance-id="').concat(h,'"]'));if(k&&(n||k.style.left||k.style.width)){var y=_.getLiveDatesFromElement(k,i,s,c,l,b);w=y.startDate,D=y.endDate}}catch(e){console.error("Error calculating live dates for tooltip:",e)}var M=S(w,D,b),T=function(e){return e instanceof Date&&!isNaN(e.getTime())?b===E.DAY?g(e,"EEE, MMM d, yyyy"):g(e,"MMM d, yyyy"):"Invalid date"},N=function(){if(!n)return null;switch(n){case"move":return"Moving task...";case"resize-left":return"Adjusting start date...";case"resize-right":return"Adjusting end date...";default:return null}}();return p?e.createElement("div",{className:"rmg-task-tooltip absolute z-20 ".concat(f),style:{left:"".concat(a.x,"px"),top:"".concat(a.y-40,"px")}},p({task:r,position:a,dragType:n,startDate:w,endDate:D,viewMode:b})):e.createElement("div",{className:"rmg-task-tooltip absolute z-20 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-700 rounded-md shadow-md dark:shadow-gray-900 p-2 text-xs select-none ".concat(f),style:{left:"".concat(a.x,"px"),top:"".concat(a.y-40,"px"),minWidth:"200px"}},e.createElement("div",{className:"font-bold mb-1"},r.name||"Unnamed Task"),N&&e.createElement("div",{className:"text-xs text-blue-500 dark:text-blue-400 mb-1 italic"},N),e.createElement("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1"},e.createElement("div",{className:"font-semibold"},"Start:"),e.createElement("div",null,T(w)),e.createElement("div",{className:"font-semibold"},"End:"),e.createElement("div",null,T(D)),e.createElement("div",{className:"font-semibold"},"Duration:"),e.createElement("div",null,M.value," ",M.unit),d&&"number"==typeof r.percent&&e.createElement(e.Fragment,null,e.createElement("div",{className:"font-semibold"},"Progress:"),e.createElement("div",null,r.percent,"%")),r.dependencies&&r.dependencies.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"font-semibold"},"Dependencies:"),e.createElement("div",null,r.dependencies.join(", ")))))},X=function(n){var o=n.activeMode,i=n.onChange,s=n.darkMode,c=n.availableModes,l=[{id:E.MINUTE,label:"Minute"},{id:E.HOUR,label:"Hour"},{id:E.DAY,label:"Day"},{id:E.WEEK,label:"Week"},{id:E.MONTH,label:"Month"},{id:E.QUARTER,label:"Quarter"},{id:E.YEAR,label:"Year"}],u=[E.DAY,E.WEEK,E.MONTH,E.QUARTER,E.YEAR],d=c?l.filter((function(e){return c.includes(e.id)})):l.filter((function(e){return u.includes(e.id)})),g=t(null),h=r({left:"0px",width:"0px"}),m=h[0],f=h[1];a((function(){var e=function(){if(g.current){var e=g.current.querySelector('[aria-selected="true"]');if(e){var t=e,r=t.offsetLeft,a=t.offsetWidth;f({left:"".concat(r,"px"),width:"".concat(a,"px")})}}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[o]);var v="\n    relative inline-flex rounded-full p-0.5\n    ".concat(s?"bg-gray-800/80":"bg-gray-100/90","\n    transition-all duration-300 ease-in-out shadow-sm dark:shadow-gray-900\n    border ").concat(s?"border-gray-700":"border-gray-200","\n    ");return e.createElement("div",{className:"relative flex items-center"},e.createElement("div",{ref:g,className:v,role:"tablist","aria-label":"View mode options"},e.createElement("span",{className:"\n                        absolute z-0 inset-0.5 rounded-full\n                        transition-all duration-300 ease-out transform\n                        ".concat(s?"bg-indigo-600":"bg-indigo-500","\n                    "),style:m,"aria-hidden":"true"}),d.map((function(t){return e.createElement("button",{key:t.id,role:"tab","aria-selected":o===t.id,"aria-controls":"panel-".concat(t.id),className:"".concat((r=o===t.id,"\n    relative z-10 px-3 py-1 text-xs font-medium\n    transition-all duration-200 ease-in-out\n    ".concat(r?"text-white":s?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-gray-700","\n    focus:outline-none border-none\n    "))," rounded-full"),onClick:function(){return i(t.id)}},t.label);var r}))))},j=function(o){var i=o.task,s=o.leftPx,c=o.widthPx,l=o.topPx,u=o.isHovered,d=o.isDragging,g=o.editMode,h=o.showProgress,m=void 0!==h&&h,f=o.instanceId,v=o.renderTask,b=o.getTaskColor,p=o.onMouseDown,w=o.onMouseEnter,D=o.onMouseLeave,x=o.onClick,k=o.onProgressUpdate,y=(u||d)&&g,M=t(null),E=t(null),T=r(!1),A=T[0],H=T[1],Y=r(i.percent||0),R=Y[0],F=Y[1];if(!i||!i.id)return null;var O=i.color||"bg-gantt-task",U="",z="text-gantt-task-text";if(b){var S=b({task:i,isHovered:u,isDragging:d});O=S.backgroundColor,U=S.borderColor||"",z=S.textColor||z}var C=n((function(e){if(A&&E.current&&M.current){var t=M.current.getBoundingClientRect(),r=t.width-2,a=Math.max(0,Math.min(r,e.clientX-t.left)),n=Math.round(a/r*100);F(Math.max(0,Math.min(100,n))),E.current&&E.current.firstChild&&(E.current.firstChild.style.width="".concat(Math.max(0,Math.min(100,n)),"%"))}}),[A]),L=n((function(){A&&(H(!1),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",L),E.current&&(E.current.style.transition=""),k&&R!==i.percent&&k(i,R))}),[A,k,R,i]);if(a((function(){F(i.percent||0)}),[i.percent]),a((function(){return function(){document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",L)}}),[C,L]),v){var P=v({task:i,leftPx:s,widthPx:c,topPx:l,isHovered:u,isDragging:d,editMode:g,showProgress:m});return e.createElement("div",{ref:M,className:"absolute",style:{left:"".concat(Math.max(0,s),"px"),width:"".concat(Math.max(20,c),"px"),top:"".concat(l,"px")},onClick:function(e){return x(e,i)},onMouseDown:function(e){return p(e,i,"move")},onMouseEnter:function(e){return w(e,i)},onMouseLeave:D,"data-testid":"task-".concat(i.id),"data-task-id":i.id,"data-instance-id":f,"data-dragging":d?"true":"false"},P)}var I=O.startsWith("bg-")?{}:{backgroundColor:O},W=O.startsWith("bg-")?O:"",K=U?U.startsWith("border-")?{}:{borderColor:U,borderWidth:"1px"}:{},q=U&&U.startsWith("border-")?U:"";return e.createElement("div",{ref:M,className:"absolute h-8 rounded ".concat(W," ").concat(q," ").concat(z," flex items-center px-2 text-xs font-medium text-gantt-task-text ").concat(g?"cursor-move":"cursor-pointer"," ").concat(d?"shadow-lg dark:shadow-gray-900":""),style:N(N(N({left:"".concat(Math.max(0,s),"px"),width:"".concat(Math.max(20,c),"px"),top:"".concat(l,"px")},I),K),{willChange:d?"transform, left, width":"auto"}),onClick:function(e){return x(e,i)},onMouseDown:function(e){return p(e,i,"move")},onMouseEnter:function(e){return w(e,i)},onMouseLeave:D,"data-testid":"task-".concat(i.id),"data-task-id":i.id,"data-instance-id":f,"data-dragging":d?"true":"false"},y&&e.createElement("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-white dark:bg-gray-600 bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-l rmg-resize-handle",onMouseDown:function(e){e.stopPropagation(),p(e,i,"resize-left")}}),e.createElement("div",{className:"truncate select-none"},i.name||"Unnamed Task"),m&&"number"==typeof R&&e.createElement("div",{ref:E,className:"absolute bottom-1 left-1 right-1 h-1 bg-black dark:bg-white bg-opacity-20 dark:bg-opacity-30 rounded-full overflow-hidden ".concat(g?"cursor-pointer":""),onClick:function(e){if(g&&m&&k){e.stopPropagation();var t=e.currentTarget.clientWidth,r=e.nativeEvent.offsetX,a=Math.round(r/t*100);F(a),k(i,a)}}},e.createElement("div",{className:"h-full bg-white dark:bg-gray-200 rounded-full relative",style:{width:"".concat(R,"%")}},g&&(u||A)&&e.createElement("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 h-4 w-4 rounded-full bg-white dark:bg-gray-300 border-2 ".concat(U||O.startsWith("bg-")?q||W:"border-blue-500 dark:border-blue-400"," cursor-ew-resize shadow-sm hover:shadow-md transition-shadow ").concat(A?"scale-110":""),onMouseDown:function(e){g&&m&&(e.stopPropagation(),e.preventDefault(),H(!0),E.current&&(E.current.style.transition="width 0.05s ease-out"),document.addEventListener("mousemove",C),document.addEventListener("mouseup",L))}}))),y&&e.createElement("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-white dark:bg-gray-600 bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-r rmg-resize-handle",onMouseDown:function(e){e.stopPropagation(),p(e,i,"resize-right")}}))},G=function(t){var r=t.tasks,a=void 0===r?[]:r,n=t.headerLabel,o=void 0===n?"Resources":n,i=t.showIcon,s=void 0!==i&&i,c=t.showTaskCount,l=void 0!==c&&c,u=t.showDescription,d=void 0===u||u,g=t.rowHeight,h=void 0===g?40:g,m=t.className,f=void 0===m?"":m,v=t.onGroupClick,b=t.viewMode,p=Array.isArray(a)?a:[],w=b===E.DAY||b===E.WEEK;return e.createElement("div",{className:"rmg-task-list w-40 flex-shrink-0 z-10 bg-gantt-bg shadow-sm ".concat(f)},w?e.createElement(e.Fragment,null,e.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"}),e.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"},o)):e.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"},o),p.map((function(t){if(!t)return null;var r=function(e){if(!e.tasks||!Array.isArray(e.tasks))return 60;var t=Q.detectOverlaps(e.tasks,b);return Math.max(60,t.length*h+20)}(t);return e.createElement("div",{key:"task-group-".concat(t.id||"unknown"),className:"p-2 border-r border-b border-gray-200 dark:border-gray-700 font-medium text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",style:{height:"".concat(r,"px")},onClick:function(){return e=t,void(v&&v(e));var e},"data-testid":"task-group-".concat(t.id||"unknown")},e.createElement("div",{className:"flex items-center"},s&&t.icon&&e.createElement("span",{className:"mr-2",dangerouslySetInnerHTML:{__html:t.icon}}),e.createElement("div",{className:"font-medium truncate"},t.name||"Unnamed")),d&&t.description&&e.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate"},t.description),l&&t.tasks&&t.tasks.length>0&&e.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},t.tasks.length," ",1===t.tasks.length?"task":"tasks"))})))},Z=function(n){var o=n.taskGroup,i=n.startDate,s=n.endDate,c=n.totalMonths,l=n.monthWidth,u=n.editMode,d=void 0===u||u,g=n.showProgress,h=void 0!==g&&g,m=n.className,f=void 0===m?"":m,v=n.tooltipClassName,b=void 0===v?"":v,p=n.onTaskUpdate,w=n.onTaskClick,D=n.onTaskSelect,x=n.onAutoScrollChange,k=n.viewMode,y=void 0===k?E.MONTH:k,M=n.scrollContainerRef,T=n.smoothDragging,A=void 0===T||T;n.movementThreshold;var H=n.animationSpeed,Y=void 0===H?.25:H,R=n.renderTask,F=n.renderTooltip,O=n.getTaskColor;if(!o||!o.id||!Array.isArray(o.tasks))return e.createElement("div",{className:"relative h-16 text-gantt-text"},"Invalid task group data");var U=i instanceof Date?i:new Date,z=s instanceof Date?s:new Date,S=r(null),C=S[0],L=S[1],P=r(null),I=P[0],W=P[1],K=r(null),q=K[0],B=K[1],X=r(0),G=X[0],Z=X[1],J=r({x:0,y:0}),$=J[0],ee=J[1],te=r(null),re=te[0],ae=te[1],ne=r(null),oe=ne[0],ie=ne[1],se=t(null),ce=t({x:0,y:0}),le=t(null),ue=t(null),de=t({left:0,width:0}),ge=t(0),he=t(!1),me=t(null),fe=t(0),ve=t(null),be=t({minLeft:0,maxLeft:c*l}),pe=t(null),we=t(null),De=t(null),xe=t(null),ke=t("task-row-".concat(Math.random().toString(36).substring(2,11))),ye=A&&y!==E.DAY,Me=function(e){var t=N(N({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)});ae(t),De.current=t},Ee=re?Q.getPreviewArrangement(re,o.tasks,y):Q.detectOverlaps(o.tasks,y),Te=Math.max(60,40*Ee.length+20);a((function(){be.current={minLeft:0,maxLeft:c*l}}),[c,l]);var Ne=function(){if(xe.current&&le.current&&ue.current){var e=Date.now(),t=e-ge.current;ge.current=e;var r=Y||.25,a=ue.current.left+(le.current.left-ue.current.left)*r,n=ue.current.width+(le.current.width-ue.current.width)*r;de.current.left=(a-ue.current.left)/(t||16),de.current.width=(n-ue.current.width)/(t||16),ue.current={left:a,width:n},xe.current.style.left="".concat(a,"px"),xe.current.style.width="".concat(n,"px"),we.current&&Ae(a,n),se.current=requestAnimationFrame(Ne)}else se.current=null},Ae=function(e,t){if(we.current)try{if(y===E.DAY){var r=Math.round(e/l),a=Math.max(1,Math.round(t/l)),n=new Date(U);n.setHours(0,0,0,0),(h=new Date(n)).setDate(n.getDate()+r),h.setHours(0,0,0,0),(m=new Date(h)).setDate(h.getDate()+a-1),m.setHours(23,59,59,999);var o=U.getTime(),i=z.getTime(),s=new Date(Math.max(o,h.getTime())),u=new Date(Math.min(i,m.getTime())),d=N(N({},we.current),{startDate:s,endDate:u});Me(d)}else{var g=_.calculateDatesFromPosition(e,t,U,z,c,l,y),h=g.newStartDate,m=g.newEndDate;d=N(N({},we.current),{startDate:h,endDate:m});Me(d)}}catch(e){console.error("Error updating dates:",e)}},He=function(){if(!he.current){he.current=!0;var e=function(){if(he.current&&(null==M?void 0:M.current)&&le.current){var t=M.current,r=ve.current,a=fe.current,n=t.scrollLeft,o=t.scrollWidth-t.clientWidth;if("left"===r){if(n<=0)return void Ye();var i=Math.max(0,n-a);if(t.scrollLeft=i,le.current){var s=Math.max(be.current.minLeft,le.current.left-a);le.current.left=s}}else if("right"===r){if(n>=o)return void Ye();i=Math.min(o,n+a);if(t.scrollLeft=i,le.current&&oe){var c=be.current.maxLeft-le.current.width;s=Math.min(c,le.current.left+a);le.current.left=s}}he.current&&(me.current=requestAnimationFrame(e))}};me.current=requestAnimationFrame(e)}},Ye=function(){he.current=!1,null!==me.current&&(cancelAnimationFrame(me.current),me.current=null)},Re=function(e,t){w&&!I&&w(t,o),D&&D(t,!0)},Fe=function(e,t){I||(L(t),Ue(e))},Oe=function(){I||L(null)},Ue=function(e){if(pe.current){var t=pe.current.getBoundingClientRect();ee({x:e.clientX-t.left+20,y:e.clientY-t.top})}},ze=function(e,t,r){if(d){e.preventDefault(),e.stopPropagation();var a=document.querySelector('[data-task-id="'.concat(t.id,'"][data-instance-id="').concat(ke.current,'"]'));if(a){xe.current=a;var n=parseFloat(a.style.left||"0"),o=parseFloat(a.style.width||"0");ie({left:n,width:o,startDate:new Date(t.startDate),endDate:new Date(t.endDate)}),le.current={left:n,width:o},ue.current={left:n,width:o},ce.current={x:e.clientX,y:e.clientY},ge.current=Date.now(),de.current={left:0,width:0},a.setAttribute("data-dragging","true"),a.style.transition="none",W(t),B(r),Z(e.clientX),ae(t),function(e){var t=N(N({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)});W(t),we.current=t}(t),Me(t),null===se.current&&ye&&(se.current=requestAnimationFrame(Ne)),document.addEventListener("mouseup",Ce),document.addEventListener("mousemove",Se)}}},Se=function(e){if(ce.current={x:e.clientX,y:e.clientY},e instanceof MouseEvent&&C&&pe.current){var t=pe.current.getBoundingClientRect();ee({x:e.clientX-t.left+20,y:e.clientY-t.top})}else e instanceof MouseEvent||Ue(e);if(I&&(null==M?void 0:M.current)&&function(e){if((null==M?void 0:M.current)&&I){var t=M.current.getBoundingClientRect(),r=null,a=0;e<t.left+40?(r="left",a=Math.max(1,Math.round((40-(e-t.left))/10))):e>t.right-40&&(r="right",a=Math.max(1,Math.round((e-(t.right-40))/10))),ve.current=r,fe.current=a,r&&!he.current?(He(),x&&x(!0)):!r&&he.current&&(Ye(),x&&x(!1))}}(e.clientX),I&&q&&oe&&pe.current&&le.current)try{var r=e.clientX-G,a=c*l,n=le.current.left,o=le.current.width;switch(q){case"move":n=Math.max(0,Math.min(a-oe.width,oe.left+r)),y===E.DAY&&(n=Math.round(n/l)*l);break;case"resize-left":var i=oe.width-20,s=Math.min(i,r);n=Math.max(0,oe.left+s),y===E.DAY&&(n=Math.round(n/l)*l);var u=oe.left+oe.width;o=Math.max(20,u-n),y===E.DAY&&(o=Math.round(o/l)*l,o=Math.max(l,o));break;case"resize-right":o=Math.max(20,Math.min(a-oe.left,oe.width+r)),y===E.DAY&&(o=Math.round(o/l)*l,o=Math.max(l,o))}le.current={left:n,width:o},y===E.DAY&&xe.current?(xe.current.style.left="".concat(n,"px"),xe.current.style.width="".concat(o,"px"),Ae(n,o)):ye?null===se.current&&(ge.current=Date.now(),se.current=requestAnimationFrame(Ne)):xe.current&&(xe.current.style.left="".concat(n,"px"),xe.current.style.width="".concat(o,"px"),Ae(n,o))}catch(e){console.error("Error in handleMouseMove:",e)}},Ce=function(){try{null!==se.current&&(cancelAnimationFrame(se.current),se.current=null),function(){if(xe.current&&le.current&&we.current){var e=le.current.left,t=le.current.width;y===E.DAY?(e=Math.round(e/l)*l,t=Math.round(t/l)*l,t=Math.max(l,t),xe.current.style.transition="transform 0.15s ease-out, left 0.15s ease-out, width 0.15s ease-out",xe.current.style.left="".concat(e,"px"),xe.current.style.width="".concat(t,"px"),Ae(e,t)):ye||(xe.current.style.transition="transform 0.15s ease-out, left 0.15s ease-out, width 0.15s ease-out",xe.current.style.left="".concat(e,"px"),xe.current.style.width="".concat(t,"px"));var r=De.current;if(r){var a=U.getTime(),n=z.getTime();if(r.startDate.getTime()<a&&(r=N(N({},r),{startDate:new Date(a)})),r.endDate.getTime()>n&&(r=N(N({},r),{endDate:new Date(n)})),p&&r)try{p(o.id,r)}catch(e){console.error("Error in onTaskUpdate:",e)}}}}(),xe.current&&(xe.current.setAttribute("data-dragging","false"),setTimeout((function(){xe.current&&(xe.current.style.transition="")}),200))}catch(e){console.error("Error in handleMouseUp:",e)}finally{Ye(),x&&x(!1),W(null),B(null),ae(null),ie(null),we.current=null,De.current=null,xe.current=null,le.current=null,ue.current=null,document.removeEventListener("mouseup",Ce),document.removeEventListener("mousemove",Se)}},Le=function(e,t){if(p&&o.id)try{var r=N(N({},e),{percent:t});p(o.id,r)}catch(e){console.error("Error updating task progress:",e)}};return a((function(){return function(){document.removeEventListener("mouseup",Ce),document.removeEventListener("mousemove",Se),Ye(),null!==se.current&&(cancelAnimationFrame(se.current),se.current=null)}}),[]),o.tasks&&0!==o.tasks.length?e.createElement("div",{className:"relative border-b border-gray-200 dark:border-gray-700 text-gantt-task-text ".concat(f),style:{height:"".concat(Te,"px")},onMouseMove:function(e){return Se(e)},onMouseLeave:function(){return L(null)},ref:pe,"data-testid":"task-row-".concat(o.id),"data-instance-id":ke.current},Ee.map((function(t,r){return e.createElement(e.Fragment,{key:"task-row-".concat(r)},t.map((function(t){try{if(!(t&&t.id&&t.startDate instanceof Date&&t.endDate instanceof Date))return console.warn("Invalid task data:",t),null;var a=_.calculateTaskPixelPosition(t,U,z,c,l,y),n=a.leftPx,o=a.widthPx,i=(null==C?void 0:C.id)===t.id,s=(null==I?void 0:I.id)===t.id,u=40*r+10;return e.createElement(j,{key:"task-".concat(t.id),task:t,leftPx:n,widthPx:o,topPx:u,isHovered:i,isDragging:s,editMode:d,showProgress:h,instanceId:ke.current,onMouseDown:ze,onMouseEnter:Fe,onMouseLeave:Oe,onClick:Re,renderTask:R,getTaskColor:O,onProgressUpdate:Le})}catch(e){return console.error("Error rendering task:",e),null}})))})),(C||I)&&e.createElement(V,{task:re||I||C,position:$,dragType:q,taskId:null==I?void 0:I.id,startDate:U,endDate:z,totalMonths:c,monthWidth:l,showProgress:h,instanceId:ke.current,className:b,viewMode:y,renderTooltip:F})):e.createElement("div",{className:"relative h-16 text-gantt-text"},"No tasks available")},J=function(n){var o=n.tasks,i=void 0===o?[]:o,s=n.startDate,c=n.endDate,l=n.title,u=void 0===l?"Project Timeline":l,d=n.currentDate,g=void 0===d?new Date:d,h=n.showCurrentDateMarker,m=void 0===h||h,f=n.todayLabel,v=void 0===f?"Today":f,b=n.editMode,T=void 0===b||b,H=n.headerLabel,Y=void 0===H?"Resources":H,R=n.showProgress,F=void 0!==R&&R,O=n.darkMode,z=void 0!==O&&O,S=n.locale,C=void 0===S?"default":S,L=n.styles,W=void 0===L?{}:L,K=n.viewMode,_=void 0===K?E.MONTH:K,V=n.viewModes,j=n.smoothDragging,J=void 0===j||j,$=n.movementThreshold,ee=void 0===$?3:$,te=n.animationSpeed,re=void 0===te?.25:te,ae=n.minuteStep,ne=void 0===ae?5:ae,oe=n.renderTaskList,ie=n.renderTask,se=n.renderTooltip,ce=n.renderViewModeSelector,le=n.renderHeader,ue=n.renderTimelineHeader,de=n.getTaskColor,ge=n.onTaskUpdate,he=n.onTaskClick,me=n.onTaskSelect;n.onTaskDoubleClick;var fe=n.onGroupClick,ve=n.onViewModeChange,be=n.fontSize;n.rowHeight,n.timeStep;var pe=t(null),we=t(null),De=r(_),xe=De[0],ke=De[1],ye=r([]);ye[0];var Me=ye[1],Ee=r(150),Te=Ee[0],Ne=Ee[1],Ae=r(!1),He=Ae[0],Ye=Ae[1],Re=r(0),Fe=Re[0],Oe=Re[1],Ue=s||P(i),ze=c||I(i),Se=function(e,t,r){void 0===r&&(r=5);var a=[],n=new Date(e);n.setSeconds(0,0);var o=n.getMinutes(),i=Math.floor(o/r)*r;n.setMinutes(i);var s=new Date(t);for(s.setMinutes(s.getMinutes(),59,999);n<=s;)a.push(new Date(n)),n=M(n,r);return a},Ce=function(e,t){var r=[],a=new Date(e);a.setMinutes(0,0,0);var n=new Date(t);for(n.setHours(n.getHours(),59,59,999);a<=n;)r.push(new Date(a)),a=y(a,1);return r},Le=function(e,t){var r=[],a=new Date(e);a.setHours(0,0,0,0);var n=new Date(t);for(n.setHours(23,59,59,999);a<=n;)r.push(new Date(a)),a=k(a,1);return r},Pe=function(e,t){for(var r=[],a=new Date(e);a<=t;)r.push(new Date(a)),a=k(a,7);return r},Ie=function(e,t){for(var r=[],a=D(new Date(e));a<=t;)r.push(new Date(a)),a=x(a,1);return r},We=function(e,t){for(var r=[],a=p(new Date(e));a<=t;)r.push(new Date(a)),a=w(a,1);return r},Ke=function(){return!1!==V&&(Array.isArray(V)?V:[E.DAY,E.WEEK,E.MONTH,E.QUARTER,E.YEAR])},qe=function(){switch(xe){case E.MINUTE:return Se(Ue,ze,ne);case E.HOUR:return Ce(Ue,ze);case E.DAY:return Le(Ue,ze);case E.WEEK:return Pe(Ue,ze);case E.MONTH:return U(Ue,ze);case E.QUARTER:return Ie(Ue,ze);case E.YEAR:return We(Ue,ze);default:return U(Ue,ze)}}(),Be=qe.length,Qe=function(){var e=new Date;switch(xe){case E.MINUTE:return qe.findIndex((function(t){return t.getHours()===e.getHours()&&Math.floor(t.getMinutes()/(ne||5))===Math.floor(e.getMinutes()/(ne||5))&&t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case E.HOUR:return qe.findIndex((function(t){return t.getHours()===e.getHours()&&t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case E.DAY:return qe.findIndex((function(t){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case E.WEEK:return qe.findIndex((function(t){var r=new Date(t);return r.setDate(t.getDate()+6),e>=t&&e<=r}));case E.MONTH:return qe.findIndex((function(t){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case E.QUARTER:var t=Math.floor(e.getMonth()/3);return qe.findIndex((function(r){return Math.floor(r.getMonth()/3)===t&&r.getFullYear()===e.getFullYear()}));case E.YEAR:return qe.findIndex((function(t){return t.getFullYear()===e.getFullYear()}));default:return-1}}(),_e=function(e){Ye(e),we.current&&(e?we.current.classList.add("rmg-auto-scrolling"):we.current.classList.remove("rmg-auto-scrolling"))},Ve=function(e,t){if(ge)try{var r=N(N({},t),{startDate:t.startDate instanceof Date?t.startDate:new Date(t.startDate),endDate:t.endDate instanceof Date?t.endDate:new Date(t.endDate)});Oe((function(e){return e+1})),ge(e,r)}catch(e){console.error("Error in handleTaskUpdate:",e)}},Xe=function(e,t){if(he)try{he(e,t)}catch(e){console.error("Error in handleTaskClick:",e)}},je=function(e,t){if(Me((function(r){return t?A(A([],r,!0),[e.id],!1):r.filter((function(t){return t!==e.id}))})),me)try{me(e,t)}catch(e){console.error("Error in onTaskSelect handler:",e)}},Ge=function(e){switch(ke(e),e){case E.MINUTE:Ne(30);break;case E.HOUR:Ne(40);break;case E.DAY:Ne(50);break;case E.WEEK:Ne(80);break;case E.MONTH:Ne(150);break;case E.QUARTER:Ne(180);break;case E.YEAR:Ne(200);break;default:Ne(150)}ve&&ve(e)};a((function(){Ge(_)}),[_]),a((function(){if(pe.current){var e=Math.max(.1,Math.min(1,re||.25));pe.current.style.setProperty("--rmg-animation-speed",e.toString())}}),[re,pe.current]);var Ze={fontSize:be||"inherit"},Je=z?"dark":"",$e=N(N({},{container:"",title:"",header:"",taskList:"",timeline:"",taskRow:"",todayMarker:"",tooltip:""}),W),et=!1!==Ke();return e.createElement("div",{ref:pe,className:"rmg-gantt-chart w-full border border-gantt-border bg-gantt-bg text-gantt-text rounded-xl shadow-lg overflow-hidden ".concat(Je," ").concat($e.container),style:N(N({},Ze),{"--gantt-unit-width":"".concat(Te,"px")}),"data-testid":"gantt-chart"},le?le({title:u,darkMode:z,viewMode:xe,onViewModeChange:Ge,showViewModeSelector:et}):e.createElement("div",{className:"p-6 border-b border-gantt-border bg-gantt-bg"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("h1",{className:"text-2xl font-bold text-gantt-text ".concat($e.title)},u),et&&e.createElement("div",{className:"flex space-x-2"},ce?ce({activeMode:xe,onChange:Ge,darkMode:z,availableModes:Ke()}):e.createElement(X,{activeMode:xe,onChange:Ge,darkMode:z,availableModes:Ke()})))),e.createElement("div",{className:"relative flex"},oe?oe({tasks:i,headerLabel:Y,onGroupClick:fe,viewMode:xe}):e.createElement(G,{tasks:i,headerLabel:Y,onGroupClick:fe,className:$e.taskList,viewMode:xe}),e.createElement("div",{ref:we,className:"flex-grow overflow-x-auto rmg-gantt-scroll-container ".concat(He?"rmg-auto-scrolling":"")},e.createElement("div",{className:"min-w-max"},ue?ue({timeUnits:qe,currentUnitIndex:Qe,viewMode:xe,locale:C,unitWidth:Te}):e.createElement(q,{months:qe,currentMonthIndex:Qe,locale:C,className:$e.timeline,viewMode:xe,unitWidth:Te}),e.createElement("div",{className:"relative"},m&&Qe>=0&&e.createElement(B,{currentMonthIndex:Qe,height:i.reduce((function(e,t){if(!t||!Array.isArray(t.tasks))return e+60;var r=Q.detectOverlaps(t.tasks,xe);return e+Math.max(60,40*r.length+20)}),0),label:v,dayOfMonth:g.getDate(),className:$e.todayMarker,viewMode:xe,unitWidth:Te}),i.map((function(t){return t&&t.id?e.createElement(Z,{key:"task-row-".concat(t.id,"-").concat(Fe),taskGroup:t,startDate:Ue,endDate:ze,totalMonths:Be,monthWidth:Te,editMode:T,showProgress:F,onTaskUpdate:Ve,onTaskClick:Xe,onTaskSelect:je,onAutoScrollChange:_e,className:$e.taskRow,tooltipClassName:$e.tooltip,viewMode:xe,scrollContainerRef:we,smoothDragging:J,movementThreshold:ee,animationSpeed:re,renderTask:ie,renderTooltip:se,getTaskColor:de}):null})))))))};!function(e,t){void 0===t&&(t={});var r=t.insertAt;if("undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(":root{--color-white:#fff;--color-black:#000;--color-gray-50:#f9fafb;--color-gray-100:#f3f4f6;--color-gray-200:#e5e7eb;--color-gray-300:#d1d5db;--color-gray-400:#9ca3af;--color-gray-500:#6b7280;--color-gray-600:#4b5563;--color-gray-700:#374151;--color-gray-800:#1f2937;--color-gray-900:#111827;--color-blue-50:#eff6ff;--color-blue-100:#dbeafe;--color-blue-500:#3b82f6;--color-blue-600:#2563eb;--color-blue-700:#1d4ed8;--color-red-500:#ef4444;--color-indigo-500:#6366f1;--color-indigo-600:#4f46e5;--color-gantt-bg:var(--color-white);--color-gantt-text:var(--color-gray-800);--color-gantt-border:var(--color-gray-200);--color-gantt-highlight:var(--color-blue-50);--color-gantt-marker:var(--color-red-500);--color-gantt-task:var(--color-blue-500);--color-gantt-task-text:var(--color-white);--color-border-gantt-border:var(--color-gray-200);--rmg-tooltip-bg:var(--color-white);--rmg-tooltip-text:var(--color-gray-800);--rmg-tooltip-border:var(--color-gray-200);--rmg-resize-handle:hsla(0,0%,100%,.3);--rmg-progress-bg:rgba(0,0,0,.2);--rmg-progress-fill:var(--color-white);--rmg-shadow:rgba(0,0,0,.1);--rmg-shadow-hover:rgba(0,0,0,.2);--rmg-shadow-drag:rgba(0,0,0,.3);--rmg-animation-speed:0.25;--rmg-task-hover-transition:transform 0.15s cubic-bezier(0.2,0,0.13,2),box-shadow 0.15s cubic-bezier(0.2,0,0.13,2);--rmg-task-drag-transition:transform 0.05s cubic-bezier(0.2,0,0.13,2),box-shadow 0.05s cubic-bezier(0.2,0,0.13,2);--rmg-task-release-transition:all 0.2s cubic-bezier(0.2,0,0.13,2);--scrollbar-track:rgba(229,231,235,.5);--scrollbar-thumb:rgba(156,163,175,.7);--scrollbar-thumb-hover:hsla(220,9%,46%,.8);--scrollbar-size:8px}.dark{--color-gantt-bg:var(--color-gray-800);--color-gantt-text:var(--color-gray-100);--color-gantt-border:var(--color-gray-700);--color-gantt-highlight:var(--color-gray-700);--color-gantt-marker:var(--color-red-500);--color-gantt-task:var(--color-indigo-600);--color-gantt-task-text:var(--color-white);--color-border-gantt-border:var(--color-gray-700);--rmg-tooltip-bg:var(--color-gray-800);--rmg-tooltip-text:var(--color-gray-100);--rmg-tooltip-border:var(--color-gray-700);--rmg-resize-handle:hsla(0,0%,100%,.4);--rmg-progress-bg:rgba(0,0,0,.3);--rmg-progress-fill:var(--color-gray-200);--rmg-shadow:rgba(0,0,0,.3);--rmg-shadow-hover:rgba(0,0,0,.4);--rmg-shadow-drag:rgba(0,0,0,.5);--scrollbar-track:rgba(55,65,81,.5);--scrollbar-thumb:rgba(75,85,99,.7);--scrollbar-thumb-hover:hsla(220,9%,46%,.8)}.rmg-gantt-chart{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:var(--color-gantt-bg);color:var(--color-gantt-text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Liberation Sans,Arial,sans-serif;font-size:16px;line-height:1.5;overflow:hidden;scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track);scrollbar-width:thin}[data-task-id]:not([data-dragging=true]){backface-visibility:hidden;transform:translateZ(0);transition:var(--rmg-task-hover-transition);will-change:transform,box-shadow}[data-task-id]:hover{box-shadow:0 3px 10px var(--rmg-shadow-hover);transform:translateY(-1px);z-index:20}[data-task-id][data-dragging=true]{box-shadow:0 5px 15px var(--rmg-shadow-drag);cursor:grabbing;opacity:.95;transition:var(--rmg-task-drag-transition);z-index:100}.rmg-task-tooltip{opacity:0;pointer-events:none;transform:translateY(5px);transition:opacity .2s ease,transform .2s ease}.rmg-task-tooltip.visible{opacity:1;transform:translateY(0)}.rmg-task-progress{background-color:var(--rmg-progress-bg);border-radius:4px;bottom:3px;height:3px;left:3px;overflow:hidden;position:absolute;right:3px}.rmg-task-progress-fill{background-color:var(--rmg-progress-fill);border-radius:4px;height:100%;transition:width .3s ease-out}.rmg-timeline-unit:hover{background-color:var(--rmg-highlight);transition:background-color .15s ease}.rmg-resize-handle{opacity:0;transition:opacity .15s ease}[data-task-id]:hover .rmg-resize-handle{opacity:1}.rmg-today-marker{animation:pulse 3s ease-in-out infinite}.rmg-gantt-scroll-container{scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track);scrollbar-width:thin}.rmg-gantt-chart::-webkit-scrollbar,.rmg-gantt-scroll-container::-webkit-scrollbar{height:var(--scrollbar-size);width:var(--scrollbar-size)}.rmg-gantt-chart::-webkit-scrollbar-track,.rmg-gantt-scroll-container::-webkit-scrollbar-track{background:var(--scrollbar-track);border-radius:12px}.rmg-gantt-chart::-webkit-scrollbar-thumb,.rmg-gantt-scroll-container::-webkit-scrollbar-thumb{background-clip:content-box;background-color:var(--scrollbar-thumb);border:2px solid transparent;border-radius:12px}.rmg-gantt-chart::-webkit-scrollbar-thumb:hover,.rmg-gantt-scroll-container::-webkit-scrollbar-thumb:hover{background-color:var(--scrollbar-thumb-hover)}.rmg-gantt-chart::-webkit-scrollbar-corner,.rmg-gantt-scroll-container::-webkit-scrollbar-corner{background-color:transparent}.rmg-gantt-scroll-container:focus{box-shadow:inset 0 0 0 2px var(--color-blue-500);outline:none}@keyframes pulse{0%{opacity:.8}50%{opacity:1}to{opacity:.8}}@keyframes update-flash{0%{box-shadow:0 0 0 2px rgba(79,70,229,.2)}50%{box-shadow:0 0 0 4px rgba(79,70,229,.4)}to{box-shadow:0 0 0 2px rgba(79,70,229,0)}}.rmg-task-updated{animation:update-flash 1s cubic-bezier(.2,0,.13,2)}.rmg-gantt-scroll-container{scroll-behavior:smooth}.rmg-auto-scrolling{scroll-behavior:auto!important}[data-task-id]{border-radius:4px;box-shadow:0 1px 3px var(--rmg-shadow)}[data-task-id] .rmg-progress-bar{background-color:var(--rmg-progress-bg);border-radius:4px;bottom:3px;height:2px;left:3px;overflow:hidden;position:absolute;right:3px;transition:height .15s ease-out}[data-task-id]:hover .rmg-progress-bar{height:3px}.rmg-progress-fill{background-color:var(--rmg-progress-fill);border-radius:4px;height:100%;position:relative;transition:width .15s ease-out}.rmg-progress-handle{background-color:#fff;border:2px solid var(--rmg-task);border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.2);cursor:ew-resize;height:10px;opacity:0;position:absolute;right:0;top:50%;transform:translate(50%,-50%);transition:opacity .2s ease,transform .15s ease,box-shadow .15s ease;width:10px;z-index:10}[data-task-id]:hover .rmg-progress-handle{opacity:1}.rmg-progress-handle.dragging,.rmg-progress-handle:hover{box-shadow:0 2px 5px rgba(0,0,0,.3);transform:translate(50%,-50%) scale(1.2)}.rmg-progress-tooltip{background-color:var(--rmg-tooltip-bg);border-radius:3px;color:var(--rmg-tooltip-text);font-size:10px;opacity:0;padding:2px 5px;pointer-events:none;position:absolute;right:0;top:-20px;transform:translateY(5px);transition:opacity .2s ease,transform .2s ease;white-space:nowrap}.rmg-progress-handle.dragging+.rmg-progress-tooltip,.rmg-progress-handle:hover+.rmg-progress-tooltip{opacity:1;transform:translateY(0)}@media (max-width:640px){.w-40{width:6rem}}");var $=function(t){return e.createElement(J,N({},t))},ee=o({darkMode:!1}),te=function(t){var r=t.children,a=t.darkMode,n=void 0!==a&&a;return e.createElement(ee.Provider,{value:{darkMode:n}},r)},re=function(){return i(ee)};export{Q as CollisionService,T as DateDisplayFormat,J as GanttChart,$ as GanttChartWithStyles,te as GanttThemeProvider,j as TaskItem,G as TaskList,Z as TaskRow,_ as TaskService,q as Timeline,B as TodayMarker,V as Tooltip,E as ViewMode,X as ViewModeSelector,L as calculateDuration,W as calculateTaskPosition,$ as default,K as detectTaskOverlaps,P as findEarliestDate,I as findLatestDate,O as formatDate,C as formatDateRange,F as formatMonth,z as getDaysInMonth,S as getDuration,U as getMonthsBetween,re as useGanttTheme};
//# sourceMappingURL=index.esm.js.map
