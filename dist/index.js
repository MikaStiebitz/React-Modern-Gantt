"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,r=require("react"),a=require("date-fns"),o=function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function n(e,t,r){if(r||2===arguments.length)for(var a,o=0,n=t.length;o<n;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,exports.ViewMode=void 0,(e=exports.ViewMode||(exports.ViewMode={})).MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.QUARTER="quarter",e.YEAR="year",exports.DateDisplayFormat=void 0,(t=exports.DateDisplayFormat||(exports.DateDisplayFormat={})).MONTH_YEAR="month-year",t.FULL_DATE="full-date",t.SHORT_DATE="short-date";var i={colors:{background:"#ffffff",text:"#1f2937",border:"#e5e7eb",highlight:"#eff6ff",task:{background:"#3b82f6",text:"#ffffff",border:"#2563eb",progress:"rgba(0, 0, 0, 0.2)",progressFill:"#ffffff"},timeline:{background:"#ffffff",headerBackground:"#f9fafb",headerText:"#1f2937",marker:"#ef4444"},scrollbar:{track:"rgba(229, 231, 235, 0.5)",thumb:"rgba(156, 163, 175, 0.7)",thumbHover:"rgba(107, 114, 128, 0.8)"}},sizes:{rowHeight:40,taskHeight:32,unitWidth:{minute:30,hour:40,day:50,week:80,month:150,quarter:180,year:200},borderRadius:"4px",fontSize:"0.875rem"},animation:{speed:.25,easing:"cubic-bezier(0.2, 0, 0.13, 2)"}},s=o(o({},i),{colors:{background:"#1f2937",text:"#f3f4f6",border:"#374151",highlight:"#2d3748",task:{background:"#4f46e5",text:"#ffffff",border:"#6366f1",progress:"rgba(0, 0, 0, 0.3)",progressFill:"#e5e7eb"},timeline:{background:"#1f2937",headerBackground:"#111827",headerText:"#e5e7eb",marker:"#ef4444"},scrollbar:{track:"rgba(55, 65, 81, 0.5)",thumb:"rgba(75, 85, 99, 0.7)",thumbHover:"rgba(107, 114, 128, 0.8)"}}});function c(e,t){return void 0===t&&(t=!0),"\n".concat(t?":root":""," {\n  /* Base colors */\n  --rmg-bg-color: ").concat(e.colors.background,";\n  --rmg-text-color: ").concat(e.colors.text,";\n  --rmg-border-color: ").concat(e.colors.border,";\n  --rmg-highlight-color: ").concat(e.colors.highlight,";\n\n  /* Task colors */\n  --rmg-task-bg-color: ").concat(e.colors.task.background,";\n  --rmg-task-text-color: ").concat(e.colors.task.text,";\n  --rmg-task-border-color: ").concat(e.colors.task.border,";\n  --rmg-task-progress-color: ").concat(e.colors.task.progress,";\n  --rmg-task-progress-fill-color: ").concat(e.colors.task.progressFill,";\n\n  /* Timeline colors */\n  --rmg-timeline-bg-color: ").concat(e.colors.timeline.background,";\n  --rmg-timeline-header-bg-color: ").concat(e.colors.timeline.headerBackground,";\n  --rmg-timeline-header-text-color: ").concat(e.colors.timeline.headerText,";\n  --rmg-timeline-marker-color: ").concat(e.colors.timeline.marker,";\n\n  /* Scrollbar colors */\n  --rmg-scrollbar-track-color: ").concat(e.colors.scrollbar.track,";\n  --rmg-scrollbar-thumb-color: ").concat(e.colors.scrollbar.thumb,";\n  --rmg-scrollbar-thumb-hover-color: ").concat(e.colors.scrollbar.thumbHover,";\n\n  /* Sizes */\n  --rmg-row-height: ").concat(e.sizes.rowHeight,"px;\n  --rmg-task-height: ").concat(e.sizes.taskHeight,"px;\n  --rmg-border-radius: ").concat(e.sizes.borderRadius,";\n  --rmg-font-size: ").concat(e.sizes.fontSize,";\n\n  /* Unit widths by view mode */\n  --rmg-unit-width-minute: ").concat(e.sizes.unitWidth.minute,"px;\n  --rmg-unit-width-hour: ").concat(e.sizes.unitWidth.hour,"px;\n  --rmg-unit-width-day: ").concat(e.sizes.unitWidth.day,"px;\n  --rmg-unit-width-week: ").concat(e.sizes.unitWidth.week,"px;\n  --rmg-unit-width-month: ").concat(e.sizes.unitWidth.month,"px;\n  --rmg-unit-width-quarter: ").concat(e.sizes.unitWidth.quarter,"px;\n  --rmg-unit-width-year: ").concat(e.sizes.unitWidth.year,"px;\n\n  /* Animation */\n  --rmg-animation-speed: ").concat(e.animation.speed,";\n  --rmg-animation-easing: ").concat(e.animation.easing,";\n}\n")}function l(e,t,r){if(void 0===t&&(t=exports.DateDisplayFormat.FULL_DATE),void 0===r&&(r="default"),!(e instanceof Date)||isNaN(e.getTime()))return"Invalid date";switch(t){case exports.DateDisplayFormat.MONTH_YEAR:return e.toLocaleString(r,{month:"short",year:"2-digit"});case exports.DateDisplayFormat.SHORT_DATE:return e.toLocaleString(r,{month:"short",day:"numeric"});case exports.DateDisplayFormat.FULL_DATE:default:return e.toLocaleString(r,{month:"short",day:"numeric",year:"numeric"})}}function d(e,t){var r=[];if(!(e instanceof Date&&t instanceof Date))return[new Date];for(var a=e.getFullYear(),o=e.getMonth(),n=t.getFullYear(),i=t.getMonth(),s=a;s<=n;s++)for(var c=s===n?i:11,l=s===a?o:0;l<=c;l++)r.push(new Date(s,l,1));return r}function u(e,t,r){void 0===r&&(r=exports.ViewMode.MONTH);try{if(!(e instanceof Date)||!(t instanceof Date)||isNaN(e.getTime())||isNaN(t.getTime()))return{value:0,unit:"days"};var o=e<t?e:t,n=e<t?t:e;switch(r){case exports.ViewMode.DAY:var i=a.differenceInDays(n,o)+1;return{value:i,unit:1===i?"day":"days"};case exports.ViewMode.WEEK:var s=a.differenceInWeeks(n,o)+1;return{value:s,unit:1===s?"week":"weeks"};case exports.ViewMode.MONTH:var c=a.differenceInMonths(n,o)+1;return{value:c,unit:1===c?"month":"months"};case exports.ViewMode.QUARTER:var l=a.differenceInQuarters(n,o)+1;return{value:l,unit:1===l?"quarter":"quarters"};case exports.ViewMode.YEAR:var d=a.differenceInYears(n,o)+1;return{value:d,unit:1===d?"year":"years"};default:var u=a.differenceInDays(n,o)+1;return{value:u,unit:1===u?"day":"days"}}}catch(e){return console.error("Error calculating duration:",e),{value:0,unit:"days"}}}function g(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,r=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.startDate instanceof Date&&(r?e.startDate<t&&(t=new Date(e.startDate)):(t=new Date(e.startDate),r=!0))}))})),!r){var a=new Date;return new Date(a.getFullYear(),a.getMonth()-1,1)}return new Date(t.getFullYear(),t.getMonth(),1)}function f(e){if(!Array.isArray(e)||0===e.length)return new Date;var t=new Date,r=!1;if(e.forEach((function(e){e&&Array.isArray(e.tasks)&&e.tasks.forEach((function(e){e&&e.endDate instanceof Date&&(r?e.endDate>t&&(t=new Date(e.endDate)):(t=new Date(e.endDate),r=!0))}))})),!r){var a=new Date;return new Date(a.getFullYear(),a.getMonth()+2,0)}return new Date(t.getFullYear(),t.getMonth()+1,0)}c(i),c(s);var m=function(e){var t=e.months,o=e.currentMonthIndex,n=(e.locale,e.className),i=void 0===n?"":n,s=e.viewMode,c=void 0===s?exports.ViewMode.MONTH:s,l=e.unitWidth,d=void 0===l?150:l,u=[exports.ViewMode.MINUTE,exports.ViewMode.HOUR,exports.ViewMode.DAY,exports.ViewMode.WEEK].includes(c),g=function(){if(![exports.ViewMode.MINUTE,exports.ViewMode.HOUR,exports.ViewMode.DAY,exports.ViewMode.WEEK].includes(c)||0===t.length)return[];var e=[];if(c===exports.ViewMode.MINUTE){var r=new Date(t[0]);r.setMinutes(0,0,0);var a=0;return t.forEach((function(t){t.getHours()===r.getHours()&&t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()?a+=1:(e.push({date:r,span:a}),(r=new Date(t)).setMinutes(0,0,0),a=1)})),a>0&&e.push({date:r,span:a}),e}if(c===exports.ViewMode.HOUR){var o=new Date(t[0]);o.setHours(0,0,0,0);var n=0;return t.forEach((function(t){t.getDate()===o.getDate()&&t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear()?n+=1:(e.push({date:o,span:n}),(o=new Date(t)).setHours(0,0,0,0),n=1)})),n>0&&e.push({date:o,span:n}),e}var i=new Date(t[0]),s=0;return t.forEach((function(t){t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()?s+=1:(e.push({date:i,span:s}),i=new Date(t),s=1)})),s>0&&e.push({date:i,span:s}),e}();return r.createElement("div",{className:"rmg-timeline ".concat(i),style:{"--gantt-unit-width":"".concat(d,"px")}},u&&r.createElement("div",{className:"flex border-b border-gantt-border"},g.map((function(e,t){return r.createElement("div",{key:"higher-level-".concat(t),className:"flex-shrink-0 p-2 font-semibold text-center text-gray-800 dark:text-gray-200 border-r border-gray-200 dark:border-gray-700 h-10",style:{width:"".concat(e.span*d,"px")},"data-timeunit-higher":e.date.toISOString()},function(e){if(!(e instanceof Date))return"";switch(c){case exports.ViewMode.MINUTE:return a.format(e,"HH:00",{locale:void 0});case exports.ViewMode.HOUR:return a.format(e,"MMM d",{locale:void 0});case exports.ViewMode.DAY:case exports.ViewMode.WEEK:default:return a.format(e,"MMM yyyy",{locale:void 0})}}(e.date))}))),r.createElement("div",{className:"flex border-b border-gantt-border"},t.map((function(e,t){return r.createElement("div",{key:"timeunit-".concat(t),className:"".concat("w-[var(--gantt-unit-width)]"," flex-shrink-0 p-2 font-semibold text-center text-gantt-text ").concat(t===o?"bg-gantt-highlight":""," ").concat(u?"border-r border-gantt-border":""," h-10"),"data-timeunit":e.toISOString()},function(e){if(!(e instanceof Date&&a.isValid(e)))return"";switch(c){case exports.ViewMode.MINUTE:return a.format(e,"HH:mm",{locale:void 0});case exports.ViewMode.HOUR:return a.format(e,"HH:00",{locale:void 0});case exports.ViewMode.DAY:return a.format(e,"d",{locale:void 0});case exports.ViewMode.WEEK:var t=a.getWeek(e);return"W".concat(t);case exports.ViewMode.MONTH:return a.format(e,"MMM yyyy",{locale:void 0});case exports.ViewMode.QUARTER:var r=Math.floor(e.getMonth()/3)+1;return"Q".concat(r," ").concat(e.getFullYear());case exports.ViewMode.YEAR:return e.getFullYear().toString();default:return a.format(e,"MMM yyyy",{locale:void 0})}}(e))}))))},h=function(e){var t=e.currentMonthIndex,a=e.height,o=e.markerClass,n=void 0===o?"bg-red-500":o,i=e.label,s=void 0===i?"Today":i,c=e.dayOfMonth,l=e.className,d=void 0===l?"":l,u=e.viewMode,g=void 0===u?exports.ViewMode.MONTH:u,f=e.unitWidth,m=void 0===f?150:f;if(t<0)return null;var h=function(){var e=new Date,r=c||e.getDate();switch(g){case exports.ViewMode.MINUTE:var a=e.getMinutes(),o=e.getSeconds();return t*m+m*((a+o/60)/60);case exports.ViewMode.HOUR:var n=e.getMinutes();return t*m+m*(n/60);case exports.ViewMode.DAY:return t*m+m/2;case exports.ViewMode.WEEK:var i=e.getDay();return t*m+m*((i+7)%7/6);case exports.ViewMode.MONTH:var s=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return t*m+m*((r-1)/s);case exports.ViewMode.QUARTER:var l=e.getMonth()%3;return t*m+m*(l/3);case exports.ViewMode.YEAR:var d=e.getMonth();return t*m+m*(d/12);default:return t*m+m/2}}(),p=Math.max(100,a);return r.createElement("div",{className:"absolute top-0 w-px ".concat(n," z-10 ").concat(d),style:{left:"".concat(h,"px"),height:"".concat(p,"px"),boxShadow:"0 0 4px rgba(239, 68, 68, 0.5)"},"data-testid":"today-marker"},r.createElement("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 ".concat(n," px-1.5 py-0.5 rounded text-xs text-white dark:text-white whitespace-nowrap shadow-sm")},s))},p=function(){function e(){}return e.detectOverlaps=function(e,t){var r=this;if(void 0===t&&(t=exports.ViewMode.MONTH),!Array.isArray(e)||0===e.length)return[];var a=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===a.length)return[];var o=n([],a,!0).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()})),i=[];return o.forEach((function(e){for(var a=!1,o=0;o<i.length;o++){if(!i[o].some((function(a){return r.tasksVisuallyOverlap(e,a,t)}))){i[o].push(e),a=!0;break}}a||i.push([e])})),i},e.tasksVisuallyOverlap=function(e,t,r){if(void 0===r&&(r=exports.ViewMode.MONTH),!(e&&t&&e.id&&t.id))return!1;if(e.id===t.id)return!1;if(!(e.startDate instanceof Date&&e.endDate instanceof Date&&t.startDate instanceof Date&&t.endDate instanceof Date))return!1;var a=e.startDate.getTime(),o=e.endDate.getTime(),n=t.startDate.getTime(),i=t.endDate.getTime(),s=this.getCollisionBufferByViewMode(r);return a<i&&o>n||Math.abs(a-n)<2*s||Math.abs(o-i)<2*s},e.getCollisionBufferByViewMode=function(e){var t=36e5,r=24*t;switch(e){case exports.ViewMode.MINUTE:return 3e4;case exports.ViewMode.HOUR:return 9e5;case exports.ViewMode.DAY:return t;case exports.ViewMode.WEEK:return 4*t;case exports.ViewMode.MONTH:return 12*t;case exports.ViewMode.QUARTER:return r;case exports.ViewMode.YEAR:return 2*r;default:return 12*t}},e.wouldCollide=function(e,t,r,a){var o=this;return void 0===r&&(r=exports.ViewMode.MONTH),!(!e||!Array.isArray(t))&&t.some((function(t){return t.id!==e.id&&t.id!==a&&o.tasksVisuallyOverlap(e,t,r)}))},e.getPreviewArrangement=function(e,t,r){if(void 0===r&&(r=exports.ViewMode.MONTH),!e||!Array.isArray(t))return this.detectOverlaps(t,r);try{var a=t.map((function(t){return t.id===e.id?e:t}));return this.detectOverlaps(a,r)}catch(e){return console.error("Error in getPreviewArrangement:",e),this.detectOverlaps(t,r)}},e}(),v=function(){function e(){}return e.calculateDatesFromPosition=function(e,t,r,o,n,i,s){void 0===s&&(s=exports.ViewMode.MONTH);try{var c=isNaN(e)?0:e,l=isNaN(t)||t<20?20:t,d=r.getTime(),u=(o.getTime()-d)/(n*i),g=c*u,f=l*u,m=new Date(d+g),h=new Date(d+g+f);switch(s){case exports.ViewMode.MINUTE:m.setSeconds(0,0),h.setSeconds(59,999);break;case exports.ViewMode.HOUR:m.setMinutes(0,0,0),h.setMinutes(59,59,999);break;case exports.ViewMode.DAY:var p=Math.round(e/i),v=Math.max(1,Math.round(t/i)),w=new Date(r);w.setHours(0,0,0,0),(m=new Date(w)).setDate(w.getDate()+p),m.setHours(0,0,0,0),(h=new Date(m)).setDate(m.getDate()+v-1),h.setHours(23,59,59,999);break;default:m=a.startOfDay(m),h=a.endOfDay(h)}return m<r&&(m=new Date(r)),h>o&&(h=new Date(o)),{newStartDate:m,newEndDate:h}}catch(e){return console.error("Error calculating dates from position:",e),{newStartDate:new Date(r),newEndDate:new Date(o)}}},e.createUpdatedTask=function(e,t,r){return e?o(o({},e),{startDate:new Date(t),endDate:new Date(r)}):e},e.calculateTaskPixelPosition=function(e,t,r,a,o,n){var i;void 0===n&&(n=exports.ViewMode.MONTH);try{if(!(e&&e.startDate instanceof Date&&e.endDate instanceof Date))return console.warn("Invalid task data in calculateTaskPixelPosition:",e),{leftPx:0,widthPx:20};var s=t.getTime(),c=r.getTime(),l=Math.max(e.startDate.getTime(),t.getTime()),d=Math.min(e.endDate.getTime(),r.getTime());if(n===exports.ViewMode.MINUTE||n===exports.ViewMode.HOUR||n===exports.ViewMode.DAY){var u=void 0,g=void 0;if(n===exports.ViewMode.MINUTE)u=s,g=c;else if(n===exports.ViewMode.HOUR){var f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime(),m=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),59,59,999).getTime();u=f,g=m}else{var h=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),p=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999).getTime();u=h,g=p}if(s=u,c=g,n===exports.ViewMode.DAY){var v=new Date(new Date(l).getFullYear(),new Date(l).getMonth(),new Date(l).getDate(),0,0,0,0).getTime(),w=new Date(new Date(d).getFullYear(),new Date(d).getMonth(),new Date(d).getDate(),23,59,59,999).getTime();l=v,d=w}}var x=c-s;if(x<=0)return{leftPx:0,widthPx:20};var b=a*o,M=(l-s)/x*b,D=(d-l)/x*b;n===exports.ViewMode.MINUTE?(M=Math.round(M),D=Math.max(10,Math.round(D))):n===exports.ViewMode.HOUR?(M=Math.round(M),D=Math.max(15,Math.round(D))):n===exports.ViewMode.DAY&&(M=Math.round(M/o)*o,D=Math.max(o,Math.round(D/o)*o));var k=((i={})[exports.ViewMode.MINUTE]=10,i[exports.ViewMode.HOUR]=15,i[exports.ViewMode.DAY]=20,i[exports.ViewMode.WEEK]=20,i[exports.ViewMode.MONTH]=20,i[exports.ViewMode.QUARTER]=30,i[exports.ViewMode.YEAR]=40,i)[n]||20;D=Math.max(k,D);var y=b-M;return{leftPx:M,widthPx:D=Math.min(y,D)}}catch(e){return console.error("Error calculating task position:",e),{leftPx:0,widthPx:20}}},e.getLiveDatesFromElement=function(e,t,r,a,o,n){void 0===n&&(n=exports.ViewMode.MONTH);try{if(!e)return{startDate:new Date(t),endDate:new Date(r)};var i=parseFloat(e.style.left||"0"),s=parseFloat(e.style.width||"0"),c=this.calculateDatesFromPosition(i,s,t,r,a,o,n);return{startDate:c.newStartDate,endDate:c.newEndDate}}catch(e){return console.error("Error getting live dates:",e),{startDate:new Date(t),endDate:new Date(r)}}},e.datesOverlap=function(e,t,r,o){try{return e instanceof Date&&t instanceof Date&&r instanceof Date&&o instanceof Date&&(a.isWithinInterval(e,{start:r,end:o})||a.isWithinInterval(t,{start:r,end:o})||a.isWithinInterval(r,{start:e,end:t})||a.isWithinInterval(o,{start:e,end:t}))}catch(e){return console.error("Error checking dates overlap:",e),!1}},e}(),w=function(e){var t=e.task,o=e.position,n=e.dragType,i=e.taskId,s=e.startDate,c=e.endDate,l=e.totalMonths,d=e.monthWidth,g=e.showProgress,f=void 0!==g&&g,m=e.instanceId,h=e.className,p=void 0===h?"":h,w=e.viewMode,x=void 0===w?exports.ViewMode.MONTH:w,b=e.renderTooltip,M=t.startDate,D=t.endDate;try{var k=i||t.id,y=document.querySelector('[data-task-id="'.concat(k,'"][data-instance-id="').concat(m,'"]'));if(y&&(n||y.style.left||y.style.width)){var E=v.getLiveDatesFromElement(y,s,c,l,d,x);M=E.startDate,D=E.endDate}}catch(e){console.error("Error calculating live dates for tooltip:",e)}var T=u(M,D,x),V=function(e){return e instanceof Date&&!isNaN(e.getTime())?x===exports.ViewMode.DAY?a.format(e,"EEE, MMM d, yyyy"):a.format(e,"MMM d, yyyy"):"Invalid date"},N=function(){if(!n)return null;switch(n){case"move":return"Moving task...";case"resize-left":return"Adjusting start date...";case"resize-right":return"Adjusting end date...";default:return null}}();return b?r.createElement("div",{className:"rmg-task-tooltip absolute z-20 ".concat(p),style:{left:"".concat(o.x,"px"),top:"".concat(o.y-40,"px")}},b({task:t,position:o,dragType:n,startDate:M,endDate:D,viewMode:x})):r.createElement("div",{className:"rmg-task-tooltip absolute z-20 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-700 rounded-md shadow-md dark:shadow-gray-900 p-2 text-xs select-none ".concat(p),style:{left:"".concat(o.x,"px"),top:"".concat(o.y-40,"px"),minWidth:"200px"}},r.createElement("div",{className:"font-bold mb-1"},t.name||"Unnamed Task"),N&&r.createElement("div",{className:"text-xs text-blue-500 dark:text-blue-400 mb-1 italic"},N),r.createElement("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1"},r.createElement("div",{className:"font-semibold"},"Start:"),r.createElement("div",null,V(M)),r.createElement("div",{className:"font-semibold"},"End:"),r.createElement("div",null,V(D)),r.createElement("div",{className:"font-semibold"},"Duration:"),r.createElement("div",null,T.value," ",T.unit),f&&"number"==typeof t.percent&&r.createElement(r.Fragment,null,r.createElement("div",{className:"font-semibold"},"Progress:"),r.createElement("div",null,t.percent,"%")),t.dependencies&&t.dependencies.length>0&&r.createElement(r.Fragment,null,r.createElement("div",{className:"font-semibold"},"Dependencies:"),r.createElement("div",null,t.dependencies.join(", ")))))},x=function(e){var t=e.activeMode,a=e.onChange,o=e.darkMode,n=e.availableModes,i=[{id:exports.ViewMode.MINUTE,label:"Minute"},{id:exports.ViewMode.HOUR,label:"Hour"},{id:exports.ViewMode.DAY,label:"Day"},{id:exports.ViewMode.WEEK,label:"Week"},{id:exports.ViewMode.MONTH,label:"Month"},{id:exports.ViewMode.QUARTER,label:"Quarter"},{id:exports.ViewMode.YEAR,label:"Year"}],s=[exports.ViewMode.DAY,exports.ViewMode.WEEK,exports.ViewMode.MONTH,exports.ViewMode.QUARTER,exports.ViewMode.YEAR],c=n?i.filter((function(e){return n.includes(e.id)})):i.filter((function(e){return s.includes(e.id)})),l=r.useRef(null),d=r.useState({left:"0px",width:"0px"}),u=d[0],g=d[1];r.useEffect((function(){var e=function(){if(l.current){var e=l.current.querySelector('[aria-selected="true"]');if(e){var t=e,r=t.offsetLeft,a=t.offsetWidth;g({left:"".concat(r,"px"),width:"".concat(a,"px")})}}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[t]);var f="\n    relative inline-flex rounded-full p-0.5\n    ".concat(o?"bg-gray-800/80":"bg-gray-100/90","\n    transition-all duration-300 ease-in-out shadow-sm dark:shadow-gray-900\n    border ").concat(o?"border-gray-700":"border-gray-200","\n    ");return r.createElement("div",{className:"relative flex items-center"},r.createElement("div",{ref:l,className:f,role:"tablist","aria-label":"View mode options"},r.createElement("span",{className:"\n                        absolute z-0 inset-0.5 rounded-full\n                        transition-all duration-300 ease-out transform\n                        ".concat(o?"bg-indigo-600":"bg-indigo-500","\n                    "),style:u,"aria-hidden":"true"}),c.map((function(e){return r.createElement("button",{key:e.id,role:"tab","aria-selected":t===e.id,"aria-controls":"panel-".concat(e.id),className:"".concat((n=t===e.id,"\n    relative z-10 px-3 py-1 text-xs font-medium\n    transition-all duration-200 ease-in-out\n    ".concat(n?"text-white":o?"text-gray-400 hover:text-gray-200":"text-gray-500 hover:text-gray-700","\n    focus:outline-none border-none\n    "))," rounded-full"),onClick:function(){return a(e.id)}},e.label);var n}))))},b=function(e){var t=e.task,a=e.leftPx,n=e.widthPx,i=e.topPx,s=e.isHovered,c=e.isDragging,l=e.editMode,d=e.showProgress,u=void 0!==d&&d,g=e.instanceId,f=e.renderTask,m=e.getTaskColor,h=e.onMouseDown,p=e.onMouseEnter,v=e.onMouseLeave,w=e.onClick,x=e.onProgressUpdate,b=(s||c)&&l,M=r.useRef(null),D=r.useRef(null),k=r.useState(!1),y=k[0],E=k[1],T=r.useState(t.percent||0),V=T[0],N=T[1];if(!t||!t.id)return null;var A=t.color||"bg-gantt-task",R="",Y="text-gantt-task-text";if(m){var H=m({task:t,isHovered:s,isDragging:c});A=H.backgroundColor,R=H.borderColor||"",Y=H.textColor||Y}var F=r.useCallback((function(e){if(y&&D.current&&M.current){var t=M.current.getBoundingClientRect(),r=t.width-2,a=Math.max(0,Math.min(r,e.clientX-t.left)),o=Math.round(a/r*100);N(Math.max(0,Math.min(100,o))),D.current&&D.current.firstChild&&(D.current.firstChild.style.width="".concat(Math.max(0,Math.min(100,o)),"%"))}}),[y]),S=r.useCallback((function(){y&&(E(!1),document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",S),D.current&&(D.current.style.transition=""),x&&V!==t.percent&&x(t,V))}),[y,x,V,t]);if(r.useEffect((function(){N(t.percent||0)}),[t.percent]),r.useEffect((function(){return function(){document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",S)}}),[F,S]),f){var O=f({task:t,leftPx:a,widthPx:n,topPx:i,isHovered:s,isDragging:c,editMode:l,showProgress:u});return r.createElement("div",{ref:M,className:"absolute",style:{left:"".concat(Math.max(0,a),"px"),width:"".concat(Math.max(20,n),"px"),top:"".concat(i,"px")},onClick:function(e){return w(e,t)},onMouseDown:function(e){return h(e,t,"move")},onMouseEnter:function(e){return p(e,t)},onMouseLeave:v,"data-testid":"task-".concat(t.id),"data-task-id":t.id,"data-instance-id":g,"data-dragging":c?"true":"false"},O)}var U=A.startsWith("bg-")?{}:{backgroundColor:A},C=A.startsWith("bg-")?A:"",I=R?R.startsWith("border-")?{}:{borderColor:R,borderWidth:"1px"}:{},z=R&&R.startsWith("border-")?R:"";return r.createElement("div",{ref:M,className:"absolute h-8 rounded ".concat(C," ").concat(z," ").concat(Y," flex items-center px-2 text-xs font-medium text-gantt-task-text ").concat(l?"cursor-move":"cursor-pointer"," ").concat(c?"shadow-lg dark:shadow-gray-900":""),style:o(o(o({left:"".concat(Math.max(0,a),"px"),width:"".concat(Math.max(20,n),"px"),top:"".concat(i,"px")},U),I),{willChange:c?"transform, left, width":"auto"}),onClick:function(e){return w(e,t)},onMouseDown:function(e){return h(e,t,"move")},onMouseEnter:function(e){return p(e,t)},onMouseLeave:v,"data-testid":"task-".concat(t.id),"data-task-id":t.id,"data-instance-id":g,"data-dragging":c?"true":"false"},b&&r.createElement("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-white dark:bg-gray-600 bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-l rmg-resize-handle",onMouseDown:function(e){e.stopPropagation(),h(e,t,"resize-left")}}),r.createElement("div",{className:"truncate select-none"},t.name||"Unnamed Task"),u&&"number"==typeof V&&r.createElement("div",{ref:D,className:"absolute bottom-1 left-1 right-1 h-1 bg-black dark:bg-white bg-opacity-20 dark:bg-opacity-30 rounded-full overflow-hidden ".concat(l?"cursor-pointer":""),onClick:function(e){if(l&&u&&x){e.stopPropagation();var r=e.currentTarget.clientWidth,a=e.nativeEvent.offsetX,o=Math.round(a/r*100);N(o),x(t,o)}}},r.createElement("div",{className:"h-full bg-white dark:bg-gray-200 rounded-full relative",style:{width:"".concat(V,"%")}},l&&(s||y)&&r.createElement("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 h-4 w-4 rounded-full bg-white dark:bg-gray-300 border-2 ".concat(R||A.startsWith("bg-")?z||C:"border-blue-500 dark:border-blue-400"," cursor-ew-resize shadow-sm hover:shadow-md transition-shadow ").concat(y?"scale-110":""),onMouseDown:function(e){l&&u&&(e.stopPropagation(),e.preventDefault(),E(!0),D.current&&(D.current.style.transition="width 0.05s ease-out"),document.addEventListener("mousemove",F),document.addEventListener("mouseup",S))}}))),b&&r.createElement("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-white dark:bg-gray-600 bg-opacity-30 dark:bg-opacity-40 cursor-ew-resize rounded-r rmg-resize-handle",onMouseDown:function(e){e.stopPropagation(),h(e,t,"resize-right")}}))},M=function(e){var t=e.tasks,a=void 0===t?[]:t,o=e.headerLabel,n=void 0===o?"Resources":o,i=e.showIcon,s=void 0!==i&&i,c=e.showTaskCount,l=void 0!==c&&c,d=e.showDescription,u=void 0===d||d,g=e.rowHeight,f=void 0===g?40:g,m=e.className,h=void 0===m?"":m,v=e.onGroupClick,w=e.viewMode,x=Array.isArray(a)?a:[],b=w===exports.ViewMode.DAY||w===exports.ViewMode.WEEK;return r.createElement("div",{className:"rmg-task-list w-40 flex-shrink-0 z-10 bg-gantt-bg shadow-sm ".concat(h)},b?r.createElement(r.Fragment,null,r.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"}),r.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"},n)):r.createElement("div",{className:"p-2 font-semibold text-gantt-text border-r border-b border-gantt-border h-10"},n),x.map((function(e){if(!e)return null;var t=function(e){if(!e.tasks||!Array.isArray(e.tasks))return 60;var t=p.detectOverlaps(e.tasks,w);return Math.max(60,t.length*f+20)}(e);return r.createElement("div",{key:"task-group-".concat(e.id||"unknown"),className:"p-2 border-r border-b border-gray-200 dark:border-gray-700 font-medium text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",style:{height:"".concat(t,"px")},onClick:function(){return t=e,void(v&&v(t));var t},"data-testid":"task-group-".concat(e.id||"unknown")},r.createElement("div",{className:"flex items-center"},s&&e.icon&&r.createElement("span",{className:"mr-2",dangerouslySetInnerHTML:{__html:e.icon}}),r.createElement("div",{className:"font-medium truncate"},e.name||"Unnamed")),u&&e.description&&r.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate"},e.description),l&&e.tasks&&e.tasks.length>0&&r.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},e.tasks.length," ",1===e.tasks.length?"task":"tasks"))})))},D=function(e){var t=e.taskGroup,a=e.startDate,n=e.endDate,i=e.totalMonths,s=e.monthWidth,c=e.editMode,l=void 0===c||c,d=e.showProgress,u=void 0!==d&&d,g=e.className,f=void 0===g?"":g,m=e.tooltipClassName,h=void 0===m?"":m,x=e.onTaskUpdate,M=e.onTaskClick,D=e.onTaskSelect,k=e.onAutoScrollChange,y=e.viewMode,E=void 0===y?exports.ViewMode.MONTH:y,T=e.scrollContainerRef,V=e.smoothDragging,N=void 0===V||V;e.movementThreshold;var A=e.animationSpeed,R=void 0===A?.25:A,Y=e.renderTask,H=e.renderTooltip,F=e.getTaskColor;if(!t||!t.id||!Array.isArray(t.tasks))return r.createElement("div",{className:"relative h-16 text-gantt-text"},"Invalid task group data");var S=a instanceof Date?a:new Date,O=n instanceof Date?n:new Date,U=r.useState(null),C=U[0],I=U[1],z=r.useState(null),L=z[0],P=z[1],W=r.useState(null),Q=W[0],q=W[1],K=r.useState(0),B=K[0],_=K[1],G=r.useState({x:0,y:0}),X=G[0],j=G[1],Z=r.useState(null),J=Z[0],$=Z[1],ee=r.useState(null),te=ee[0],re=ee[1],ae=r.useRef(null),oe=r.useRef({x:0,y:0}),ne=r.useRef(null),ie=r.useRef(null),se=r.useRef({left:0,width:0}),ce=r.useRef(0),le=r.useRef(!1),de=r.useRef(null),ue=r.useRef(0),ge=r.useRef(null),fe=r.useRef({minLeft:0,maxLeft:i*s}),me=r.useRef(null),he=r.useRef(null),pe=r.useRef(null),ve=r.useRef(null),we=r.useRef("task-row-".concat(Math.random().toString(36).substring(2,11))),xe=N&&E!==exports.ViewMode.DAY,be=function(e){var t=o(o({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)});$(t),pe.current=t},Me=J?p.getPreviewArrangement(J,t.tasks,E):p.detectOverlaps(t.tasks,E),De=Math.max(60,40*Me.length+20);r.useEffect((function(){fe.current={minLeft:0,maxLeft:i*s}}),[i,s]);var ke=function(){if(ve.current&&ne.current&&ie.current){var e=Date.now(),t=e-ce.current;ce.current=e;var r=R||.25,a=ie.current.left+(ne.current.left-ie.current.left)*r,o=ie.current.width+(ne.current.width-ie.current.width)*r;se.current.left=(a-ie.current.left)/(t||16),se.current.width=(o-ie.current.width)/(t||16),ie.current={left:a,width:o},ve.current.style.left="".concat(a,"px"),ve.current.style.width="".concat(o,"px"),he.current&&ye(a,o),ae.current=requestAnimationFrame(ke)}else ae.current=null},ye=function(e,t){if(he.current)try{if(E===exports.ViewMode.DAY){var r=Math.round(e/s),a=Math.max(1,Math.round(t/s)),n=new Date(S);n.setHours(0,0,0,0),(m=new Date(n)).setDate(n.getDate()+r),m.setHours(0,0,0,0),(h=new Date(m)).setDate(m.getDate()+a-1),h.setHours(23,59,59,999);var c=S.getTime(),l=O.getTime(),d=new Date(Math.max(c,m.getTime())),u=new Date(Math.min(l,h.getTime())),g=o(o({},he.current),{startDate:d,endDate:u});be(g)}else{var f=v.calculateDatesFromPosition(e,t,S,O,i,s,E),m=f.newStartDate,h=f.newEndDate;g=o(o({},he.current),{startDate:m,endDate:h});be(g)}}catch(e){console.error("Error updating dates:",e)}},Ee=function(){if(!le.current){le.current=!0;var e=function(){if(le.current&&(null==T?void 0:T.current)&&ne.current){var t=T.current,r=ge.current,a=ue.current,o=t.scrollLeft,n=t.scrollWidth-t.clientWidth;if("left"===r){if(o<=0)return void Te();var i=Math.max(0,o-a);if(t.scrollLeft=i,ne.current){var s=Math.max(fe.current.minLeft,ne.current.left-a);ne.current.left=s}}else if("right"===r){if(o>=n)return void Te();i=Math.min(n,o+a);if(t.scrollLeft=i,ne.current&&te){var c=fe.current.maxLeft-ne.current.width;s=Math.min(c,ne.current.left+a);ne.current.left=s}}le.current&&(de.current=requestAnimationFrame(e))}};de.current=requestAnimationFrame(e)}},Te=function(){le.current=!1,null!==de.current&&(cancelAnimationFrame(de.current),de.current=null)},Ve=function(e,r){M&&!L&&M(r,t),D&&D(r,!0)},Ne=function(e,t){L||(I(t),Re(e))},Ae=function(){L||I(null)},Re=function(e){if(me.current){var t=me.current.getBoundingClientRect();j({x:e.clientX-t.left+20,y:e.clientY-t.top})}},Ye=function(e,t,r){if(l){e.preventDefault(),e.stopPropagation();var a=document.querySelector('[data-task-id="'.concat(t.id,'"][data-instance-id="').concat(we.current,'"]'));if(a){ve.current=a;var n=parseFloat(a.style.left||"0"),i=parseFloat(a.style.width||"0");re({left:n,width:i,startDate:new Date(t.startDate),endDate:new Date(t.endDate)}),ne.current={left:n,width:i},ie.current={left:n,width:i},oe.current={x:e.clientX,y:e.clientY},ce.current=Date.now(),se.current={left:0,width:0},a.setAttribute("data-dragging","true"),a.style.transition="none",P(t),q(r),_(e.clientX),$(t),function(e){var t=o(o({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)});P(t),he.current=t}(t),be(t),null===ae.current&&xe&&(ae.current=requestAnimationFrame(ke)),document.addEventListener("mouseup",Fe),document.addEventListener("mousemove",He)}}},He=function(e){if(oe.current={x:e.clientX,y:e.clientY},e instanceof MouseEvent&&C&&me.current){var t=me.current.getBoundingClientRect();j({x:e.clientX-t.left+20,y:e.clientY-t.top})}else e instanceof MouseEvent||Re(e);if(L&&(null==T?void 0:T.current)&&function(e){if((null==T?void 0:T.current)&&L){var t=T.current.getBoundingClientRect(),r=null,a=0;e<t.left+40?(r="left",a=Math.max(1,Math.round((40-(e-t.left))/10))):e>t.right-40&&(r="right",a=Math.max(1,Math.round((e-(t.right-40))/10))),ge.current=r,ue.current=a,r&&!le.current?(Ee(),k&&k(!0)):!r&&le.current&&(Te(),k&&k(!1))}}(e.clientX),L&&Q&&te&&me.current&&ne.current)try{var r=e.clientX-B,a=i*s,o=ne.current.left,n=ne.current.width;switch(Q){case"move":o=Math.max(0,Math.min(a-te.width,te.left+r)),E===exports.ViewMode.DAY&&(o=Math.round(o/s)*s);break;case"resize-left":var c=te.width-20,l=Math.min(c,r);o=Math.max(0,te.left+l),E===exports.ViewMode.DAY&&(o=Math.round(o/s)*s);var d=te.left+te.width;n=Math.max(20,d-o),E===exports.ViewMode.DAY&&(n=Math.round(n/s)*s,n=Math.max(s,n));break;case"resize-right":n=Math.max(20,Math.min(a-te.left,te.width+r)),E===exports.ViewMode.DAY&&(n=Math.round(n/s)*s,n=Math.max(s,n))}ne.current={left:o,width:n},E===exports.ViewMode.DAY&&ve.current?(ve.current.style.left="".concat(o,"px"),ve.current.style.width="".concat(n,"px"),ye(o,n)):xe?null===ae.current&&(ce.current=Date.now(),ae.current=requestAnimationFrame(ke)):ve.current&&(ve.current.style.left="".concat(o,"px"),ve.current.style.width="".concat(n,"px"),ye(o,n))}catch(e){console.error("Error in handleMouseMove:",e)}},Fe=function(){try{null!==ae.current&&(cancelAnimationFrame(ae.current),ae.current=null),function(){if(ve.current&&ne.current&&he.current){var e=ne.current.left,r=ne.current.width;E===exports.ViewMode.DAY?(e=Math.round(e/s)*s,r=Math.round(r/s)*s,r=Math.max(s,r),ve.current.style.transition="transform 0.15s ease-out, left 0.15s ease-out, width 0.15s ease-out",ve.current.style.left="".concat(e,"px"),ve.current.style.width="".concat(r,"px"),ye(e,r)):xe||(ve.current.style.transition="transform 0.15s ease-out, left 0.15s ease-out, width 0.15s ease-out",ve.current.style.left="".concat(e,"px"),ve.current.style.width="".concat(r,"px"));var a=pe.current;if(a){var n=S.getTime(),i=O.getTime();if(a.startDate.getTime()<n&&(a=o(o({},a),{startDate:new Date(n)})),a.endDate.getTime()>i&&(a=o(o({},a),{endDate:new Date(i)})),x&&a)try{x(t.id,a)}catch(e){console.error("Error in onTaskUpdate:",e)}}}}(),ve.current&&(ve.current.setAttribute("data-dragging","false"),setTimeout((function(){ve.current&&(ve.current.style.transition="")}),200))}catch(e){console.error("Error in handleMouseUp:",e)}finally{Te(),k&&k(!1),P(null),q(null),$(null),re(null),he.current=null,pe.current=null,ve.current=null,ne.current=null,ie.current=null,document.removeEventListener("mouseup",Fe),document.removeEventListener("mousemove",He)}},Se=function(e,r){if(x&&t.id)try{var a=o(o({},e),{percent:r});x(t.id,a)}catch(e){console.error("Error updating task progress:",e)}};return r.useEffect((function(){return function(){document.removeEventListener("mouseup",Fe),document.removeEventListener("mousemove",He),Te(),null!==ae.current&&(cancelAnimationFrame(ae.current),ae.current=null)}}),[]),t.tasks&&0!==t.tasks.length?r.createElement("div",{className:"relative border-b border-gray-200 dark:border-gray-700 text-gantt-task-text ".concat(f),style:{height:"".concat(De,"px")},onMouseMove:function(e){return He(e)},onMouseLeave:function(){return I(null)},ref:me,"data-testid":"task-row-".concat(t.id),"data-instance-id":we.current},Me.map((function(e,t){return r.createElement(r.Fragment,{key:"task-row-".concat(t)},e.map((function(e){try{if(!(e&&e.id&&e.startDate instanceof Date&&e.endDate instanceof Date))return console.warn("Invalid task data:",e),null;var a=v.calculateTaskPixelPosition(e,S,O,i,s,E),o=a.leftPx,n=a.widthPx,c=(null==C?void 0:C.id)===e.id,d=(null==L?void 0:L.id)===e.id,g=40*t+10;return r.createElement(b,{key:"task-".concat(e.id),task:e,leftPx:o,widthPx:n,topPx:g,isHovered:c,isDragging:d,editMode:l,showProgress:u,instanceId:we.current,onMouseDown:Ye,onMouseEnter:Ne,onMouseLeave:Ae,onClick:Ve,renderTask:Y,getTaskColor:F,onProgressUpdate:Se})}catch(e){return console.error("Error rendering task:",e),null}})))})),(C||L)&&r.createElement(w,{task:J||L||C,position:X,dragType:Q,taskId:null==L?void 0:L.id,startDate:S,endDate:O,totalMonths:i,monthWidth:s,showProgress:u,instanceId:we.current,className:h,viewMode:E,renderTooltip:H})):r.createElement("div",{className:"relative h-16 text-gantt-text"},"No tasks available")},k=function(e){var t=e.tasks,i=void 0===t?[]:t,s=e.startDate,c=e.endDate,l=e.title,u=void 0===l?"Project Timeline":l,v=e.currentDate,w=void 0===v?new Date:v,b=e.showCurrentDateMarker,k=void 0===b||b,y=e.todayLabel,E=void 0===y?"Today":y,T=e.editMode,V=void 0===T||T,N=e.headerLabel,A=void 0===N?"Resources":N,R=e.showProgress,Y=void 0!==R&&R,H=e.darkMode,F=void 0!==H&&H,S=e.locale,O=void 0===S?"default":S,U=e.styles,C=void 0===U?{}:U,I=e.viewMode,z=void 0===I?exports.ViewMode.MONTH:I,L=e.viewModes,P=e.smoothDragging,W=void 0===P||P,Q=e.movementThreshold,q=void 0===Q?3:Q,K=e.animationSpeed,B=void 0===K?.25:K,_=e.minuteStep,G=void 0===_?5:_,X=e.renderTaskList,j=e.renderTask,Z=e.renderTooltip,J=e.renderViewModeSelector,$=e.renderHeader,ee=e.renderTimelineHeader,te=e.getTaskColor,re=e.onTaskUpdate,ae=e.onTaskClick,oe=e.onTaskSelect;e.onTaskDoubleClick;var ne=e.onGroupClick,ie=e.onViewModeChange,se=e.fontSize;e.rowHeight,e.timeStep;var ce=r.useRef(null),le=r.useRef(null),de=r.useState(z),ue=de[0],ge=de[1],fe=r.useState([]);fe[0];var me=fe[1],he=r.useState(150),pe=he[0],ve=he[1],we=r.useState(!1),xe=we[0],be=we[1],Me=r.useState(0),De=Me[0],ke=Me[1],ye=s||g(i),Ee=c||f(i),Te=function(e,t,r){void 0===r&&(r=5);var o=[],n=new Date(e);n.setSeconds(0,0);var i=n.getMinutes(),s=Math.floor(i/r)*r;n.setMinutes(s);var c=new Date(t);for(c.setMinutes(c.getMinutes(),59,999);n<=c;)o.push(new Date(n)),n=a.addMinutes(n,r);return o},Ve=function(e,t){var r=[],o=new Date(e);o.setMinutes(0,0,0);var n=new Date(t);for(n.setHours(n.getHours(),59,59,999);o<=n;)r.push(new Date(o)),o=a.addHours(o,1);return r},Ne=function(e,t){var r=[],o=new Date(e);o.setHours(0,0,0,0);var n=new Date(t);for(n.setHours(23,59,59,999);o<=n;)r.push(new Date(o)),o=a.addDays(o,1);return r},Ae=function(e,t){for(var r=[],o=new Date(e);o<=t;)r.push(new Date(o)),o=a.addDays(o,7);return r},Re=function(e,t){for(var r=[],o=a.startOfQuarter(new Date(e));o<=t;)r.push(new Date(o)),o=a.addQuarters(o,1);return r},Ye=function(e,t){for(var r=[],o=a.startOfYear(new Date(e));o<=t;)r.push(new Date(o)),o=a.addYears(o,1);return r},He=function(){return!1!==L&&(Array.isArray(L)?L:[exports.ViewMode.DAY,exports.ViewMode.WEEK,exports.ViewMode.MONTH,exports.ViewMode.QUARTER,exports.ViewMode.YEAR])},Fe=function(){switch(ue){case exports.ViewMode.MINUTE:return Te(ye,Ee,G);case exports.ViewMode.HOUR:return Ve(ye,Ee);case exports.ViewMode.DAY:return Ne(ye,Ee);case exports.ViewMode.WEEK:return Ae(ye,Ee);case exports.ViewMode.MONTH:return d(ye,Ee);case exports.ViewMode.QUARTER:return Re(ye,Ee);case exports.ViewMode.YEAR:return Ye(ye,Ee);default:return d(ye,Ee)}}(),Se=Fe.length,Oe=function(){var e=new Date;switch(ue){case exports.ViewMode.MINUTE:return Fe.findIndex((function(t){return t.getHours()===e.getHours()&&Math.floor(t.getMinutes()/(G||5))===Math.floor(e.getMinutes()/(G||5))&&t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case exports.ViewMode.HOUR:return Fe.findIndex((function(t){return t.getHours()===e.getHours()&&t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case exports.ViewMode.DAY:return Fe.findIndex((function(t){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case exports.ViewMode.WEEK:return Fe.findIndex((function(t){var r=new Date(t);return r.setDate(t.getDate()+6),e>=t&&e<=r}));case exports.ViewMode.MONTH:return Fe.findIndex((function(t){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}));case exports.ViewMode.QUARTER:var t=Math.floor(e.getMonth()/3);return Fe.findIndex((function(r){return Math.floor(r.getMonth()/3)===t&&r.getFullYear()===e.getFullYear()}));case exports.ViewMode.YEAR:return Fe.findIndex((function(t){return t.getFullYear()===e.getFullYear()}));default:return-1}}(),Ue=function(e){be(e),le.current&&(e?le.current.classList.add("rmg-auto-scrolling"):le.current.classList.remove("rmg-auto-scrolling"))},Ce=function(e,t){if(re)try{var r=o(o({},t),{startDate:t.startDate instanceof Date?t.startDate:new Date(t.startDate),endDate:t.endDate instanceof Date?t.endDate:new Date(t.endDate)});ke((function(e){return e+1})),re(e,r)}catch(e){console.error("Error in handleTaskUpdate:",e)}},Ie=function(e,t){if(ae)try{ae(e,t)}catch(e){console.error("Error in handleTaskClick:",e)}},ze=function(e,t){if(me((function(r){return t?n(n([],r,!0),[e.id],!1):r.filter((function(t){return t!==e.id}))})),oe)try{oe(e,t)}catch(e){console.error("Error in onTaskSelect handler:",e)}},Le=function(e){switch(ge(e),e){case exports.ViewMode.MINUTE:ve(30);break;case exports.ViewMode.HOUR:ve(40);break;case exports.ViewMode.DAY:ve(50);break;case exports.ViewMode.WEEK:ve(80);break;case exports.ViewMode.MONTH:ve(150);break;case exports.ViewMode.QUARTER:ve(180);break;case exports.ViewMode.YEAR:ve(200);break;default:ve(150)}ie&&ie(e)};r.useEffect((function(){Le(z)}),[z]),r.useEffect((function(){if(ce.current){var e=Math.max(.1,Math.min(1,B||.25));ce.current.style.setProperty("--rmg-animation-speed",e.toString())}}),[B,ce.current]);var Pe={fontSize:se||"inherit"},We=F?"dark":"",Qe=o(o({},{container:"",title:"",header:"",taskList:"",timeline:"",taskRow:"",todayMarker:"",tooltip:""}),C),qe=!1!==He();return r.createElement("div",{ref:ce,className:"rmg-gantt-chart w-full border border-gantt-border bg-gantt-bg text-gantt-text rounded-xl shadow-lg overflow-hidden ".concat(We," ").concat(Qe.container),style:o(o({},Pe),{"--gantt-unit-width":"".concat(pe,"px")}),"data-testid":"gantt-chart"},$?$({title:u,darkMode:F,viewMode:ue,onViewModeChange:Le,showViewModeSelector:qe}):r.createElement("div",{className:"p-6 border-b border-gantt-border bg-gantt-bg"},r.createElement("div",{className:"flex justify-between items-center"},r.createElement("h1",{className:"text-2xl font-bold text-gantt-text ".concat(Qe.title)},u),qe&&r.createElement("div",{className:"flex space-x-2"},J?J({activeMode:ue,onChange:Le,darkMode:F,availableModes:He()}):r.createElement(x,{activeMode:ue,onChange:Le,darkMode:F,availableModes:He()})))),r.createElement("div",{className:"relative flex"},X?X({tasks:i,headerLabel:A,onGroupClick:ne,viewMode:ue}):r.createElement(M,{tasks:i,headerLabel:A,onGroupClick:ne,className:Qe.taskList,viewMode:ue}),r.createElement("div",{ref:le,className:"flex-grow overflow-x-auto rmg-gantt-scroll-container ".concat(xe?"rmg-auto-scrolling":"")},r.createElement("div",{className:"min-w-max"},ee?ee({timeUnits:Fe,currentUnitIndex:Oe,viewMode:ue,locale:O,unitWidth:pe}):r.createElement(m,{months:Fe,currentMonthIndex:Oe,locale:O,className:Qe.timeline,viewMode:ue,unitWidth:pe}),r.createElement("div",{className:"relative"},k&&Oe>=0&&r.createElement(h,{currentMonthIndex:Oe,height:i.reduce((function(e,t){if(!t||!Array.isArray(t.tasks))return e+60;var r=p.detectOverlaps(t.tasks,ue);return e+Math.max(60,40*r.length+20)}),0),label:E,dayOfMonth:w.getDate(),className:Qe.todayMarker,viewMode:ue,unitWidth:pe}),i.map((function(e){return e&&e.id?r.createElement(D,{key:"task-row-".concat(e.id,"-").concat(De),taskGroup:e,startDate:ye,endDate:Ee,totalMonths:Se,monthWidth:pe,editMode:V,showProgress:Y,onTaskUpdate:Ce,onTaskClick:Ie,onTaskSelect:ze,onAutoScrollChange:Ue,className:Qe.taskRow,tooltipClassName:Qe.tooltip,viewMode:ue,scrollContainerRef:le,smoothDragging:W,movementThreshold:q,animationSpeed:B,renderTask:j,renderTooltip:Z,getTaskColor:te}):null})))))))};!function(e,t){void 0===t&&(t={});var r=t.insertAt;if("undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(":root{--color-white:#fff;--color-black:#000;--color-gray-50:#f9fafb;--color-gray-100:#f3f4f6;--color-gray-200:#e5e7eb;--color-gray-300:#d1d5db;--color-gray-400:#9ca3af;--color-gray-500:#6b7280;--color-gray-600:#4b5563;--color-gray-700:#374151;--color-gray-800:#1f2937;--color-gray-900:#111827;--color-blue-50:#eff6ff;--color-blue-100:#dbeafe;--color-blue-500:#3b82f6;--color-blue-600:#2563eb;--color-blue-700:#1d4ed8;--color-red-500:#ef4444;--color-indigo-500:#6366f1;--color-indigo-600:#4f46e5;--color-gantt-bg:var(--color-white);--color-gantt-text:var(--color-gray-800);--color-gantt-border:var(--color-gray-200);--color-gantt-highlight:var(--color-blue-50);--color-gantt-marker:var(--color-red-500);--color-gantt-task:var(--color-blue-500);--color-gantt-task-text:var(--color-white);--color-border-gantt-border:var(--color-gray-200);--rmg-tooltip-bg:var(--color-white);--rmg-tooltip-text:var(--color-gray-800);--rmg-tooltip-border:var(--color-gray-200);--rmg-resize-handle:hsla(0,0%,100%,.3);--rmg-progress-bg:rgba(0,0,0,.2);--rmg-progress-fill:var(--color-white);--rmg-shadow:rgba(0,0,0,.1);--rmg-shadow-hover:rgba(0,0,0,.2);--rmg-shadow-drag:rgba(0,0,0,.3);--rmg-animation-speed:0.25;--rmg-task-hover-transition:transform 0.15s cubic-bezier(0.2,0,0.13,2),box-shadow 0.15s cubic-bezier(0.2,0,0.13,2);--rmg-task-drag-transition:transform 0.05s cubic-bezier(0.2,0,0.13,2),box-shadow 0.05s cubic-bezier(0.2,0,0.13,2);--rmg-task-release-transition:all 0.2s cubic-bezier(0.2,0,0.13,2);--scrollbar-track:rgba(229,231,235,.5);--scrollbar-thumb:rgba(156,163,175,.7);--scrollbar-thumb-hover:hsla(220,9%,46%,.8);--scrollbar-size:8px}.dark{--color-gantt-bg:var(--color-gray-800);--color-gantt-text:var(--color-gray-100);--color-gantt-border:var(--color-gray-700);--color-gantt-highlight:var(--color-gray-700);--color-gantt-marker:var(--color-red-500);--color-gantt-task:var(--color-indigo-600);--color-gantt-task-text:var(--color-white);--color-border-gantt-border:var(--color-gray-700);--rmg-tooltip-bg:var(--color-gray-800);--rmg-tooltip-text:var(--color-gray-100);--rmg-tooltip-border:var(--color-gray-700);--rmg-resize-handle:hsla(0,0%,100%,.4);--rmg-progress-bg:rgba(0,0,0,.3);--rmg-progress-fill:var(--color-gray-200);--rmg-shadow:rgba(0,0,0,.3);--rmg-shadow-hover:rgba(0,0,0,.4);--rmg-shadow-drag:rgba(0,0,0,.5);--scrollbar-track:rgba(55,65,81,.5);--scrollbar-thumb:rgba(75,85,99,.7);--scrollbar-thumb-hover:hsla(220,9%,46%,.8)}.rmg-gantt-chart{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:var(--color-gantt-bg);color:var(--color-gantt-text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Liberation Sans,Arial,sans-serif;font-size:16px;line-height:1.5;overflow:hidden;scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track);scrollbar-width:thin}[data-task-id]:not([data-dragging=true]){backface-visibility:hidden;transform:translateZ(0);transition:var(--rmg-task-hover-transition);will-change:transform,box-shadow}[data-task-id]:hover{box-shadow:0 3px 10px var(--rmg-shadow-hover);transform:translateY(-1px);z-index:20}[data-task-id][data-dragging=true]{box-shadow:0 5px 15px var(--rmg-shadow-drag);cursor:grabbing;opacity:.95;transition:var(--rmg-task-drag-transition);z-index:100}.rmg-task-tooltip{opacity:0;pointer-events:none;transform:translateY(5px);transition:opacity .2s ease,transform .2s ease}.rmg-task-tooltip.visible{opacity:1;transform:translateY(0)}.rmg-task-progress{background-color:var(--rmg-progress-bg);border-radius:4px;bottom:3px;height:3px;left:3px;overflow:hidden;position:absolute;right:3px}.rmg-task-progress-fill{background-color:var(--rmg-progress-fill);border-radius:4px;height:100%;transition:width .3s ease-out}.rmg-timeline-unit:hover{background-color:var(--rmg-highlight);transition:background-color .15s ease}.rmg-resize-handle{opacity:0;transition:opacity .15s ease}[data-task-id]:hover .rmg-resize-handle{opacity:1}.rmg-today-marker{animation:pulse 3s ease-in-out infinite}.rmg-gantt-scroll-container{scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track);scrollbar-width:thin}.rmg-gantt-chart::-webkit-scrollbar,.rmg-gantt-scroll-container::-webkit-scrollbar{height:var(--scrollbar-size);width:var(--scrollbar-size)}.rmg-gantt-chart::-webkit-scrollbar-track,.rmg-gantt-scroll-container::-webkit-scrollbar-track{background:var(--scrollbar-track);border-radius:12px}.rmg-gantt-chart::-webkit-scrollbar-thumb,.rmg-gantt-scroll-container::-webkit-scrollbar-thumb{background-clip:content-box;background-color:var(--scrollbar-thumb);border:2px solid transparent;border-radius:12px}.rmg-gantt-chart::-webkit-scrollbar-thumb:hover,.rmg-gantt-scroll-container::-webkit-scrollbar-thumb:hover{background-color:var(--scrollbar-thumb-hover)}.rmg-gantt-chart::-webkit-scrollbar-corner,.rmg-gantt-scroll-container::-webkit-scrollbar-corner{background-color:transparent}.rmg-gantt-scroll-container:focus{box-shadow:inset 0 0 0 2px var(--color-blue-500);outline:none}@keyframes pulse{0%{opacity:.8}50%{opacity:1}to{opacity:.8}}@keyframes update-flash{0%{box-shadow:0 0 0 2px rgba(79,70,229,.2)}50%{box-shadow:0 0 0 4px rgba(79,70,229,.4)}to{box-shadow:0 0 0 2px rgba(79,70,229,0)}}.rmg-task-updated{animation:update-flash 1s cubic-bezier(.2,0,.13,2)}.rmg-gantt-scroll-container{scroll-behavior:smooth}.rmg-auto-scrolling{scroll-behavior:auto!important}[data-task-id]{border-radius:4px;box-shadow:0 1px 3px var(--rmg-shadow)}[data-task-id] .rmg-progress-bar{background-color:var(--rmg-progress-bg);border-radius:4px;bottom:3px;height:2px;left:3px;overflow:hidden;position:absolute;right:3px;transition:height .15s ease-out}[data-task-id]:hover .rmg-progress-bar{height:3px}.rmg-progress-fill{background-color:var(--rmg-progress-fill);border-radius:4px;height:100%;position:relative;transition:width .15s ease-out}.rmg-progress-handle{background-color:#fff;border:2px solid var(--rmg-task);border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.2);cursor:ew-resize;height:10px;opacity:0;position:absolute;right:0;top:50%;transform:translate(50%,-50%);transition:opacity .2s ease,transform .15s ease,box-shadow .15s ease;width:10px;z-index:10}[data-task-id]:hover .rmg-progress-handle{opacity:1}.rmg-progress-handle.dragging,.rmg-progress-handle:hover{box-shadow:0 2px 5px rgba(0,0,0,.3);transform:translate(50%,-50%) scale(1.2)}.rmg-progress-tooltip{background-color:var(--rmg-tooltip-bg);border-radius:3px;color:var(--rmg-tooltip-text);font-size:10px;opacity:0;padding:2px 5px;pointer-events:none;position:absolute;right:0;top:-20px;transform:translateY(5px);transition:opacity .2s ease,transform .2s ease;white-space:nowrap}.rmg-progress-handle.dragging+.rmg-progress-tooltip,.rmg-progress-handle:hover+.rmg-progress-tooltip{opacity:1;transform:translateY(0)}@media (max-width:640px){.w-40{width:6rem}}");var y=function(e){return r.createElement(k,o({},e))},E=r.createContext({darkMode:!1});exports.CollisionService=p,exports.GanttChart=k,exports.GanttChartWithStyles=y,exports.GanttThemeProvider=function(e){var t=e.children,a=e.darkMode,o=void 0!==a&&a;return r.createElement(E.Provider,{value:{darkMode:o}},t)},exports.TaskItem=b,exports.TaskList=M,exports.TaskRow=D,exports.TaskService=v,exports.Timeline=m,exports.TodayMarker=h,exports.Tooltip=w,exports.ViewModeSelector=x,exports.calculateDuration=function(e,t){var r;if(!(e instanceof Date&&t instanceof Date))return 0;e>t&&(e=(r=[t,e])[0],t=r[1]);var a=Math.abs(t.getTime()-e.getTime());return Math.ceil(a/864e5)},exports.calculateTaskPosition=function(e,t,r){if(!(e.startDate instanceof Date&&e.endDate instanceof Date))return{left:"0%",width:"10%"};var a=d(new Date(t.getFullYear(),t.getMonth(),1),new Date(r.getFullYear(),r.getMonth()+1,0)),o=a.length,n=e.startDate.getFullYear(),i=e.startDate.getMonth(),s=a.findIndex((function(e){return e.getFullYear()===n&&e.getMonth()===i})),c=s<0?0:s,l=e.endDate.getFullYear(),u=e.endDate.getMonth(),g=a.findIndex((function(e){return e.getFullYear()===l&&e.getMonth()===u})),f=((g<0?a.length-1:g)-c+1)/o*100;return{left:"".concat(c/o*100,"%"),width:"".concat(f,"%")}},exports.default=y,exports.detectTaskOverlaps=function(e){if(!Array.isArray(e))return[];var t=e.filter((function(e){return e&&e.startDate instanceof Date&&e.endDate instanceof Date}));if(0===t.length)return[];var r=[];return t.forEach((function(e){for(var t=!1,a=0;a<r.length;a++){if(!r[a].some((function(t){return!(e.startDate>=t.endDate||e.endDate<=t.startDate)}))){r[a].push(e),t=!0;break}}t||r.push([e])})),r},exports.findEarliestDate=g,exports.findLatestDate=f,exports.formatDate=l,exports.formatDateRange=function(e,t,r){if(void 0===r&&(r="default"),!(e instanceof Date&&t instanceof Date))return"Invalid date range";var a=l(e,exports.DateDisplayFormat.SHORT_DATE,r),o=l(t,exports.DateDisplayFormat.SHORT_DATE,r);return"".concat(a," - ").concat(o)},exports.formatMonth=function(e,t){return void 0===t&&(t="default"),e.toLocaleString(t,{month:"short"})},exports.getDaysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},exports.getDuration=u,exports.getMonthsBetween=d,exports.useGanttTheme=function(){return r.useContext(E)};
//# sourceMappingURL=index.js.map
