import e,{useState as t,useRef as a,useEffect as n}from"react";var r,o=function(){return o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError,function(e){e.MONTH_YEAR="MONTH_YEAR",e.WEEK_DAY="WEEK_DAY",e.DAY_MONTH="DAY_MONTH",e.FULL_DATE="FULL_DATE"}(r||(r={}));var l={headerBackground:"bg-gray-50",headerText:"text-gray-700",timelineBackground:"bg-gray-50",timelineBorder:"border-gray-200",timelineText:"text-gray-500",taskDefaultColor:"bg-blue-500",highlightColor:"bg-indigo-100",todayMarkerColor:"bg-red-500",tooltipBackground:"bg-white",tooltipText:"text-gray-700"};function c(e,t){switch(void 0===t&&(t=r.MONTH_YEAR),t){case r.MONTH_YEAR:return e.toLocaleString("default",{month:"short",year:"numeric"}).toUpperCase();case r.WEEK_DAY:return e.toLocaleString("default",{weekday:"short",day:"numeric"});case r.DAY_MONTH:return e.toLocaleString("default",{day:"numeric",month:"short"});case r.FULL_DATE:return e.toLocaleDateString("default",{year:"numeric",month:"short",day:"numeric"});default:return e.toLocaleString("default",{month:"short",year:"numeric"})}}function s(e,t){return new Date(e,t+1,0).getDate()}function i(e,t){var a=Math.abs(t.getTime()-e.getTime());return Math.ceil(a/864e5)}function u(e,t,a,n){var r=i(t,a),o=Math.max(0,i(t,e.startDate)-1),l=Math.min(r,i(t,e.endDate))-o,c=n/s(t.getFullYear(),t.getMonth()),u=o*c,d=l*c,m=e.startDate>a||e.endDate<t;return{left:"".concat(u,"px"),width:"".concat(d,"px"),isOutOfRange:m}}function d(e){var t=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()})),a=[];return t.forEach((function(e){for(var t=!1,n=0;n<a.length;n++){var r=a[n][a[n].length-1];if(e.startDate>=r.endDate){a[n].push(e),t=!0;break}}t||a.push([e])})),a}function m(e,t){for(var a=[],n=new Date(e);n<=t;)a.push(c(n,r.MONTH_YEAR)),n.setMonth(n.getMonth()+1);return a}var f=function(t){var a=t.people,n=t.showAvatar,r=void 0===n||n,o=t.showTaskCount,l=void 0===o||o,c=t.theme,s=(null==c?void 0:c.headerBackground)||"bg-gray-50",i=(null==c?void 0:c.headerText)||"text-gray-700",u=(null==c?void 0:c.timelineBorder)||"border-gray-200";return e.createElement("div",{className:"name-list w-64 flex-shrink-0 bg-white border-r border-gray-200 z-10"},e.createElement("div",{className:"h-24 border-b ".concat(u," ").concat(s," flex items-center justify-center")},e.createElement("span",{className:"font-semibold ".concat(i)},"Team Members")),e.createElement("div",{className:"people-list"},a.map((function(t,n){var o=d(t.tasks),c=Math.max(60,40*o.length),s=t.name.charAt(0).toUpperCase();return e.createElement("div",{key:t.id,className:"flex items-center px-4 ".concat(n!==a.length-1?"border-b ".concat(u):""),style:{height:"".concat(c,"px")}},r&&(t.avatar?e.createElement("img",{src:t.avatar,alt:t.name,className:"w-8 h-8 rounded-full mr-3"}):e.createElement("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-sm mr-3"},s)),e.createElement("div",{className:"flex flex-col"},e.createElement("div",{className:"font-medium text-sm"},t.name),t.role&&e.createElement("div",{className:"text-xs text-gray-500"},t.role),l&&e.createElement("div",{className:"text-xs text-gray-500 mt-1"},t.tasks.length," ",1===t.tasks.length?"task":"tasks")))}))))},v=function(t){for(var a=t.startDate,n=t.endDate,o=t.columnWidth,l=t.theme,i=t.children,u=t.scrollContainerRef,d=[],m=new Date(a);m<=n;)d.push({date:new Date(m),daysInMonth:s(m.getFullYear(),m.getMonth())}),m.setMonth(m.getMonth()+1);var f=(null==l?void 0:l.headerBackground)||"bg-gray-50",v=(null==l?void 0:l.headerText)||"text-gray-700",h=(null==l?void 0:l.timelineBorder)||"border-gray-200",g=(null==l?void 0:l.timelineText)||"text-gray-500";return e.createElement("div",{className:"timeline flex-grow overflow-x-auto overflow-y-hidden",ref:u},e.createElement("div",{className:"inline-block min-w-full"},e.createElement("div",{className:"grid border-b",style:{gridTemplateColumns:"repeat(".concat(d.length,", ").concat(o,"px)")}},d.map((function(t,a){return e.createElement("div",{key:"month-".concat(a),className:"border-r ".concat(h)},e.createElement("div",{className:"flex h-12 items-center justify-center ".concat(f)},e.createElement("p",{className:"font-semibold ".concat(v)},c(t.date,r.MONTH_YEAR))),e.createElement("div",{className:"flex h-12 items-center justify-between px-2 text-xs ".concat(g," ").concat(f)},(t.date.getFullYear(),t.date.getMonth(),n=t.daysInMonth,o=[1],n>=8&&o.push(8),n>=15&&o.push(15),n>=22&&o.push(22),n>=29&&o.push(29),o).map((function(a){return e.createElement("div",{key:"day-".concat(t.date.getMonth(),"-").concat(a),className:"relative",style:{width:"20px",textAlign:"center"}},e.createElement("span",null,a),e.createElement("div",{className:"absolute top-full h-screen w-px bg-gray-200 -z-10",style:{left:"50%",transform:"translateX(-50%)"}}))}))));var n,o}))),e.createElement("div",{className:"relative task-container"},i)))},h=function(l){var s=l.person,m=l.startDate,f=l.endDate,v=l.columnWidth,h=l.theme,g=l.onTaskUpdate,p=l.onTaskClick,E=t(null),x=E[0],w=E[1],D=t(null),b=D[0],y=D[1],N=t(0),k=N[0],T=N[1],M=t(null),A=M[0],L=M[1],C=t({x:0,y:0}),O=C[0],Y=C[1],_=a(null),z=function(e){return c(e,r.FULL_DATE)},R=function(e,t,a){e.preventDefault(),w(t),y(a),T(e.clientX),H(e),document.addEventListener("mouseup",F),document.addEventListener("mousemove",B)},B=function(e){if(x&&b&&_.current){var t=_.current.getBoundingClientRect(),a=(e.clientX-k)*(i(m,f)/t.width),n=new Date(x.startDate),r=new Date(x.endDate);if("move"===b?(n=new Date(n.getTime()+24*a*60*60*1e3),r=new Date(r.getTime()+24*a*60*60*1e3)):"resize-start"===b?n=new Date(n.getTime()+24*a*60*60*1e3):"resize-end"===b&&(r=new Date(r.getTime()+24*a*60*60*1e3)),n<m&&(n=new Date(m),"move"===b)){var l=i(x.startDate,x.endDate);r=new Date(n.getTime()+24*l*60*60*1e3)}if(r>f&&(r=new Date(f),"move"===b)){l=i(x.startDate,x.endDate);n=new Date(r.getTime()-24*l*60*60*1e3)}r<n&&("resize-start"===b?n=new Date(r):r=new Date(n));var c=o(o({},x),{startDate:n,endDate:r});g&&g(s.id,c),w(c),T(e.clientX)}},F=function(){w(null),y(null),document.removeEventListener("mouseup",F),document.removeEventListener("mousemove",B)},H=function(e){if(_.current){var t=_.current.getBoundingClientRect();Y({x:e.clientX-t.left,y:e.clientY-t.top})}};n((function(){return function(){document.removeEventListener("mouseup",F),document.removeEventListener("mousemove",B)}}),[]);var U=d(s.tasks),W=40*U.length,S=(null==h?void 0:h.tooltipBackground)||"bg-white",j=(null==h?void 0:h.tooltipText)||"text-gray-700";return e.createElement("div",{className:"task-row relative border-b border-gray-200",style:{height:"".concat(Math.max(60,W),"px")},onMouseMove:function(e){A&&H(e)},onMouseLeave:function(){return L(null)},ref:_},U.map((function(t,a){return t.map((function(t){var n=function(e){return u(e,m,f,v)}(t),r=n.left,o=n.width;if(n.isOutOfRange)return null;var l=(null==A?void 0:A.id)===t.id||(null==x?void 0:x.id)===t.id;return e.createElement(e.Fragment,{key:t.id},e.createElement("div",{className:"absolute h-8 rounded-md ".concat(t.color||"bg-blue-500"," z-10 flex items-center px-2 text-xs text-white font-medium cursor-move shadow-sm hover:shadow transition-shadow duration-150"),style:{left:r,width:o,top:"".concat(40*a+4,"px")},onMouseDown:function(e){return R(e,t,"move")},onMouseEnter:function(){return L(t)},onClick:function(e){return function(e,t){e.stopPropagation(),p&&p(t,s)}(e,t)}},e.createElement("span",{className:"truncate select-none"},t.name),void 0!==t.percent&&e.createElement("div",{className:"absolute bottom-1 left-1 right-1 h-1 bg-black bg-opacity-20 rounded-full overflow-hidden"},e.createElement("div",{className:"h-full bg-white rounded-full",style:{width:"".concat(t.percent,"%")}})),l&&e.createElement(e.Fragment,null,e.createElement("div",{className:"absolute left-0 top-0 bottom-0 w-2 cursor-ew-resize",onMouseDown:function(e){e.stopPropagation(),R(e,t,"resize-start")}},e.createElement("div",{className:"absolute left-[3px] w-1 h-[16px] top-1/2 -translate-y-1/2 bg-white rounded-full"})),e.createElement("div",{className:"absolute right-0 top-0 bottom-0 w-2 cursor-ew-resize",onMouseDown:function(e){e.stopPropagation(),R(e,t,"resize-end")}},e.createElement("div",{className:"absolute right-[3px] w-1 h-[16px] top-1/2 -translate-y-1/2 bg-white rounded-full"})))),l&&e.createElement("div",{className:"absolute z-50 ".concat(S," border border-gray-200 rounded-md shadow-lg p-3 text-xs select-none"),style:{left:"".concat(O.x+10,"px"),top:"".concat(O.y-80,"px"),minWidth:"200px"}},e.createElement("div",{className:"font-bold mb-1 text-sm"},t.name),e.createElement("div",{className:"".concat(j," grid grid-cols-2 gap-x-3 gap-y-1")},e.createElement("div",{className:"font-semibold"},"Start:"),e.createElement("div",null,z(t.startDate)),e.createElement("div",{className:"font-semibold"},"End:"),e.createElement("div",null,z(t.endDate)),e.createElement("div",{className:"font-semibold"},"Duration:"),e.createElement("div",null,i(t.startDate,t.endDate)," days"),void 0!==t.percent&&e.createElement(e.Fragment,null,e.createElement("div",{className:"font-semibold"},"Progress:"),e.createElement("div",null,t.percent,"%")))))}))})))},g=function(r){var o=r.people,c=r.startDate,s=r.endDate,u=r.title,d=void 0===u?"Project Timeline":u,g=r.showAvatar,p=void 0===g||g,E=r.showTaskCount,x=void 0===E||E,w=r.theme,D=void 0===w?l:w,b=r.onTaskUpdate,y=r.onTaskClick,N=r.currentDate,k=void 0===N?new Date:N,T=r.showCurrentDateMarker,M=void 0===T||T;r.visibleColumns;var A=r.columnWidth,L=void 0===A?200:A,C=c||function(e){var t=new Date;return e.forEach((function(e){e.tasks.forEach((function(e){e.startDate<t&&(t=new Date(e.startDate))}))})),t}(o),O=s||function(e){var t=new Date;return e.forEach((function(e){e.tasks.forEach((function(e){e.endDate>t&&(t=new Date(e.endDate))}))})),t}(o),Y=new Date(C);Y.setDate(1);var _=new Date(O);_.setMonth(_.getMonth()+1,0);var z=i(Y,_);m(Y,_);var R=a(null),B=t(0),F=B[0],H=B[1],U=function(e,t,a){var n=i(t,e);return n/a*100}(k,Y,z);n((function(){var e=function(){R.current&&H(R.current.scrollLeft)},t=R.current;return t&&t.addEventListener("scroll",e),function(){t&&t.removeEventListener("scroll",e)}}),[]);var W=function(e,t){b&&b(e,t)},S=function(e,t){y&&y(e,t)};return e.createElement("div",{className:"gantt-chart w-full rounded-lg border border-gray-200 overflow-hidden"},e.createElement("div",{className:"p-4 border-b border-gray-200"},e.createElement("h2",{className:"text-xl font-bold"},d)),e.createElement("div",{className:"flex"},e.createElement(f,{people:o,showAvatar:p,showTaskCount:x,theme:D}),e.createElement("div",{className:"flex-grow relative"},e.createElement(v,{startDate:Y,endDate:_,columnWidth:L,theme:D,scrollContainerRef:R},o.map((function(t){return e.createElement(h,{key:t.id,person:t,startDate:Y,endDate:_,columnWidth:L,theme:D,onTaskUpdate:W,onTaskClick:S})}))),M&&e.createElement("div",{className:"absolute top-0 bottom-0 w-px ".concat(D.todayMarkerColor||"bg-red-500"," z-20"),style:{left:"".concat(U,"%"),transform:"translateX(-".concat(F,"px)")}},e.createElement("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 ".concat(D.todayMarkerColor||"bg-red-500"," px-2 py-1 rounded text-xs text-white whitespace-nowrap")},"Today")))))};export{l as DEFAULT_THEME,r as DateDisplayFormat,g as GanttChart,f as NameList,h as TaskRow,v as Timeline,u as calculateTaskPosition,d as detectCollisions,c as formatDate,m as generateTimelineHeader,s as getDaysInMonth,i as getDuration};
//# sourceMappingURL=index.esm.js.map
