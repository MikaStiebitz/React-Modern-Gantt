"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./GanttChart-D7cZ-kr2.js"),t=require("react");require("date-fns");var r=function(r){var o=r.task,n=r.getTaskColor,a=r.isHovered,s=r.isDragging,i=o.color||"var(--rmg-task-bg-color)",c="",u="var(--rmg-task-text-color)";if(n){var l=n({task:o,isHovered:a,isDragging:s});i=l.backgroundColor,c=l.borderColor||"",u=l.textColor||u}var d=i.startsWith("bg-")?{}:{backgroundColor:i},g=i.startsWith("bg-")?i:"",m=c?c.startsWith("border-")?{}:{borderColor:c,borderWidth:"1px"}:{},f=c&&c.startsWith("border-")?c:"",p=u.startsWith("text-")?{}:{color:u},h=u.startsWith("text-")?u:"";return t.createElement("div",{className:"truncate select-none ".concat(g," ").concat(f," ").concat(h),style:e.__assign(e.__assign(e.__assign({},d),m),p)},o.name||"Unnamed Task")},o=function(e){var r=e.onResizeLeft,o=e.onResizeRight;return t.createElement(t.Fragment,null,t.createElement("div",{className:"rmg-resize-handle rmg-resize-handle-left",onMouseDown:r}),t.createElement("div",{className:"rmg-resize-handle rmg-resize-handle-right",onMouseDown:o}))},n=function(r){return t.createElement(e.GanttChart,e.__assign({},r))};exports.CollisionService=e.CollisionService,Object.defineProperty(exports,"DateDisplayFormat",{enumerable:!0,get:function(){return e.DateDisplayFormat}}),exports.GanttChart=e.GanttChart,exports.GanttThemeProvider=e.GanttThemeProvider,exports.TaskList=e.TaskList,exports.TaskRow=e.TaskRow,exports.TaskService=e.TaskService,exports.Timeline=e.Timeline,exports.TodayMarker=e.TodayMarker,exports.Tooltip=e.Tooltip,Object.defineProperty(exports,"ViewMode",{enumerable:!0,get:function(){return e.ViewMode}}),exports.ViewModeSelector=e.ViewModeSelector,exports.calculateDuration=e.calculateDuration,exports.calculateTaskPosition=e.calculateTaskPosition,exports.detectTaskOverlaps=e.detectTaskOverlaps,exports.findEarliestDate=e.findEarliestDate,exports.findLatestDate=e.findLatestDate,exports.formatDate=e.formatDate,exports.formatDateRange=e.formatDateRange,exports.formatMonth=e.formatMonth,exports.getDaysInMonth=e.getDaysInMonth,exports.getDuration=e.getDuration,exports.getMonthsBetween=e.getMonthsBetween,exports.useGanttTheme=e.useGanttTheme,exports.GanttChartWithStyles=n,exports.TaskItem=function(n){var a=n.task,s=n.leftPx,i=n.widthPx,c=n.topPx,u=n.isHovered,l=n.isDragging,d=n.editMode,g=n.showProgress,m=void 0!==g&&g,f=n.instanceId,p=n.renderTask,h=n.getTaskColor,v=n.onMouseDown,x=n.onMouseEnter,k=n.onMouseLeave,M=n.onClick,D=n.onProgressUpdate,P=t.useRef(null),w=t.useRef(null),C=function(e){var r=e.task,o=e.progressBarRef,n=e.taskRef,a=e.editMode,s=e.showProgress,i=e.onProgressUpdate,c=t.useState(!1),u=c[0],l=c[1],d=t.useState(r.percent||0),g=d[0],m=d[1],f=t.useCallback((function(e){a&&s&&(e.stopPropagation(),e.preventDefault(),l(!0),o.current&&(o.current.style.transition="width 0.05s ease-out"),document.addEventListener("mousemove",p),document.addEventListener("mouseup",h))}),[a,s,o]),p=t.useCallback((function(e){if(u&&o.current&&n.current){var t=n.current.getBoundingClientRect(),r=t.width-2,a=Math.max(0,Math.min(r,e.clientX-t.left)),s=Math.round(a/r*100);m(Math.max(0,Math.min(100,s))),o.current&&o.current.firstChild&&(o.current.firstChild.style.width="".concat(Math.max(0,Math.min(100,s)),"%"))}}),[u,o,n]),h=t.useCallback((function(){u&&(l(!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h),o.current&&(o.current.style.transition=""),i&&g!==r.percent&&i(r,g))}),[u,i,g,r,o]),v=t.useCallback((function(e){if(a&&s&&i){e.stopPropagation();var t=e.currentTarget.clientWidth,o=e.nativeEvent.offsetX,n=Math.round(o/t*100);m(n),i(r,n)}}),[a,s,i,r]);return t.useEffect((function(){m(r.percent||0)}),[r.percent]),t.useEffect((function(){return function(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h)}}),[p,h]),{progressPercent:g,isDraggingProgress:u,handleProgressMouseDown:f,handleProgressClick:v}}({task:a,progressBarRef:w,taskRef:P,editMode:d,showProgress:m,onProgressUpdate:D}),T=C.progressPercent,E=C.isDraggingProgress,b=C.handleProgressMouseDown,y=C.handleProgressClick;if(!a||!a.id)return null;if(p){var R=p({task:a,leftPx:s,widthPx:i,topPx:c,isHovered:u,isDragging:l,editMode:d,showProgress:m});return t.createElement("div",{ref:P,className:"absolute",style:{left:"".concat(Math.max(0,s),"px"),width:"".concat(Math.max(20,i),"px"),top:"".concat(c,"px")},onClick:function(e){return M(e,a)},onMouseDown:function(e){return v(e,a,"move")},onMouseEnter:function(e){return x(e,a)},onMouseLeave:k,"data-testid":"task-".concat(a.id),"data-task-id":a.id,"data-instance-id":f,"data-dragging":l?"true":"false"},R)}var L=(u||l)&&d;return t.createElement("div",{ref:P,className:"rmg-task-item",style:{left:"".concat(Math.max(0,s),"px"),width:"".concat(Math.max(20,i),"px"),top:"".concat(c,"px"),willChange:l?"transform, left, width":"auto"},onClick:function(e){return M(e,a)},onMouseDown:function(e){return v(e,a,"move")},onMouseEnter:function(e){return x(e,a)},onMouseLeave:k,"data-testid":"task-".concat(a.id),"data-task-id":a.id,"data-instance-id":f,"data-dragging":l?"true":"false"},L&&t.createElement(o,{onResizeLeft:function(e){return v(e,a,"resize-left")},onResizeRight:function(e){return v(e,a,"resize-right")}}),t.createElement(r,{task:a,getTaskColor:h,isHovered:u,isDragging:l}),m&&"number"==typeof T&&t.createElement(e.ProgressBar,{ref:w,percent:T,isHovered:u,isDraggingProgress:E,editMode:d,showProgress:m,onProgressClick:y,onProgressMouseDown:b}))},exports.default=n;
//# sourceMappingURL=index.js.map
