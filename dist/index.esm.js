import{_ as t,P as s,G as v}from"./GanttChart-DSzoU36k.js";export{C as CollisionService,D as DateDisplayFormat,e as GanttThemeProvider,T as TaskList,a as TaskRow,g as TaskService,b as Timeline,c as TodayMarker,d as Tooltip,f as ViewMode,V as ViewModeSelector,m as calculateDuration,q as calculateTaskPosition,r as detectTaskOverlaps,o as findEarliestDate,p as findLatestDate,h as formatDate,l as formatDateRange,i as formatMonth,k as getDaysInMonth,n as getDuration,j as getMonthsBetween,u as useGanttTheme}from"./GanttChart-DSzoU36k.js";import M,{useState as P,useCallback as w,useEffect as x,useRef as E}from"react";import"date-fns";var L=function(e){var r=e.task,n=e.getTaskColor,a=e.isHovered,o=e.isDragging,s=r.color||"var(--rmg-task-bg-color)",i="",c="var(--rmg-task-text-color)";if(n){var u=n({task:r,isHovered:a,isDragging:o});s=u.backgroundColor,i=u.borderColor||"",c=u.textColor||c}var d=s.startsWith("bg-")?{}:{backgroundColor:s},l=s.startsWith("bg-")?s:"",g=i?i.startsWith("border-")?{}:{borderColor:i,borderWidth:"1px"}:{},m=i&&i.startsWith("border-")?i:"",f=c.startsWith("text-")?{}:{color:c},h=c.startsWith("text-")?c:"";return M.createElement("div",{className:"truncate select-none ".concat(l," ").concat(m," ").concat(h),style:t(t(t({},d),g),f)},r.name||"Unnamed Task")},R=function(e){var t=e.onResizeLeft,r=e.onResizeRight;return M.createElement(M.Fragment,null,M.createElement("div",{className:"rmg-resize-handle rmg-resize-handle-left",onMouseDown:t}),M.createElement("div",{className:"rmg-resize-handle rmg-resize-handle-right",onMouseDown:r}))},y=function(e){var t=e.task,r=e.leftPx,n=e.widthPx,a=e.topPx,o=e.isHovered,i=e.isDragging,c=e.editMode,u=e.showProgress,d=void 0!==u&&u,l=e.instanceId,g=e.renderTask,m=e.getTaskColor,f=e.onMouseDown,h=e.onMouseEnter,v=e.onMouseLeave,p=e.onClick,k=e.onProgressUpdate,D=E(null),C=E(null),T=function(e){var t=e.task,r=e.progressBarRef,n=e.taskRef,a=e.editMode,o=e.showProgress,s=e.onProgressUpdate,i=P(!1),c=i[0],u=i[1],d=P(t.percent||0),l=d[0],g=d[1],m=w((function(e){a&&o&&(e.stopPropagation(),e.preventDefault(),u(!0),r.current&&(r.current.style.transition="width 0.05s ease-out"),document.addEventListener("mousemove",f),document.addEventListener("mouseup",h))}),[a,o,r]),f=w((function(e){if(c&&r.current&&n.current){var t=n.current.getBoundingClientRect(),a=t.width-2,o=Math.max(0,Math.min(a,e.clientX-t.left)),s=Math.round(o/a*100);g(Math.max(0,Math.min(100,s))),r.current&&r.current.firstChild&&(r.current.firstChild.style.width="".concat(Math.max(0,Math.min(100,s)),"%"))}}),[c,r,n]),h=w((function(){c&&(u(!1),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h),r.current&&(r.current.style.transition=""),s&&l!==t.percent&&s(t,l))}),[c,s,l,t,r]),v=w((function(e){if(a&&o&&s){e.stopPropagation();var r=e.currentTarget.clientWidth,n=e.nativeEvent.offsetX,i=Math.round(n/r*100);g(i),s(t,i)}}),[a,o,s,t]);return x((function(){g(t.percent||0)}),[t.percent]),x((function(){return function(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)}}),[f,h]),{progressPercent:l,isDraggingProgress:c,handleProgressMouseDown:m,handleProgressClick:v}}({task:t,progressBarRef:C,taskRef:D,editMode:c,showProgress:d,onProgressUpdate:k}),b=T.progressPercent,y=T.isDraggingProgress,z=T.handleProgressMouseDown,W=T.handleProgressClick;if(!t||!t.id)return null;if(g){var H=g({task:t,leftPx:r,widthPx:n,topPx:a,isHovered:o,isDragging:i,editMode:c,showProgress:d});return M.createElement("div",{ref:D,className:"absolute",style:{left:"".concat(Math.max(0,r),"px"),width:"".concat(Math.max(20,n),"px"),top:"".concat(a,"px")},onClick:function(e){return p(e,t)},onMouseDown:function(e){return f(e,t,"move")},onMouseEnter:function(e){return h(e,t)},onMouseLeave:v,"data-testid":"task-".concat(t.id),"data-task-id":t.id,"data-instance-id":l,"data-dragging":i?"true":"false"},H)}var G=(o||i)&&c;return M.createElement("div",{ref:D,className:"rmg-task-item",style:{left:"".concat(Math.max(0,r),"px"),width:"".concat(Math.max(20,n),"px"),top:"".concat(a,"px"),willChange:i?"transform, left, width":"auto"},onClick:function(e){return p(e,t)},onMouseDown:function(e){return f(e,t,"move")},onMouseEnter:function(e){return h(e,t)},onMouseLeave:v,"data-testid":"task-".concat(t.id),"data-task-id":t.id,"data-instance-id":l,"data-dragging":i?"true":"false"},G&&M.createElement(R,{onResizeLeft:function(e){return f(e,t,"resize-left")},onResizeRight:function(e){return f(e,t,"resize-right")}}),M.createElement(L,{task:t,getTaskColor:m,isHovered:o,isDragging:i}),d&&"number"==typeof b&&M.createElement(s,{ref:C,percent:b,isHovered:o,isDraggingProgress:y,editMode:c,showProgress:d,onProgressClick:W,onProgressMouseDown:z}))},z=function(e){return M.createElement(v,t({},e))};export{v as GanttChart,z as GanttChartWithStyles,y as TaskItem,z as default};
//# sourceMappingURL=index.esm.js.map
