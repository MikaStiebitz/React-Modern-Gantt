import e,{useState as t,useRef as a}from"react";var r=function(){return r=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var n={headerBackground:"bg-white",headerText:"text-gray-700",backgroundHighlight:"bg-blue-50",borderColor:"border-gray-200",todayMarkerColor:"bg-red-500"};function o(e){return e.toLocaleString("default",{month:"short"})}function l(e,t){for(var a=[],r=e.getFullYear(),n=e.getMonth(),o=t.getFullYear(),l=t.getMonth(),i=r;i<=o;i++)for(var c=i===o?l:11,s=i===r?n:0;s<=c;s++)a.push(new Date(i,s,1));return a}function i(e,t,a){var r=l(new Date(t.getFullYear(),t.getMonth(),1),new Date(a.getFullYear(),a.getMonth()+1,0)),n=r.length,o=e.startDate.getFullYear(),i=e.startDate.getMonth(),c=r.findIndex((function(e){return e.getFullYear()===o&&e.getMonth()===i})),s=c<0?0:c,d=e.endDate.getFullYear(),u=e.endDate.getMonth(),m=r.findIndex((function(e){return e.getFullYear()===d&&e.getMonth()===u})),g=((m<0?r.length-1:m)-s+1)/n*100;return{left:"".concat(s/n*100,"%"),width:"".concat(g,"%")}}function c(e){var t=function(e,t,a){if(a||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()})),a=[];return t.forEach((function(e){for(var t=!1,r=0;r<a.length;r++){var n=a[r][a[r].length-1];if(e.startDate>=n.endDate){a[r].push(e),t=!0;break}}t||a.push([e])})),a}function s(e){var t=new Date;return e.forEach((function(e){e.tasks.forEach((function(e){e.startDate<t&&(t=new Date(e.startDate))}))})),new Date(t.getFullYear(),t.getMonth(),1)}function d(e){var t=new Date;return e.forEach((function(e){e.tasks.forEach((function(e){e.endDate>t&&(t=new Date(e.endDate))}))})),new Date(t.getFullYear(),t.getMonth()+1,0)}var u=function(o){var u=o.people,g=o.startDate,h=o.endDate,f=o.title,v=void 0===f?"Project Timeline":f,p=o.currentDate,b=void 0===p?new Date:p,x=o.showCurrentDateMarker,y=void 0===x||x,w=o.editMode,D=void 0===w||w,E=o.theme,k=void 0===E?n:E,M=o.onTaskUpdate,N=o.onTaskClick,F=t(null),Y=F[0],S=F[1],T=t({x:0,y:0}),z=T[0],C=T[1],L=t(null),P=L[0],X=L[1],I=t(null),O=I[0],j=I[1],B=t(0),q=B[0],A=B[1],H=a(null),R=g||s(u),U=h||d(u),W=l(R,U),G=W.length,J=b.getMonth(),K=b.getFullYear(),Q=W.findIndex((function(e){return e.getMonth()===J&&e.getFullYear()===K})),V=function(){P||S(null)},Z=function(e,t,a,r){D&&(e.preventDefault(),e.stopPropagation(),X({task:t,person:a}),j(r),A(e.clientX),document.addEventListener("mouseup",$))},$=function(){if(P&&O&&H.current){var e=document.querySelector('[data-task-id="'.concat(P.task.id,'"]'));if(e){var t=parseFloat(e.style.left),a=parseFloat(e.style.width),n=Math.floor(t/100*G),o=Math.ceil(a/100*G);if(n>=0&&n<W.length){var l=W[n],i=n+o-1;i>=W.length&&(i=W.length-1);var c=W[i],s=new Date(l.getFullYear(),l.getMonth(),Math.min(P.task.startDate.getDate(),m(l.getFullYear(),l.getMonth()))),d=new Date(c.getFullYear(),c.getMonth(),Math.min(P.task.endDate.getDate(),m(c.getFullYear(),c.getMonth()))),u=r(r({},P.task),{startDate:s,endDate:d});M&&M(P.person.id,u)}}}X(null),j(null),document.removeEventListener("mouseup",$)};k.headerBackground,k.headerText,k.borderColor;var _,ee=k.backgroundHighlight||"bg-blue-50",te=k.todayMarkerColor||"bg-red-500";return e.createElement("div",{ref:H,className:"w-full bg-white rounded-xl shadow-lg overflow-hidden","data-testid":"gantt-chart",onMouseMove:function(e){if(Y&&C({x:e.clientX,y:e.clientY}),P&&O&&H.current){var t=H.current.getBoundingClientRect(),a=(e.clientX-q)/t.width*100,r=document.querySelector('[data-task-id="'.concat(P.task.id,'"]'));if(!r)return;var n=parseFloat(r.style.left),o=parseFloat(r.style.width);if(P.task.endDate.getTime(),P.task.startDate.getTime(),"move"===O){var l=Math.max(0,Math.min(100-o,n+a));r.style.left="".concat(l,"%")}else if("resize-left"===O){var i=o-5,c=Math.min(i,a),s=(l=Math.max(0,n+c),Math.max(5,o-c));r.style.left="".concat(l,"%"),r.style.width="".concat(s,"%")}else if("resize-right"===O){s=Math.max(5,Math.min(100-n,o+a));r.style.width="".concat(s,"%")}A(e.clientX)}}},e.createElement("div",{className:"p-6 border-b border-gray-200"},e.createElement("h1",{className:"text-2xl font-bold text-gray-800"},v)),e.createElement("div",{className:"p-4"},e.createElement("div",{className:"flex border-b border-gray-200"},e.createElement("div",{className:"w-40 flex-shrink-0 p-2 font-semibold text-gray-700 border-r border-gray-200"},"Team Member"),e.createElement("div",{className:"flex-grow flex"},W.map((function(t,a){return e.createElement("div",{key:a,className:"flex-1 p-2 font-semibold text-center ".concat(a===Q?ee:""),"data-month":t.toISOString()},t.toLocaleString("default",{month:"short",year:"2-digit"}))})))),e.createElement("div",{className:"relative"},y&&Q>=0&&e.createElement("div",{className:"absolute top-0 w-px ".concat(te," z-10"),style:{left:"".concat((Q+.5)/W.length*100,"%"),height:"".concat((_=0,u.forEach((function(e){var t=c(e.tasks);_+=Math.max(60,30*t.length+15)})),_),"px")},"data-testid":"today-marker"},e.createElement("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 ".concat(te," px-1 py-0.5 rounded text-xs text-white whitespace-nowrap")},"Today")),u.map((function(t){var a=c(t.tasks),r=Math.max(60,30*a.length+15);return e.createElement("div",{key:t.id,className:"flex border-b border-gray-200 hover:bg-gray-50","data-testid":"person-row-".concat(t.id)},e.createElement("div",{className:"w-40 flex-shrink-0 p-2 border-r border-gray-200",style:{height:"".concat(r,"px")}},e.createElement("div",{className:"font-medium"},t.name),t.role&&e.createElement("div",{className:"text-xs text-gray-500"},t.role)),e.createElement("div",{className:"flex-grow relative",style:{height:"".concat(r,"px")}},a.map((function(a,r){return e.createElement(e.Fragment,{key:r},a.map((function(a){var n=i(a,R,U),o=n.left,l=n.width,c=(null==Y?void 0:Y.task.id)===a.id,s=(null==P?void 0:P.task.id)===a.id,d=(c||s)&&D;return e.createElement("div",{key:a.id,className:"absolute h-8 rounded ".concat(a.color," flex items-center px-2 text-xs text-white font-medium ").concat(D?"cursor-move":"cursor-pointer"),style:{left:o,width:l,top:"".concat(30*r+15,"px")},onClick:function(e){return function(e,t,a){N&&!P&&N(t,a)}(0,a,t)},onMouseDown:function(e){return Z(e,a,t,"move")},onMouseEnter:function(e){return function(e,t,a){P||(S({task:t,person:a}),C({x:e.clientX,y:e.clientY}))}(e,a,t)},onMouseLeave:V,"data-testid":"task-".concat(a.id),"data-task-id":a.id},d&&e.createElement("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-white bg-opacity-30 cursor-ew-resize rounded-l",onMouseDown:function(e){e.stopPropagation(),Z(e,a,t,"resize-left")}}),e.createElement("div",{className:"truncate"},a.name),void 0!==a.percent&&e.createElement("div",{className:"absolute bottom-1 left-1 right-1 h-1 bg-black bg-opacity-20 rounded-full overflow-hidden"},e.createElement("div",{className:"h-full bg-white rounded-full",style:{width:"".concat(a.percent,"%")}})),d&&e.createElement("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-white bg-opacity-30 cursor-ew-resize rounded-r",onMouseDown:function(e){e.stopPropagation(),Z(e,a,t,"resize-right")}}))})))}))))})))),Y&&!P&&e.createElement("div",{className:"fixed z-50 bg-white shadow-lg rounded-md border border-gray-200 p-3 text-xs",style:{left:"".concat(z.x+10,"px"),top:"".concat(z.y-80,"px"),minWidth:"200px"}},e.createElement("div",{className:"font-bold mb-1 text-sm"},Y.task.name),e.createElement("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1"},e.createElement("div",{className:"font-semibold"},"Start:"),e.createElement("div",null,Y.task.startDate.toLocaleDateString()),e.createElement("div",{className:"font-semibold"},"End:"),e.createElement("div",null,Y.task.endDate.toLocaleDateString()),void 0!==Y.task.percent&&e.createElement(e.Fragment,null,e.createElement("div",{className:"font-semibold"},"Progress:"),e.createElement("div",null,Y.task.percent,"%")))))};function m(e,t){return new Date(e,t+1,0).getDate()}export{n as DEFAULT_THEME,u as GanttChart,i as calculateTaskPosition,c as detectTaskOverlaps,s as findEarliestDate,d as findLatestDate,o as formatMonth,l as getMonthsBetween};
//# sourceMappingURL=index.esm.js.map
